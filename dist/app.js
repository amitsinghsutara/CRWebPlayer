/*! For license information please see app.js.LICENSE.txt */
(()=>{"use strict";var e,t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(e){e.CuriousReader="CuriousReader",e.GDL="GDL",e.Unknown="Unknown"}(e||(e={}));class n{constructor(e){this.emptyGlowImageTag="empty_glow_image",this.contentFilePath=e}async parseBook(){return new Promise(((e,t)=>{this.parseContentJSONFile().then((t=>{this.contentJSON=t,console.log("Content JSON file parsed!"),console.log(this.contentJSON);let n={bookName:"",pages:[],bookType:this.determineBookType()};n.pages=this.parsePages(n),e(n)})).catch((e=>{t(e)}))}))}determineBookType(){return void 0!==this.contentJSON.presentation?e.CuriousReader:void 0!==this.contentJSON.chapters?e.GDL:e.Unknown}parsePages(t){let n=[];if(t.bookType===e.CuriousReader){let e=this.contentJSON.presentation.slides,t=this.contentJSON.presentation.globalBackgroundSelector.fillGlobalBackground;for(let i=0;i<e.length;i++){let r=e[i],a={visualElements:[],backgroundColor:t};a.visualElements=this.parsePageCR(r),n.push(a)}}else if(t.bookType===e.GDL){let e=this.contentJSON.chapters,t="#FCFCF2";for(let i=0;i<e.length;i++){let r=e[i],a={visualElements:[],backgroundColor:t};a.visualElements=this.parsePageGDL(r),n.push(a)}}else console.log("Unknown book type!");return n}parsePageCR(e){let t=[],n=e.elements;for(let e=0;e<n.length;e++){let i=n[e].action.library;if(i.includes("AdvancedText")){let i=this.parseTextElementCR(n[e]);t.push(i)}else if(i.includes("Image")){let i=this.parseImageElementCR(n[e]);t.push(i)}else if(i.includes("Audio")){let i=this.parseAudioElementCR(n[e]);t.push(i)}}return t}parsePageGDL(e){let t=[],n=e.params.content;for(let e=0;e<n.length;e++){let i=n[e].content.library;if(i.includes("AdvancedText")){let i=this.parseTextElementGDL(n[e].content.params);t.push(i)}else if(i.includes("Image")){let i=this.parseImageElementGDL(n[e].content.params);t.push(i)}}return t}parseTextElementCR(e){return{type:"text",positionX:e.x,positionY:e.y,width:e.width,height:e.height,textContentAsHTML:e.action.params.text}}parseTextElementGDL(e){return{type:"text",positionX:NaN,positionY:NaN,width:NaN,height:NaN,textContentAsHTML:e.text}}parseImageElementCR(e){let t="";return t=void 0===e.action.params.file?this.emptyGlowImageTag:e.action.params.file.path,{domID:t===this.emptyGlowImageTag?e.id:e.action.subContentId,type:"image",positionX:e.x,positionY:e.y,width:e.width,height:e.height,imageSource:t}}parseImageElementGDL(e){return{domID:"",type:"image",positionX:NaN,positionY:NaN,width:e.width,height:e.height,imageSource:e.file.path}}parseAudioElementCR(e){let t={timestamps:[]},n=e.action.params.timeStampForEachText;for(let i=0;i<n.length;i++){let r=i,a=n[i],o={domID:e.action.subContentId+"_"+r.toString(),word:a.text,startTimestamp:a.startDuration,endTimestamp:a.endDuration,audioSrc:a.wordfile[0].path};t.timestamps.push(o)}return{domID:e.action.subContentId,type:"audio",positionX:e.x,positionY:e.y,width:e.width,height:e.height,glowColor:e.action.params.glowColor,audioSrc:e.action.params.files[0].path,audioTimestamps:t,styles:""}}async parseContentJSONFile(){return new Promise(((e,t)=>{let n=new XMLHttpRequest;n.open("GET",this.contentFilePath,!0),n.responseType="json",n.onload=function(){if(200===n.status){let t=n.response;delete t.l10n,delete t.override,e(t)}else t(n.response)},n.send()}))}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r="(prefers-reduced-motion: reduce)";function a(e){e.length=0}function o(e,t,n){return Array.prototype.slice.call(e,t,n)}function s(e){return e.bind.apply(e,[null].concat(o(arguments,1)))}var c=setTimeout,l=function(){};function u(e){return requestAnimationFrame(e)}function d(e,t){return typeof t===e}function h(e){return!v(e)&&d("object",e)}var f=Array.isArray,p=s(d,"function"),g=s(d,"string"),m=s(d,"undefined");function v(e){return null===e}function y(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch(e){return!1}}function w(e){return f(e)?e:[e]}function b(e,t){w(e).forEach(t)}function E(e,t){return e.indexOf(t)>-1}function I(e,t){return e.push.apply(e,w(t)),e}function S(e,t,n){e&&b(t,(function(t){t&&e.classList[n?"add":"remove"](t)}))}function C(e,t){S(e,g(t)?t.split(" "):t,!0)}function T(e,t){b(t,e.appendChild.bind(e))}function A(e,t){b(e,(function(e){var n=(t||e).parentNode;n&&n.insertBefore(e,t)}))}function k(e,t){return y(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function D(e,t){var n=e?o(e.children):[];return t?n.filter((function(e){return k(e,t)})):n}function P(e,t){return t?D(e,t)[0]:e.firstElementChild}var x=Object.keys;function L(e,t,n){return e&&(n?x(e).reverse():x(e)).forEach((function(n){"__proto__"!==n&&t(e[n],n)})),e}function O(e){return o(arguments,1).forEach((function(t){L(t,(function(n,i){e[i]=t[i]}))})),e}function B(e){return o(arguments,1).forEach((function(t){L(t,(function(t,n){f(t)?e[n]=t.slice():h(t)?e[n]=B({},h(e[n])?e[n]:{},t):e[n]=t}))})),e}function N(e,t){b(t||x(e),(function(t){delete e[t]}))}function M(e,t){b(e,(function(e){b(t,(function(t){e&&e.removeAttribute(t)}))}))}function F(e,t,n){h(t)?L(t,(function(t,n){F(e,n,t)})):b(e,(function(e){v(n)||""===n?M(e,t):e.setAttribute(t,String(n))}))}function j(e,t,n){var i=document.createElement(e);return t&&(g(t)?C(i,t):F(i,t)),n&&T(n,i),i}function R(e,t,n){if(m(n))return getComputedStyle(e)[t];v(n)||(e.style[t]=""+n)}function z(e,t){R(e,"display",t)}function $(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function H(e,t){return e.getAttribute(t)}function W(e,t){return e&&e.classList.contains(t)}function G(e){return e.getBoundingClientRect()}function U(e){b(e,(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}))}function V(e){return P((new DOMParser).parseFromString(e,"text/html").body)}function q(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function X(e,t){return e&&e.querySelector(t)}function J(e,t){return t?o(e.querySelectorAll(t)):[]}function K(e,t){S(e,t,!1)}function Y(e){return e.timeStamp}function Q(e){return g(e)?e:e?e+"px":""}var Z="splide";function ee(e,t){if(!e)throw new Error("[splide] "+(t||""))}var te=Math.min,ne=Math.max,ie=Math.floor,re=Math.ceil,ae=Math.abs;function oe(e,t,n){return ae(e-t)<n}function se(e,t,n,i){var r=te(t,n),a=ne(t,n);return i?r<e&&e<a:r<=e&&e<=a}function ce(e,t,n){var i=te(t,n),r=ne(t,n);return te(ne(i,e),r)}function le(e){return+(e>0)-+(e<0)}function ue(e,t){return b(t,(function(t){e=e.replace("%s",""+t)})),e}function de(e){return e<10?"0"+e:""+e}var he={};function fe(){var e=[];function t(e,t,n){b(e,(function(e){e&&b(t,(function(t){t.split(" ").forEach((function(t){var i=t.split(".");n(e,i[0],i[1])}))}))}))}return{bind:function(n,i,r,a){t(n,i,(function(t,n,i){var o="addEventListener"in t,s=o?t.removeEventListener.bind(t,n,r,a):t.removeListener.bind(t,r);o?t.addEventListener(n,r,a):t.addListener(r),e.push([t,n,i,r,s])}))},unbind:function(n,i,r){t(n,i,(function(t,n,i){e=e.filter((function(e){return!!(e[0]!==t||e[1]!==n||e[2]!==i||r&&e[3]!==r)||(e[4](),!1)}))}))},dispatch:function(e,t,n){var i;return"function"==typeof CustomEvent?i=new CustomEvent(t,{bubbles:!0,detail:n}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!1,n),e.dispatchEvent(i),i},destroy:function(){e.forEach((function(e){e[4]()})),a(e)}}}var pe="mounted",ge="ready",me="move",ve="moved",ye="click",we="refresh",be="updated",Ee="resize",Ie="resized",Se="scroll",Ce="scrolled",_e="destroy",Te="navigation:mounted",Ae="autoplay:play",ke="autoplay:pause",De="lazyload:loaded",Pe="ei";function xe(e){var t=e?e.event.bus:document.createDocumentFragment(),n=fe();return e&&e.event.on(_e,n.destroy),O(n,{bus:t,on:function(e,i){n.bind(t,w(e).join(" "),(function(e){i.apply(i,f(e.detail)?e.detail:[])}))},off:s(n.unbind,t),emit:function(e){n.dispatch(t,e,o(arguments,1))}})}function Le(e,t,n,i){var r,a,o=Date.now,s=0,c=!0,l=0;function d(){if(!c){if(s=e?te((o()-r)/e,1):1,n&&n(s),s>=1&&(t(),r=o(),i&&++l>=i))return h();a=u(d)}}function h(){c=!0}function f(){a&&cancelAnimationFrame(a),s=0,a=0,c=!0}return{start:function(t){t||f(),r=o()-(t?s*e:0),c=!1,a=u(d)},rewind:function(){r=o(),s=0,n&&n(s)},pause:h,cancel:f,set:function(t){e=t},isPaused:function(){return c}}}var Oe="ArrowLeft",Be="ArrowRight",Ne="ArrowUp",Me="ArrowDown",Fe="ttb",je={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Ne,Be],ArrowRight:[Me,Oe]};var Re="role",ze="tabindex",$e="aria-controls",He="aria-current",We="aria-selected",Ge="aria-label",Ue="aria-labelledby",Ve="aria-hidden",qe="aria-orientation",Xe="aria-roledescription",Je="aria-live",Ke="aria-busy",Ye="aria-atomic",Qe=[Re,ze,"disabled",$e,He,Ge,Ue,Ve,qe,Xe],Ze=Z,et="splide__track",tt="splide__slide",nt=tt+"--clone",it="splide__arrows",rt="splide__arrow",at=rt+"--prev",ot=rt+"--next",st="splide__pagination",ct="is-active",lt="is-prev",ut="is-next",dt="is-visible",ht="is-loading",ft="is-focus-in",pt="is-overflow",gt=[ct,dt,lt,ut,ht,ft,pt],mt={slide:tt,clone:nt,arrows:it,arrow:rt,prev:at,next:ot,pagination:st,page:"splide__pagination__page",spinner:"splide__spinner"},vt="touchmove mousemove",yt="touchend touchcancel mouseup click",wt="slide",bt="loop",Et="fade";var It={passive:!1,capture:!0},St={Spacebar:" ",Right:Be,Left:Oe,Up:Ne,Down:Me};function Ct(e){return e=g(e)?e:e.key,St[e]||e}var _t="keydown",Tt="data-splide-lazy",At="data-splide-lazy-srcset",kt=[" ","Enter"],Dt=Object.freeze({__proto__:null,Media:function(e,t,n){var i=e.state,a=n.breakpoints||{},o=n.reducedMotion||{},s=fe(),c=[];function l(e){e&&s.destroy()}function u(e,t){var n=matchMedia(t);s.bind(n,"change",d),c.push([e,n])}function d(){var t=i.is(7),r=n.direction,a=c.reduce((function(e,t){return B(e,t[1].matches?t[0]:{})}),{});N(n),h(a),n.destroy?e.destroy("completely"===n.destroy):t?(l(!0),e.mount()):r!==n.direction&&e.refresh()}function h(t,r,a){B(n,t),r&&B(Object.getPrototypeOf(n),t),!a&&i.is(1)||e.emit(be,n)}return{setup:function(){var e="min"===n.mediaQuery;x(a).sort((function(t,n){return e?+t-+n:+n-+t})).forEach((function(t){u(a[t],"("+(e?"min":"max")+"-width:"+t+"px)")})),u(o,r),d()},destroy:l,reduce:function(e){matchMedia(r).matches&&(e?B(n,o):N(n,x(o)))},set:h}},Direction:function(e,t,n){return{resolve:function(e,t,i){var r="rtl"!==(i=i||n.direction)||t?i===Fe?0:-1:1;return je[e]&&je[e][r]||e.replace(/width|left|right/i,(function(e,t){var n=je[e.toLowerCase()][r]||e;return t>0?n.charAt(0).toUpperCase()+n.slice(1):n}))},orient:function(e){return e*("rtl"===n.direction?1:-1)}}},Elements:function(e,t,n){var i,r,o,s=xe(e),c=s.on,l=s.bind,u=e.root,d=n.i18n,h={},f=[],g=[],m=[];function v(){var e,t,a;i=b("."+et),r=P(i,".splide__list"),ee(i&&r,"A track/list element is missing."),I(f,D(r,".splide__slide:not(."+nt+")")),L({arrows:it,pagination:st,prev:at,next:ot,bar:"splide__progress__bar",toggle:"splide__toggle"},(function(e,t){h[t]=b("."+e)})),O(h,{root:u,track:i,list:r,slides:f}),t=u.id||""+(e=Z)+de(he[e]=(he[e]||0)+1),a=n.role,u.id=t,i.id=i.id||t+"-track",r.id=r.id||t+"-list",!H(u,Re)&&"SECTION"!==u.tagName&&a&&F(u,Re,a),F(u,Xe,d.carousel),F(r,Re,"presentation"),w()}function y(e){var t=Qe.concat("style");a(f),K(u,g),K(i,m),M([i,r],t),M(u,e?t:["style",Xe])}function w(){K(u,g),K(i,m),g=E(Ze),m=E(et),C(u,g),C(i,m),F(u,Ge,n.label),F(u,Ue,n.labelledby)}function b(e){var t=X(u,e);return t&&function(e,t){if(p(e.closest))return e.closest(t);for(var n=e;n&&1===n.nodeType&&!k(n,t);)n=n.parentElement;return n}(t,".splide")===u?t:void 0}function E(e){return[e+"--"+n.type,e+"--"+n.direction,n.drag&&e+"--draggable",n.isNavigation&&e+"--nav",e===Ze&&ct]}return O(h,{setup:v,mount:function(){c(we,y),c(we,v),c(be,w),l(document,"touchstart mousedown keydown",(function(e){o="keydown"===e.type}),{capture:!0}),l(u,"focusin",(function(){S(u,ft,!!o)}))},destroy:y})},Slides:function(e,t,n){var i=xe(e),r=i.on,o=i.emit,c=i.bind,l=t.Elements,u=l.slides,d=l.list,h=[];function f(){u.forEach((function(e,t){v(e,t,-1)}))}function m(){_((function(e){e.destroy()})),a(h)}function v(t,n,i){var r=function(e,t,n,i){var r,a=xe(e),o=a.on,c=a.emit,l=a.bind,u=e.Components,d=e.root,h=e.options,f=h.isNavigation,p=h.updateOnMove,g=h.i18n,m=h.pagination,v=h.slideFocus,y=u.Direction.resolve,w=H(i,"style"),b=H(i,Ge),E=n>-1,I=P(i,".splide__slide__container");function C(){var r=e.splides.map((function(e){var n=e.splide.Components.Slides.getAt(t);return n?n.slide.id:""})).join(" ");F(i,Ge,ue(g.slideX,(E?n:t)+1)),F(i,$e,r),F(i,Re,v?"button":""),v&&M(i,Xe)}function _(){r||T()}function T(){if(!r){var n=e.index;(a=A())!==W(i,ct)&&(S(i,ct,a),F(i,He,f&&a||""),c(a?"active":"inactive",k)),function(){var t=function(){if(e.is(Et))return A();var t=G(u.Elements.track),n=G(i),r=y("left",!0),a=y("right",!0);return ie(t[r])<=re(n[r])&&ie(n[a])<=re(t[a])}(),n=!t&&(!A()||E);if(e.state.is([4,5])||F(i,Ve,n||""),F(J(i,h.focusableNodes||""),ze,n?-1:""),v&&F(i,ze,n?-1:0),t!==W(i,dt)&&(S(i,dt,t),c(t?"visible":"hidden",k)),!t&&document.activeElement===i){var r=u.Slides.getAt(e.index);r&&$(r.slide)}}(),S(i,lt,t===n-1),S(i,ut,t===n+1)}var a}function A(){var i=e.index;return i===t||h.cloneStatus&&i===n}var k={index:t,slideIndex:n,slide:i,container:I,isClone:E,mount:function(){E||(i.id=d.id+"-slide"+de(t+1),F(i,Re,m?"tabpanel":"group"),F(i,Xe,g.slide),F(i,Ge,b||ue(g.slideLabel,[t+1,e.length]))),l(i,"click",s(c,ye,k)),l(i,"keydown",s(c,"sk",k)),o([ve,"sh",Ce],T),o(Te,C),p&&o(me,_)},destroy:function(){r=!0,a.destroy(),K(i,gt),M(i,Qe),F(i,"style",w),F(i,Ge,b||"")},update:T,style:function(e,t,n){R(n&&I||i,e,t)},isWithin:function(n,i){var r=ae(n-t);return E||!h.rewind&&!e.is(bt)||(r=te(r,e.length-r)),r<=i}};return k}(e,n,i,t);r.mount(),h.push(r),h.sort((function(e,t){return e.index-t.index}))}function I(e){return e?D((function(e){return!e.isClone})):h}function _(e,t){I(t).forEach(e)}function D(e){return h.filter(p(e)?e:function(t){return g(e)?k(t.slide,e):E(w(e),t.index)})}return{mount:function(){f(),r(we,m),r(we,f)},destroy:m,update:function(){_((function(e){e.update()}))},register:v,get:I,getIn:function(e){var i=t.Controller,r=i.toIndex(e),a=i.hasFocus()?1:n.perPage;return D((function(e){return se(e.index,r,r+a-1)}))},getAt:function(e){return D(e)[0]},add:function(e,t){b(e,(function(e){if(g(e)&&(e=V(e)),y(e)){var i=u[t];i?A(e,i):T(d,e),C(e,n.classes.slide),r=e,a=s(o,Ee),l=J(r,"img"),(h=l.length)?l.forEach((function(e){c(e,"load error",(function(){--h||a()}))})):a()}var r,a,l,h})),o(we)},remove:function(e){U(D(e).map((function(e){return e.slide}))),o(we)},forEach:_,filter:D,style:function(e,t,n){_((function(i){i.style(e,t,n)}))},getLength:function(e){return e?u.length:h.length},isEnough:function(){return h.length>n.perPage}}},Layout:function(e,t,n){var i,r,a,o=xe(e),c=o.on,l=o.bind,u=o.emit,d=t.Slides,f=t.Direction.resolve,p=t.Elements,g=p.root,m=p.track,v=p.list,y=d.getAt,w=d.style;function b(){i=n.direction===Fe,R(g,"maxWidth",Q(n.width)),R(m,f("paddingLeft"),I(!1)),R(m,f("paddingRight"),I(!0)),E(!0)}function E(e){var t,o=G(g);(e||r.width!==o.width||r.height!==o.height)&&(R(m,"height",(t="",i&&(ee(t=C(),"height or heightRatio is missing."),t="calc("+t+" - "+I(!1)+" - "+I(!0)+")"),t)),w(f("marginRight"),Q(n.gap)),w("width",n.autoWidth?null:Q(n.fixedWidth)||(i?"":_())),w("height",Q(n.fixedHeight)||(i?n.autoHeight?null:_():C()),!0),r=o,u(Ie),a!==(a=x())&&(S(g,pt,a),u("overflow",a)))}function I(e){var t=n.padding,i=f(e?"right":"left");return t&&Q(t[i]||(h(t)?0:t))||"0px"}function C(){return Q(n.height||G(v).width*n.heightRatio)}function _(){var e=Q(n.gap);return"calc((100%"+(e&&" + "+e)+")/"+(n.perPage||1)+(e&&" - "+e)+")"}function T(){return G(v)[f("width")]}function A(e,t){var n=y(e||0);return n?G(n.slide)[f("width")]+(t?0:P()):0}function k(e,t){var n=y(e);if(n){var i=G(n.slide)[f("right")],r=G(v)[f("left")];return ae(i-r)+(t?0:P())}return 0}function D(t){return k(e.length-1)-k(0)+A(0,t)}function P(){var e=y(0);return e&&parseFloat(R(e.slide,f("marginRight")))||0}function x(){return e.is(Et)||D(!0)>T()}return{mount:function(){var e,t;b(),l(window,"resize load",(e=s(u,Ee),t=Le(0,e,null,1),function(){t.isPaused()&&t.start()})),c([be,we],b),c(Ee,E)},resize:E,listSize:T,slideSize:A,sliderSize:D,totalSize:k,getPadding:function(e){return parseFloat(R(m,f("padding"+(e?"Right":"Left"))))||0},isOverflow:x}},Clones:function(e,t,n){var i,r=xe(e),o=r.on,s=t.Elements,c=t.Slides,l=t.Direction.resolve,u=[];function d(){o(we,h),o([be,Ee],p),(i=g())&&(function(t){var i=c.get().slice(),r=i.length;if(r){for(;i.length<t;)I(i,i);I(i.slice(-t),i.slice(0,t)).forEach((function(a,o){var l=o<t,d=function(t,i){var r=t.cloneNode(!0);return C(r,n.classes.clone),r.id=e.root.id+"-clone"+de(i+1),r}(a.slide,o);l?A(d,i[0].slide):T(s.list,d),I(u,d),c.register(d,o-t+(l?0:r),a.index)}))}}(i),t.Layout.resize(!0))}function h(){f(),d()}function f(){U(u),a(u),r.destroy()}function p(){var e=g();i!==e&&(i<e||!e)&&r.emit(we)}function g(){var i=n.clones;if(e.is(bt)){if(m(i)){var r=n[l("fixedWidth")]&&t.Layout.slideSize(0);i=r&&re(G(s.track)[l("width")]/r)||n[l("autoWidth")]&&e.length||2*n.perPage}}else i=0;return i}return{mount:d,destroy:f}},Move:function(e,t,n){var i,r=xe(e),a=r.on,o=r.emit,s=e.state.set,c=t.Layout,l=c.slideSize,u=c.getPadding,d=c.totalSize,h=c.listSize,f=c.sliderSize,p=t.Direction,g=p.resolve,v=p.orient,y=t.Elements,w=y.list,b=y.track;function E(){t.Controller.isBusy()||(t.Scroll.cancel(),I(e.index),t.Slides.update())}function I(e){S(A(e,!0))}function S(n,i){if(!e.is(Et)){var r=i?n:function(n){if(e.is(bt)){var i=T(n),r=i>t.Controller.getEnd();(i<0||r)&&(n=C(n,r))}return n}(n);R(w,"transform","translate"+g("X")+"("+r+"px)"),n!==r&&o("sh")}}function C(e,t){var n=e-D(t),i=f();return e-v(i*(re(ae(n)/i)||1))*(t?1:-1)}function _(){S(k(),!0),i.cancel()}function T(e){for(var n=t.Slides.get(),i=0,r=1/0,a=0;a<n.length;a++){var o=n[a].index,s=ae(A(o,!0)-e);if(!(s<=r))break;r=s,i=o}return i}function A(t,i){var r=v(d(t-1)-function(e){var t=n.focus;return"center"===t?(h()-l(e,!0))/2:+t*l(e)||0}(t));return i?function(t){return n.trimSpace&&e.is(wt)&&(t=ce(t,0,v(f(!0)-h()))),t}(r):r}function k(){var e=g("left");return G(w)[e]-G(b)[e]+v(u(!1))}function D(e){return A(e?t.Controller.getEnd():0,!!n.trimSpace)}return{mount:function(){i=t.Transition,a([pe,Ie,be,we],E)},move:function(e,t,n,r){var a,c;e!==t&&(a=e>n,c=v(C(k(),a)),a?c>=0:c<=w[g("scrollWidth")]-G(b)[g("width")])&&(_(),S(C(k(),e>n),!0)),s(4),o(me,t,n,e),i.start(t,(function(){s(3),o(ve,t,n,e),r&&r()}))},jump:I,translate:S,shift:C,cancel:_,toIndex:T,toPosition:A,getPosition:k,getLimit:D,exceededLimit:function(e,t){t=m(t)?k():t;var n=!0!==e&&v(t)<v(D(!1)),i=!1!==e&&v(t)>v(D(!0));return n||i},reposition:E}},Controller:function(e,t,n){var i,r,a,o,c=xe(e),l=c.on,u=c.emit,d=t.Move,h=d.getPosition,f=d.getLimit,p=d.toPosition,v=t.Slides,y=v.isEnough,w=v.getLength,b=n.omitEnd,E=e.is(bt),I=e.is(wt),S=s(D,!1),C=s(D,!0),_=n.start||0,T=_;function A(){r=w(!0),a=n.perMove,o=n.perPage,i=L();var e=ce(_,0,b?i:r-1);e!==_&&(_=e,d.reposition())}function k(){i!==L()&&u(Pe)}function D(e,t){var n=a||(M()?1:o),r=P(_+n*(e?-1:1),_,!(a||M()));return-1===r&&I&&!oe(h(),f(!e),1)?e?0:i:t?r:x(r)}function P(t,s,c){if(y()||M()){var l=function(t){if(I&&"move"===n.trimSpace&&t!==_)for(var i=h();i===p(t,!0)&&se(t,0,e.length-1,!n.rewind);)t<_?--t:++t;return t}(t);l!==t&&(s=t,t=l,c=!1),t<0||t>i?t=a||!se(0,t,s,!0)&&!se(i,s,t,!0)?E?c?t<0?-(r%o||o):r:t:n.rewind?t<0?i:0:-1:O(B(t)):c&&t!==s&&(t=O(B(s)+(t<s?-1:1)))}else t=-1;return t}function x(e){return E?(e+r)%r||0:e}function L(){for(var e=r-(M()||E&&a?1:o);b&&e-- >0;)if(p(r-1,!0)!==p(e,!0)){e++;break}return ce(e,0,r-1)}function O(e){return ce(M()?e:o*e,0,i)}function B(e){return M()?te(e,i):ie((e>=i?r-1:e)/o)}function N(e){e!==_&&(T=_,_=e)}function M(){return!m(n.focus)||n.isNavigation}function F(){return e.state.is([4,5])&&!!n.waitForTransition}return{mount:function(){A(),l([be,we,Pe],A),l(Ie,k)},go:function(e,t,n){if(!F()){var r=function(e){var t=_;if(g(e)){var n=e.match(/([+\-<>])(\d+)?/)||[],r=n[1],a=n[2];"+"===r||"-"===r?t=P(_+ +(""+r+(+a||1)),_):">"===r?t=a?O(+a):S(!0):"<"===r&&(t=C(!0))}else t=E?e:ce(e,0,i);return t}(e),a=x(r);a>-1&&(t||a!==_)&&(N(a),d.move(r,a,T,n))}},scroll:function(e,n,r,a){t.Scroll.scroll(e,n,r,(function(){var e=x(d.toIndex(h()));N(b?te(e,i):e),a&&a()}))},getNext:S,getPrev:C,getAdjacent:D,getEnd:L,setIndex:N,getIndex:function(e){return e?T:_},toIndex:O,toPage:B,toDest:function(e){var t=d.toIndex(e);return I?ce(t,0,i):t},hasFocus:M,isBusy:F}},Arrows:function(e,t,n){var i,r,a=xe(e),o=a.on,c=a.bind,l=a.emit,u=n.classes,d=n.i18n,h=t.Elements,f=t.Controller,p=h.arrows,g=h.track,m=p,v=h.prev,y=h.next,w={};function b(){var e;!(e=n.arrows)||v&&y||(m=p||j("div",u.arrows),v=_(!0),y=_(!1),i=!0,T(m,[v,y]),!p&&A(m,g)),v&&y&&(O(w,{prev:v,next:y}),z(m,e?"":"none"),C(m,r=it+"--"+n.direction),e&&(o([pe,ve,we,Ce,Pe],k),c(y,"click",s(S,">")),c(v,"click",s(S,"<")),k(),F([v,y],$e,g.id),l("arrows:mounted",v,y))),o(be,E)}function E(){I(),b()}function I(){a.destroy(),K(m,r),i?(U(p?[v,y]:m),v=y=null):M([v,y],Qe)}function S(e){f.go(e,!0)}function _(e){return V('<button class="'+u.arrow+" "+(e?u.prev:u.next)+'" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40" focusable="false"><path d="'+(n.arrowPath||"m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z")+'" />')}function k(){if(v&&y){var t=e.index,n=f.getPrev(),i=f.getNext(),r=n>-1&&t<n?d.last:d.prev,a=i>-1&&t>i?d.first:d.next;v.disabled=n<0,y.disabled=i<0,F(v,Ge,r),F(y,Ge,a),l("arrows:updated",v,y,n,i)}}return{arrows:w,mount:b,destroy:I,update:k}},Autoplay:function(e,t,n){var i,r,a=xe(e),o=a.on,s=a.bind,c=a.emit,l=Le(n.interval,e.go.bind(e,">"),(function(e){var t=d.bar;t&&R(t,"width",100*e+"%"),c("autoplay:playing",e)})),u=l.isPaused,d=t.Elements,h=t.Elements,f=h.root,p=h.toggle,g=n.autoplay,m="pause"===g;function v(){u()&&t.Slides.isEnough()&&(l.start(!n.resetProgress),r=i=m=!1,b(),c(Ae))}function y(e){void 0===e&&(e=!0),m=!!e,b(),u()||(l.pause(),c(ke))}function w(){m||(i||r?y(!1):v())}function b(){p&&(S(p,ct,!m),F(p,Ge,n.i18n[m?"play":"pause"]))}function E(e){var i=t.Slides.getAt(e);l.set(i&&+H(i.slide,"data-splide-interval")||n.interval)}return{mount:function(){g&&(n.pauseOnHover&&s(f,"mouseenter mouseleave",(function(e){i="mouseenter"===e.type,w()})),n.pauseOnFocus&&s(f,"focusin focusout",(function(e){r="focusin"===e.type,w()})),p&&s(p,"click",(function(){m?v():y(!0)})),o([me,Se,we],l.rewind),o(me,E),p&&F(p,$e,d.track.id),m||v(),b())},destroy:l.cancel,play:v,pause:y,isPaused:u}},Cover:function(e,t,n){var i=xe(e).on;function r(e){t.Slides.forEach((function(t){var n=P(t.container||t.slide,"img");n&&n.src&&a(e,n,t)}))}function a(e,t,n){n.style("background",e?'center/cover no-repeat url("'+t.src+'")':"",!0),z(t,e?"none":"")}return{mount:function(){n.cover&&(i(De,s(a,!0)),i([pe,be,we],s(r,!0)))},destroy:s(r,!1)}},Scroll:function(e,t,n){var i,r,a=xe(e),o=a.on,c=a.emit,l=e.state.set,u=t.Move,d=u.getPosition,h=u.getLimit,f=u.exceededLimit,p=u.translate,g=e.is(wt),m=1;function v(e,n,a,o,h){var p=d();if(b(),a&&(!g||!f())){var v=t.Layout.sliderSize(),E=le(e)*v*ie(ae(e)/v)||0;e=u.toPosition(t.Controller.toDest(e%v))+E}var I=oe(p,e,1);m=1,n=I?0:n||ne(ae(e-p)/1.5,800),r=o,i=Le(n,y,s(w,p,e,h),1),l(5),c(Se),i.start()}function y(){l(3),r&&r(),c(Ce)}function w(e,t,i,a){var o=d(),s=e+(t-e)*function(e){var t=n.easingFunc;return t?t(e):1-Math.pow(1-e,4)}(a),c=(s-o)*m;p(o+c),g&&!i&&f()&&(m*=.6,ae(c)<10&&v(h(f(!0)),600,!1,r,!0))}function b(){i&&i.cancel()}function E(){i&&!i.isPaused()&&(b(),y())}return{mount:function(){o(me,b),o([be,we],E)},destroy:b,scroll:v,cancel:E}},Drag:function(e,t,n){var i,r,a,o,s,c,u,d,f=xe(e),p=f.on,g=f.emit,m=f.bind,v=f.unbind,y=e.state,w=t.Move,b=t.Scroll,E=t.Controller,I=t.Elements.track,S=t.Media.reduce,C=t.Direction,_=C.resolve,T=C.orient,A=w.getPosition,D=w.exceededLimit,P=!1;function x(){var e=n.drag;H(!e),o="free"===e}function L(e){if(c=!1,!u){var t=$(e);i=e.target,r=n.noDrag,k(i,".splide__pagination__page, ."+rt)||r&&k(i,r)||!t&&e.button||(E.isBusy()?q(e,!0):(d=t?I:window,s=y.is([4,5]),a=null,m(d,vt,O,It),m(d,yt,B,It),w.cancel(),b.cancel(),M(e)))}var i,r}function O(t){if(y.is(6)||(y.set(6),g("drag")),t.cancelable)if(s){w.translate(i+F(t)/(P&&e.is(wt)?5:1));var r=j(t)>200,a=P!==(P=D());(r||a)&&M(t),c=!0,g("dragging"),q(t)}else(function(e){return ae(F(e))>ae(F(e,!0))})(t)&&(s=function(e){var t=n.dragMinThreshold,i=h(t),r=i&&t.mouse||0,a=(i?t.touch:+t)||10;return ae(F(e))>($(e)?a:r)}(t),q(t))}function B(i){y.is(6)&&(y.set(3),g("dragged")),s&&(function(i){var r=function(t){if(e.is(bt)||!P){var n=j(t);if(n&&n<200)return F(t)/n}return 0}(i),a=function(e){return A()+le(e)*te(ae(e)*(n.flickPower||600),o?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}(r),s=n.rewind&&n.rewindByDrag;S(!1),o?E.scroll(a,0,n.snap):e.is(Et)?E.go(T(le(r))<0?s?"<":"-":s?">":"+"):e.is(wt)&&P&&s?E.go(D(!0)?">":"<"):E.go(E.toDest(a),!0),S(!0)}(i),q(i)),v(d,vt,O),v(d,yt,B),s=!1}function N(e){!u&&c&&q(e,!0)}function M(e){a=r,r=e,i=A()}function F(e,t){return z(e,t)-z(R(e),t)}function j(e){return Y(e)-Y(R(e))}function R(e){return r===e&&a||r}function z(e,t){return($(e)?e.changedTouches[0]:e)["page"+_(t?"Y":"X")]}function $(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function H(e){u=e}return{mount:function(){m(I,vt,l,It),m(I,yt,l,It),m(I,"touchstart mousedown",L,It),m(I,"click",N,{capture:!0}),m(I,"dragstart",q),p([pe,be],x)},disable:H,isDragging:function(){return s}}},Keyboard:function(e,t,n){var i,r,a=xe(e),o=a.on,s=a.bind,l=a.unbind,u=e.root,d=t.Direction.resolve;function h(){var e=n.keyboard;e&&(i="global"===e?window:u,s(i,_t,g))}function f(){l(i,_t)}function p(){var e=r;r=!0,c((function(){r=e}))}function g(t){if(!r){var n=Ct(t);n===d(Oe)?e.go("<"):n===d(Be)&&e.go(">")}}return{mount:function(){h(),o(be,f),o(be,h),o(me,p)},destroy:f,disable:function(e){r=e}}},LazyLoad:function(e,t,n){var i=xe(e),r=i.on,o=i.off,c=i.bind,l=i.emit,u="sequential"===n.lazyLoad,d=[ve,Ce],h=[];function f(){a(h),t.Slides.forEach((function(e){J(e.slide,"[data-splide-lazy], [data-splide-lazy-srcset]").forEach((function(t){var i=H(t,Tt),r=H(t,At);if(i!==t.src||r!==t.srcset){var a=n.classes.spinner,o=t.parentElement,s=P(o,"."+a)||j("span",a,o);h.push([t,e,s]),t.src||z(t,"none")}}))})),u?v():(o(d),r(d,p),p())}function p(){(h=h.filter((function(t){var i=n.perPage*((n.preloadPages||1)+1)-1;return!t[1].isWithin(e.index,i)||g(t)}))).length||o(d)}function g(e){var t=e[0];C(e[1].slide,ht),c(t,"load error",s(m,e)),F(t,"src",H(t,Tt)),F(t,"srcset",H(t,At)),M(t,Tt),M(t,At)}function m(e,t){var n=e[0],i=e[1];K(i.slide,ht),"error"!==t.type&&(U(e[2]),z(n,""),l(De,n,i),l(Ee)),u&&v()}function v(){h.length&&g(h.shift())}return{mount:function(){n.lazyLoad&&(f(),r(we,f))},destroy:s(a,h),check:p}},Pagination:function(e,t,n){var i,r,c=xe(e),l=c.on,u=c.emit,d=c.bind,h=t.Slides,f=t.Elements,p=t.Controller,g=p.hasFocus,m=p.getIndex,v=p.go,y=t.Direction.resolve,w=f.pagination,b=[];function E(){i&&(U(w?o(i.children):i),K(i,r),a(b),i=null),c.destroy()}function I(e){v(">"+e,!0)}function S(e,t){var n=b.length,i=Ct(t),r=_(),a=-1;i===y(Be,!1,r)?a=++e%n:i===y(Oe,!1,r)?a=(--e+n)%n:"Home"===i?a=0:"End"===i&&(a=n-1);var o=b[a];o&&($(o.button),v(">"+a),q(t,!0))}function _(){return n.paginationDirection||n.direction}function T(e){return b[p.toPage(e)]}function A(){var e=T(m(!0)),t=T(m());if(e){var n=e.button;K(n,ct),M(n,We),F(n,ze,-1)}if(t){var r=t.button;C(r,ct),F(r,We,!0),F(r,ze,"")}u("pagination:updated",{list:i,items:b},e,t)}return{items:b,mount:function t(){E(),l([be,we,Pe],t);var a=n.pagination;w&&z(w,a?"":"none"),a&&(l([me,Se,Ce],A),function(){var t=e.length,a=n.classes,o=n.i18n,c=n.perPage,l=g()?p.getEnd()+1:re(t/c);C(i=w||j("ul",a.pagination,f.track.parentElement),r=st+"--"+_()),F(i,Re,"tablist"),F(i,Ge,o.select),F(i,qe,_()===Fe?"vertical":"");for(var u=0;u<l;u++){var m=j("li",null,i),v=j("button",{class:a.page,type:"button"},m),y=h.getIn(u).map((function(e){return e.slide.id})),E=!g()&&c>1?o.pageX:o.slideX;d(v,"click",s(I,u)),n.paginationKeyboard&&d(v,"keydown",s(S,u)),F(m,Re,"presentation"),F(v,Re,"tab"),F(v,$e,y.join(" ")),F(v,Ge,ue(E,u+1)),F(v,ze,-1),b.push({li:m,button:v,page:u})}}(),A(),u("pagination:mounted",{list:i,items:b},T(e.index)))},destroy:E,getAt:T,update:A}},Sync:function(e,t,n){var i=n.isNavigation,r=n.slideFocus,o=[];function c(){var t,n;e.splides.forEach((function(t){t.isParent||(u(e,t.splide),u(t.splide,e))})),i&&((n=(t=xe(e)).on)(ye,h),n("sk",f),n([pe,be],d),o.push(t),t.emit(Te,e.splides))}function l(){o.forEach((function(e){e.destroy()})),a(o)}function u(e,t){var n=xe(e);n.on(me,(function(e,n,i){t.go(t.is(bt)?i:e)})),o.push(n)}function d(){F(t.Elements.list,qe,n.direction===Fe?"vertical":"")}function h(t){e.go(t.index)}function f(e,t){E(kt,Ct(t))&&(h(e),q(t))}return{setup:s(t.Media.set,{slideFocus:m(r)?i:r},!0),mount:c,destroy:l,remount:function(){l(),c()}}},Wheel:function(e,t,n){var i=xe(e).bind,r=0;function a(i){if(i.cancelable){var a=i.deltaY,o=a<0,s=Y(i),c=n.wheelMinThreshold||0,l=n.wheelSleep||0;ae(a)>c&&s-r>l&&(e.go(o?"<":">"),r=s),function(i){return!n.releaseWheel||e.state.is(4)||-1!==t.Controller.getAdjacent(i)}(o)&&q(i)}}return{mount:function(){n.wheel&&i(t.Elements.track,"wheel",a,It)}}},Live:function(e,t,n){var i=xe(e).on,r=t.Elements.track,a=n.live&&!n.isNavigation,o=j("span","splide__sr"),c=Le(90,s(l,!1));function l(e){F(r,Ke,e),e?(T(r,o),c.start()):(U(o),c.cancel())}function u(e){a&&F(r,Je,e?"off":"polite")}return{mount:function(){a&&(u(!t.Autoplay.isPaused()),F(r,Ye,!0),o.textContent="…",i(Ae,s(u,!0)),i(ke,s(u,!1)),i([ve,Ce],s(l,!0)))},disable:u,destroy:function(){M(r,[Je,Ye,Ke]),U(o)}}}}),Pt={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:mt,i18n:{prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function xt(e,t,n){var i=t.Slides;function r(){i.forEach((function(e){e.style("transform","translateX(-"+100*e.index+"%)")}))}return{mount:function(){xe(e).on([pe,we],r)},start:function(e,t){i.style("transition","opacity "+n.speed+"ms "+n.easing),c(t)},cancel:l}}function Lt(e,t,n){var i,r=t.Move,a=t.Controller,o=t.Scroll,c=t.Elements.list,l=s(R,c,"transition");function u(){l(""),o.cancel()}return{mount:function(){xe(e).bind(c,"transitionend",(function(e){e.target===c&&i&&(u(),i())}))},start:function(t,s){var c=r.toPosition(t,!0),u=r.getPosition(),d=function(t){var i=n.rewindSpeed;if(e.is(wt)&&i){var r=a.getIndex(!0),o=a.getEnd();if(0===r&&t>=o||r>=o&&0===t)return i}return n.speed}(t);ae(c-u)>=1&&d>=1?n.useScroll?o.scroll(c,d,!1,s):(l("transform "+d+"ms "+n.easing),r.translate(c,!0),i=s):(r.jump(t),s())},cancel:u}}var Ot=function(){function e(t,n){var i;this.event=xe(),this.Components={},this.state=(i=1,{set:function(e){i=e},is:function(e){return E(w(e),i)}}),this.splides=[],this._o={},this._E={};var r=g(t)?X(document,t):t;ee(r,r+" is invalid."),this.root=r,n=B({label:H(r,Ge)||"",labelledby:H(r,Ue)||""},Pt,e.defaults,n||{});try{B(n,JSON.parse(H(r,"data-splide")))}catch(e){ee(!1,"Invalid JSON")}this._o=Object.create(B({},n))}var t,n,r=e.prototype;return r.mount=function(e,t){var n=this,i=this.state,r=this.Components;return ee(i.is([1,7]),"Already mounted!"),i.set(1),this._C=r,this._T=t||this._T||(this.is(Et)?xt:Lt),this._E=e||this._E,L(O({},Dt,this._E,{Transition:this._T}),(function(e,t){var i=e(n,r,n._o);r[t]=i,i.setup&&i.setup()})),L(r,(function(e){e.mount&&e.mount()})),this.emit(pe),C(this.root,"is-initialized"),i.set(3),this.emit(ge),this},r.sync=function(e){return this.splides.push({splide:e}),e.splides.push({splide:this,isParent:!0}),this.state.is(3)&&(this._C.Sync.remount(),e.Components.Sync.remount()),this},r.go=function(e){return this._C.Controller.go(e),this},r.on=function(e,t){return this.event.on(e,t),this},r.off=function(e){return this.event.off(e),this},r.emit=function(e){var t;return(t=this.event).emit.apply(t,[e].concat(o(arguments,1))),this},r.add=function(e,t){return this._C.Slides.add(e,t),this},r.remove=function(e){return this._C.Slides.remove(e),this},r.is=function(e){return this._o.type===e},r.refresh=function(){return this.emit(we),this},r.destroy=function(e){void 0===e&&(e=!0);var t=this.event,n=this.state;return n.is(1)?xe(this).on(ge,this.destroy.bind(this,e)):(L(this._C,(function(t){t.destroy&&t.destroy(e)}),!0),t.emit(_e),t.destroy(),e&&a(this.splides),n.set(7)),this},t=e,(n=[{key:"options",get:function(){return this._o},set:function(e){this._C.Media.set(e,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Bt=Ot;Bt.defaults={},Bt.STATES={CREATED:1,MOUNTED:2,IDLE:3,MOVING:4,SCROLLING:5,DRAGGING:6,DESTROYED:7};class Nt{constructor(e,t){this.emptyGlowImageTag="empty_glow_image",this.currentlyPlayingAudioElement=null,this.currentlyActiveGlowImages=[],this.currentlyActiveWord=null,this.imagesPath=e,this.audioPath=t,this.currentPage=0,this.splideHandle=new Bt(".splide",{fixedHeight:window.innerHeight-20}).mount(),this.splideHandle.on("move",((e,t,n)=>{this.currentPage!==e&&(this.transitioningToPage=!0,this.stopPageAudio(this.book.pages[t]))})),this.splideHandle.on("moved",((e,t,n)=>{this.currentPage!==e&&(this.currentPage=e,this.transitioningToPage=!1,this.playPageAudio(this.book.pages[e],e))})),this.addPageResizeListener()}stopPageAudio(e){for(let t=0;t<e.visualElements.length;t++){let n=e.visualElements[t];if("audio"===n.type){let e=n,t=document.getElementById(e.domID);t.pause(),t.currentTime=0,clearInterval(this.currentPageAutoPlayerInterval);for(let t=0;t<e.audioTimestamps.timestamps.length;t++)document.getElementById(e.domID+"_word_"+t).classList.remove("cr-clickable-word-active")}}}playPageAudio(e,t){for(let n=0;n<e.visualElements.length;n++){let i=e.visualElements[n];if("audio"===i.type){let e=i,n=document.getElementById(e.domID);n.play(),this.currentlyPlayingAudioElement=n;let r=0,a=0;this.currentPageAutoPlayerInterval=setInterval((()=>{if(void 0!==e.audioTimestamps){let i=n.currentTime;for(let n=0;n<e.audioTimestamps.timestamps.length;n++){if(i>=e.audioTimestamps.timestamps[n].startTimestamp&&i<=e.audioTimestamps.timestamps[n].endTimestamp){a=n;let i=document.getElementById(e.domID+"_word_"+a);this.currentlyActiveWord=i,i.classList.add("cr-clickable-word-active"),i.style.color=e.glowColor,this.enableConnectedGraphicHighlighting(t,a)}if(r<a){let t=document.getElementById(e.domID+"_word_"+r);t.classList.remove("cr-clickable-word-active"),t.style.color="white",r=a}}if(i>=e.audioTimestamps.timestamps[e.audioTimestamps.timestamps.length-1].endTimestamp-.1){let t=document.getElementById(e.domID+"_word_"+a);t.classList.remove("cr-clickable-word-active"),t.style.color="white",this.currentlyPlayingAudioElement=null,clearInterval(this.currentPageAutoPlayerInterval)}}}),60)}}}addPageResizeListener(){window.addEventListener("resize",(()=>{this.splideHandle.options.fixedHeight=window.innerHeight-20,this.splideHandle.refresh()}))}initializeBook(t){this.book=t,this.currentBookType=t.bookType,this.numberOfPages=t.pages.length,this.currentBookType===e.CuriousReader?this.initializeCuriousReaderBook(t):this.currentBookType===e.GDL&&this.initializeGDLBook(t)}initializeCuriousReaderBook(e){this.numberOfPages=e.pages.length;for(let t=0;t<e.pages.length;t++){const n=document.createElement("li"),i=document.createElement("div");n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",i.style.position="relative",i.style.width="80%",i.style.height="80%",n.appendChild(i),n.classList.add("splide__slide");let r=!1;for(let a=0;a<e.pages[t].visualElements.length;a++){let o=e.pages[t].visualElements[a];if("image"==o.type){let e=o,n=t;i.appendChild(this.createImageContainer(n,e,a))}else if("audio"==o.type){r=!0;let n=o,a=null;for(let n=0;n<e.pages[t].visualElements.length;n++){let i=e.pages[t].visualElements[n];if("text"==i.type){a=i;break}}if(a){let e=this.createAudioAndTextContainers(t,n,a);i.appendChild(e[0]),i.appendChild(e[1])}else i.appendChild(this.createAudioContainer(n))}this.splideHandle.add(n)}if(!r)for(let n=0;n<e.pages[t].visualElements.length;n++){let r=e.pages[t].visualElements[n];if("text"==r.type){let e=r;i.appendChild(this.createTextContainer(e))}}}}createTextContainer(e){let t=document.createElement("div");return t.id="cr-text",t.classList.add("cr-text"),t.style.position="absolute",t.style.webkitTextStroke="1px #303030",t.style.color="#FFFFFF",t.style.textShadow="0.1rem 0.15rem 0.1rem #303030",t.style.fontFamily="Quicksand",t.style.fontWeight="800",t.style.fontSize="inherit",t.style.top=e.positionY+"%",t.style.left=e.positionX+"%",t.style.width=e.width+"%",t.style.height=e.height+"%",t.innerHTML=e.textContentAsHTML.replace(/font-size:[^;]+;/g,""),t}createImageContainer(e,t,n){let i=document.createElement("div");if(i.style.position="absolute",i.style.top=t.positionY+"%",i.style.left=t.positionX+"%",i.style.width=t.width+"%",i.style.height=t.height+"%",t.imageSource===this.emptyGlowImageTag)if(i.classList.add("cr-image-empty-glow"),void 0===t.domID||null===t.domID||""===t.domID){const t="img"+e+"_"+n;i.id=t,i.addEventListener("click",(()=>{this.handleStandaloneGlowImageClick(e,t)}))}else i.classList.add(t.domID),i.addEventListener("click",(()=>{this.handleGlowImageClick(e,t.domID.split("_")[1])}));else{i.id=t.domID,i.classList.add("cr-image");let e=document.createElement("img");e.src=this.imagesPath+t.imageSource.replace("images/",""),e.style.width="100%",e.style.height="100%",i.appendChild(e)}return i}createAudioContainer(e){let t=document.createElement("div");t.classList.add("cr-audio"),t.style.position="absolute";let n=document.createElement("audio");if(n.id=e.domID,n.src=this.audioPath+e.audioSrc.replace("audios/",""),n.controls=!1,t.appendChild(n),void 0!==e.audioTimestamps)for(let n=0;n<e.audioTimestamps.timestamps.length;n++){let i=e.audioTimestamps.timestamps[n],r=document.createElement("audio");r.id=i.domID,r.src=this.audioPath+i.audioSrc.replace("audios/",""),r.controls=!1,t.appendChild(r)}return t}createAudioAndTextContainers(e,t,n){let i=Array(),r=document.createElement("div");r.classList.add("cr-audio"),r.style.position="absolute";let a=document.createElement("audio");a.id=t.domID,a.src=this.audioPath+t.audioSrc.replace("audios/",""),a.controls=!1,r.appendChild(a);let o=Array();if(void 0!==t.audioTimestamps)for(let e=0;e<t.audioTimestamps.timestamps.length;e++){let n=t.audioTimestamps.timestamps[e],i=document.createElement("audio");i.id=n.domID,i.src=this.audioPath+n.audioSrc.replace("audios/",""),i.controls=!1,o.push(n.word.trim()),r.appendChild(i)}i.push(r);let s=t.domID,c=document.createElement("div");c.id="cr-text",c.classList.add("cr-text"),c.style.position="absolute",c.style.display="flex",c.style.justifyContent="center",c.style.alignItems="center",c.style.webkitTextStroke="1px #303030",c.style.color="#FFFFFF",c.style.textShadow="0.1rem 0.15rem 0.1rem #303030",c.style.fontFamily="Quicksand",c.style.fontWeight="800",c.style.top=n.positionY+"%",c.style.height=n.height+"%",n.positionX>50.5?c.style.left=n.positionX+"%":n.positionX<15&&n.width<90?(c.style.left=n.positionX+"%",c.style.width=n.width+"%"):c.style.width="100%";let l=document.createElement("p");l.style.textAlign="center",l.style.margin="0px";for(let t=0;t<o.length;t++){let n=document.createElement("div");n.id=s+"_word_"+t,n.classList.add("cr-clickable-word"),n.style.marginLeft="10px",n.style.marginRight="10px",n.innerText=o[t],n.addEventListener("click",(n=>{this.handleInteractiveWordClick(e,t)})),l.appendChild(n)}return c.appendChild(l),i.push(c),i}handleStandaloneGlowImageClick(e,t){if(null!==this.currentlyPlayingAudioElement&&(this.currentlyPlayingAudioElement.pause(),this.currentlyPlayingAudioElement.currentTime=0,clearInterval(this.currentPageAutoPlayerInterval),clearTimeout(this.currentWordPlayingTimeout),clearTimeout(this.currentGlowImageTimeout),this.currentlyActiveGlowImages.length>0))for(let e=0;e<this.currentlyActiveGlowImages.length;e++)this.currentlyActiveGlowImages[e].style.boxShadow="transparent 0px 0px 20px 20px";this.currentlyActiveGlowImages=Array();let n=document.getElementById(t);this.currentlyActiveGlowImages.push(n),n.style.boxShadow="orange 0px 0px 20px 20px",this.currentGlowImageTimeout=setTimeout((()=>{document.getElementById(t).style.boxShadow="transparent 0px 0px 20px 20px"}),600)}handleGlowImageClick(e,t){let n=parseInt(t);this.handleInteractiveWordClick(e,n)}enableConnectedGraphicHighlighting(e,t){this.handleInteractiveWordClick(e,t,!0)}handleInteractiveWordClick(e,t,n=!1){if(null!==this.currentlyPlayingAudioElement&&!n&&(this.currentlyPlayingAudioElement.pause(),this.currentlyPlayingAudioElement.currentTime=0,clearInterval(this.currentPageAutoPlayerInterval),clearTimeout(this.currentWordPlayingTimeout),clearTimeout(this.currentGlowImageTimeout),null!==this.currentlyActiveWord&&(this.currentlyActiveWord.classList.remove("cr-clickable-word-active"),this.currentlyActiveWord.style.color="white"),this.currentlyActiveGlowImages.length>0))for(let e=0;e<this.currentlyActiveGlowImages.length;e++)this.currentlyActiveGlowImages[e].style.boxShadow="transparent 0px 0px 20px 20px";this.currentlyActiveGlowImages=Array();let i=this.book.pages[e];for(let e=0;e<i.visualElements.length;e++){let r=i.visualElements[e];if("audio"===r.type){let e=r,i=document.getElementById(e.audioTimestamps.timestamps[t].domID);if(!n){let n=document.getElementById(e.domID+"_word_"+t);this.currentlyActiveWord=n,n.classList.add("cr-clickable-word-active"),n.style.color=e.glowColor,this.currentWordPlayingTimeout=setTimeout((()=>{n.classList.remove("cr-clickable-word-active"),n.style.color="white"}),600)}let a="img"+e.domID+"_"+t,o=document.getElementsByClassName(a);for(let t=0;t<o.length;t++){let n=o[t];this.currentlyActiveGlowImages.push(n),n.style.boxShadow=e.glowColor+" 0px 0px 20px 20px"}this.currentGlowImageTimeout=setTimeout((()=>{for(let e=0;e<o.length;e++)o[e].style.boxShadow="transparent 0px 0px 20px 20px"}),600),n||(this.currentlyPlayingAudioElement=i,i.play())}}}initializeGDLBook(e){for(let t=0;t<e.pages.length;t++){const n=document.createElement("li");n.classList.add("splide__slide");let i=document.createElement("div");i.classList.add("gdl-flex-container"),i.style.display="flex",i.style.flexDirection="column",i.style.justifyContent="center",i.style.alignItems="center",i.style.height="100%",i.style.width="100%",n.appendChild(i);for(let n=0;n<e.pages[t].visualElements.length;n++){let r=e.pages[t].visualElements[n];if("text"==r.type){let e=r,t=document.createElement("div");t.style.width="60%",t.classList.add("gdl-text"),t.style.webkitTextStroke="1px #303030",t.style.color="#FFFFFF",t.style.textShadow="0.1rem 0.15rem 0.1rem #303030",t.style.fontFamily="Quicksand",t.style.fontWeight="800",t.style.fontSize="1.7em",t.innerHTML=e.textContentAsHTML.replace("2.25em","28px"),i.appendChild(t)}else if("image"==r.type){let e=r,t=document.createElement("div");t.classList.add("gdl-image");let n=document.createElement("img");n.src=this.imagesPath+e.imageSource.replace("images/",""),n.style.width="100%",n.style.height="100%",t.appendChild(n),i.appendChild(t)}}this.splideHandle.add(n)}}goToNextPage(){this.transitioningToPage||(this.currentPage<this.numberOfPages&&this.currentPage++,this.transitionToPage(this.currentPage))}goToPreviousPage(){this.transitioningToPage||(this.currentPage>0&&this.currentPage--,this.transitionToPage(this.currentPage))}transitionToPage(e){this.transitioningToPage=!0}}try{self["workbox:window:6.5.3"]&&_()}catch(Mt){}function Mt(e,t){return new Promise((function(n){var i=new MessageChannel;i.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[i.port2])}))}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function jt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.3"]&&_()}catch(Mt){}var Rt=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function zt(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var $t=function(e,t){this.type=e,Object.assign(this,t)};function Ht(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Wt(){}var Gt={type:"SKIP_WAITING"};function Ut(e,t){if(!t)return e&&e.then?e.then(Wt):Promise.resolve()}var Vt=function(e){var t,n;function i(t,n){var i,r;return void 0===n&&(n={}),(i=e.call(this)||this).nn={},i.tn=0,i.rn=new Rt,i.en=new Rt,i.on=new Rt,i.un=0,i.an=new Set,i.cn=function(){var e=i.fn,t=e.installing;i.tn>0||!zt(t.scriptURL,i.sn.toString())||performance.now()>i.un+6e4?(i.vn=t,e.removeEventListener("updatefound",i.cn)):(i.hn=t,i.an.add(t),i.rn.resolve(t)),++i.tn,t.addEventListener("statechange",i.ln)},i.ln=function(e){var t=i.fn,n=e.target,r=n.state,a=n===i.vn,o={sw:n,isExternal:a,originalEvent:e};!a&&i.mn&&(o.isUpdate=!0),i.dispatchEvent(new $t(r,o)),"installed"===r?i.wn=self.setTimeout((function(){"installed"===r&&t.waiting===n&&i.dispatchEvent(new $t("waiting",o))}),200):"activating"===r&&(clearTimeout(i.wn),a||i.en.resolve(n))},i.dn=function(e){var t=i.hn,n=t!==navigator.serviceWorker.controller;i.dispatchEvent(new $t("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:i.mn})),n||i.on.resolve(t)},i.gn=(r=function(e){var t=e.data,n=e.ports,r=e.source;return Ht(i.getSW(),(function(){i.an.has(r)&&i.dispatchEvent(new $t("message",{data:t,originalEvent:e,ports:n,sw:r}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}),i.sn=t,i.nn=n,navigator.serviceWorker.addEventListener("message",i.gn),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a=i.prototype;return a.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var i=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return Ut(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return i.mn=Boolean(navigator.serviceWorker.controller),i.yn=i.pn(),Ht(i.bn(),(function(e){i.fn=e,i.yn&&(i.hn=i.yn,i.en.resolve(i.yn),i.on.resolve(i.yn),i.yn.addEventListener("statechange",i.ln,{once:!0}));var t=i.fn.waiting;return t&&zt(t.scriptURL,i.sn.toString())&&(i.hn=t,Promise.resolve().then((function(){i.dispatchEvent(new $t("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.dn),i.fn}))}))}catch(e){return Promise.reject(e)}},a.update=function(){try{return this.fn?Ut(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},a.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},a.messageSW=function(e){try{return Ht(this.getSW(),(function(t){return Mt(t,e)}))}catch(e){return Promise.reject(e)}},a.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Mt(this.fn.waiting,Gt)},a.pn=function(){var e=navigator.serviceWorker.controller;return e&&zt(e.scriptURL,this.sn.toString())?e:void 0},a.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return Ht(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,r),i}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=jt(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());const qt=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Xt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let d=(15&o)<<2|c>>6,h=63&c;s||(h=64,a||(d=64)),i.push(n[l],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&a)}else if(r>239&&r<365){const a=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(a>>10)),t[i++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&a)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const s=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==a||null==o||null==s)throw new Jt;const c=r<<2|a>>4;if(i.push(c),64!==o){const e=a<<4&240|o>>2;if(i.push(e),64!==s){const e=o<<6&192|s;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Jt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kt=function(e){return function(e){const t=qt(e);return Xt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Yt=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return Xt.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Qt=()=>{var e;return null===(e=Yt())||void 0===e?void 0:e.config};class Zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function en(){try{return"object"==typeof indexedDB}catch(e){return!1}}function tn(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class nn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}}class rn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],a=r?function(e,t){return e.replace(an,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new nn(i,o,n)}}const an=/\{\$([^}]+)}/g;function on(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],a=t[r];if(sn(n)&&sn(a)){if(!on(n,a))return!1}else if(n!==a)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function sn(e){return null!==e&&"object"==typeof e}function cn(e,t=1e3,n=2){const i=t*Math.pow(n,e),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function ln(e){return e&&e._delegate?e._delegate:e}class un{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const dn="[DEFAULT]";class hn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Zt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:dn})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===dn?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:dn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const pn=[];var gn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(gn||(gn={}));const mn={debug:gn.DEBUG,verbose:gn.VERBOSE,info:gn.INFO,warn:gn.WARN,error:gn.ERROR,silent:gn.SILENT},vn=gn.INFO,yn={[gn.DEBUG]:"log",[gn.VERBOSE]:"log",[gn.INFO]:"info",[gn.WARN]:"warn",[gn.ERROR]:"error"},wn=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=yn[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class bn{constructor(e){this.name=e,this._logLevel=vn,this._logHandler=wn,this._userLogHandler=null,pn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?mn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gn.DEBUG,...e),this._logHandler(this,gn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gn.VERBOSE,...e),this._logHandler(this,gn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gn.INFO,...e),this._logHandler(this,gn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gn.WARN,...e),this._logHandler(this,gn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gn.ERROR,...e),this._logHandler(this,gn.ERROR,...e)}}let En,In;const Sn=new WeakMap,Cn=new WeakMap,_n=new WeakMap,Tn=new WeakMap,An=new WeakMap;let kn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Cn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_n.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Dn(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(In||(In=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(xn(this),e),Pn(Sn.get(this))}:function(...e){return Pn(t.apply(xn(this),e))}:function(e,...n){const i=t.call(xn(this),e,...n);return _n.set(i,e.sort?e.sort():[e]),Pn(i)}:(e instanceof IDBTransaction&&function(e){if(Cn.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{t(),i()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)}));Cn.set(e,t)}(e),n=e,(En||(En=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,kn):e);var t,n}function Pn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{t(Pn(e.result)),i()},a=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&Sn.set(t,e)})).catch((()=>{})),An.set(t,e),t}(e);if(Tn.has(e))return Tn.get(e);const t=Dn(e);return t!==e&&(Tn.set(e,t),An.set(t,e)),t}const xn=e=>An.get(e);function Ln(e,t,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const o=indexedDB.open(e,t),s=Pn(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(Pn(o.result),e.oldVersion,e.newVersion,Pn(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener("close",(()=>a())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}const On=["get","getKey","getAll","getAllKeys","count"],Bn=["put","add","delete","clear"],Nn=new Map;function Mn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Nn.get(t))return Nn.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Bn.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!On.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,r?"readwrite":"readonly");let o=a.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&a.done]))[0]};return Nn.set(t,a),a}var Fn;Fn=kn,kn={...Fn,get:(e,t,n)=>Mn(e,t)||Fn.get(e,t,n),has:(e,t)=>!!Mn(e,t)||Fn.has(e,t)};class jn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Rn="@firebase/app",zn="0.9.27",$n=new bn("@firebase/app"),Hn="[DEFAULT]",Wn={[Rn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gn=new Map,Un=new Map;function Vn(e,t){try{e.container.addComponent(t)}catch(n){$n.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function qn(e){const t=e.name;if(Un.has(t))return $n.debug(`There were multiple attempts to register component ${t}.`),!1;Un.set(t,e);for(const t of Gn.values())Vn(t,e);return!0}function Xn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Jn=new rn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new un("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}function Yn(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:Hn,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw Jn.create("bad-app-name",{appName:String(r)});if(n||(n=Qt()),!n)throw Jn.create("no-options");const a=Gn.get(r);if(a){if(on(n,a.options)&&on(i,a.config))return a;throw Jn.create("duplicate-app",{appName:r})}const o=new fn(r);for(const e of Un.values())o.addComponent(e);const s=new Kn(n,i,o);return Gn.set(r,s),s}function Qn(e,t,n){var i;let r=null!==(i=Wn[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const a=r.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=[`Unable to register library "${r}" with version "${t}":`];return a&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void $n.warn(e.join(" "))}qn(new un(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const Zn="firebase-heartbeat-store";let ei=null;function ti(){return ei||(ei=Ln("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Zn)}catch(e){console.warn(e)}}}).catch((e=>{throw Jn.create("idb-open",{originalErrorMessage:e.message})}))),ei}async function ni(e,t){try{const n=(await ti()).transaction(Zn,"readwrite"),i=n.objectStore(Zn);await i.put(t,ii(e)),await n.done}catch(e){if(e instanceof nn)$n.warn(e.message);else{const t=Jn.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});$n.warn(t.message)}}}function ii(e){return`${e.name}!${e.options.appId}`}class ri{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oi(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ai();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ai(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),si(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),si(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=Kt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ai(){return(new Date).toISOString().substring(0,10)}class oi{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!en()&&tn().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ti()).transaction(Zn),n=await t.objectStore(Zn).get(ii(e));return await t.done,n}catch(e){if(e instanceof nn)$n.warn(e.message);else{const t=Jn.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});$n.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ni(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ni(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function si(e){return Kt(JSON.stringify({version:2,heartbeats:e})).length}qn(new un("platform-logger",(e=>new jn(e)),"PRIVATE")),qn(new un("heartbeat",(e=>new ri(e)),"PRIVATE")),Qn(Rn,zn,""),Qn(Rn,zn,"esm2017"),Qn("fire-js",""),Qn("firebase","10.8.0","app");const ci="@firebase/installations",li="0.6.5",ui="w:0.6.5",di=new rn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function hi(e){return e instanceof nn&&e.code.includes("request-failed")}function fi({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function pi(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function gi(e,t){const n=(await t.json()).error;return di.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function mi({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function vi(e){const t=await e();return t.status>=500&&t.status<600?e():t}function yi(e){return new Promise((t=>{setTimeout(t,e)}))}const wi=/^[cdef][\w-]{21}$/;function bi(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return wi.test(t)?t:""}catch(e){return""}}function Ei(e){return`${e.appName}!${e.appId}`}const Ii=new Map;function Si(e,t){const n=Ei(e);Ci(n,t),function(e,t){const n=(!_i&&"BroadcastChannel"in self&&(_i=new BroadcastChannel("[Firebase] FID Change"),_i.onmessage=e=>{Ci(e.data.key,e.data.fid)}),_i);n&&n.postMessage({key:e,fid:t}),0===Ii.size&&_i&&(_i.close(),_i=null)}(n,t)}function Ci(e,t){const n=Ii.get(e);if(n)for(const e of n)e(t)}let _i=null;const Ti="firebase-installations-store";let Ai=null;function ki(){return Ai||(Ai=Ln("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Ti)}})),Ai}async function Di(e,t){const n=Ei(e),i=(await ki()).transaction(Ti,"readwrite"),r=i.objectStore(Ti),a=await r.get(n);return await r.put(t,n),await i.done,a&&a.fid===t.fid||Si(e,t.fid),t}async function Pi(e){const t=Ei(e),n=(await ki()).transaction(Ti,"readwrite");await n.objectStore(Ti).delete(t),await n.done}async function xi(e,t){const n=Ei(e),i=(await ki()).transaction(Ti,"readwrite"),r=i.objectStore(Ti),a=await r.get(n),o=t(a);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||a&&a.fid===o.fid||Si(e,o.fid),o}async function Li(e){let t;const n=await xi(e.appConfig,(n=>{const i=function(e){return Ni(e||{fid:bi(),registrationStatus:0})}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(di.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=fi(e),r=mi(e),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:ui},s={method:"POST",headers:r,body:JSON.stringify(o)},c=await vi((()=>fetch(i,s)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:pi(e.authToken)}}throw await gi("Create Installation",c)}(e,t);return Di(e.appConfig,n)}catch(n){throw hi(n)&&409===n.customData.serverCode?await Pi(e.appConfig):await Di(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Oi(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Oi(e){let t=await Bi(e.appConfig);for(;1===t.registrationStatus;)await yi(100),t=await Bi(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Li(e);return n||t}return t}function Bi(e){return xi(e,(e=>{if(!e)throw di.create("installation-not-found");return Ni(e)}))}function Ni(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Mi({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${fi(e)}/${t}/authTokens:generate`}(e,n),r=function(e,{refreshToken:t}){const n=mi(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}(e,n),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const o={installation:{sdkVersion:ui,appId:e.appId}},s={method:"POST",headers:r,body:JSON.stringify(o)},c=await vi((()=>fetch(i,s)));if(c.ok)return pi(await c.json());throw await gi("Generate Auth Token",c)}async function Fi(e,t=!1){let n;const i=await xi(e.appConfig,(i=>{if(!Ri(i))throw di.create("not-registered");const r=i.authToken;if(!t&&(2===(a=r).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(a)))return i;var a;if(1===r.requestStatus)return n=async function(e,t){let n=await ji(e.appConfig);for(;1===n.authToken.requestStatus;)await yi(100),n=await ji(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Fi(e,t):i}(e,t),i;{if(!navigator.onLine)throw di.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Mi(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await Di(e.appConfig,i),n}catch(n){if(!hi(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Di(e.appConfig,n)}else await Pi(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function ji(e){return xi(e,(e=>{if(!Ri(e))throw di.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function Ri(e){return void 0!==e&&2===e.registrationStatus}function zi(e){return di.create("missing-app-config-values",{valueName:e})}const $i="installations";qn(new un($i,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw zi("App Configuration");if(!e.name)throw zi("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw zi(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Xn(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),qn(new un("installations-internal",(e=>{const t=Xn(e.getProvider("app").getImmediate(),$i).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Li(t);return i?i.catch(console.error):Fi(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await Li(e);t&&await t}(n),(await Fi(n,t)).token}(t,e)}}),"PRIVATE")),Qn(ci,li),Qn(ci,li,"esm2017");const Hi="analytics",Wi="https://www.googletagmanager.com/gtag/js",Gi=new bn("@firebase/analytics"),Ui=new rn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Vi(e){if(!e.startsWith(Wi)){const t=Ui.create("invalid-gtag-resource",{gtagURL:e});return Gi.warn(t.message),""}return e}function qi(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Xi=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Ji(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ki(e,t=Xi,n){const{appId:i,apiKey:r,measurementId:a}=e.options;if(!i)throw Ui.create("no-app-id");if(!r){if(a)return{measurementId:a,appId:i};throw Ui.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new Qi;return setTimeout((async()=>{s.abort()}),void 0!==n?n:6e4),Yi({appId:i,apiKey:r,measurementId:a},o,s,t)}async function Yi(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=Xi){var a;const{appId:o,measurementId:s}=e;try{await function(e,t){return new Promise(((n,i)=>{const r=Math.max(t-Date.now(),0),a=setTimeout(n,r);e.addEventListener((()=>{clearTimeout(a),i(Ui.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(s)return Gi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:s};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:Ji(i)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(a,r);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Ui.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return r.deleteThrottleMetadata(o),t}catch(t){const c=t;if(!function(e){if(!(e instanceof nn&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(r.deleteThrottleMetadata(o),s)return Gi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:s};throw t}const l=503===Number(null===(a=null==c?void 0:c.customData)||void 0===a?void 0:a.httpStatus)?cn(n,r.intervalMillis,30):cn(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(o,u),Gi.debug(`Calling attemptFetch again in ${l} millis`),Yi(e,u,i,r)}}class Qi{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Zi,er;async function tr(e,t,n,i,r,a,o){var s;const c=Ki(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Gi.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Gi.error(e))),t.push(c);const l=async function(){if(!en())return Gi.warn(Ui.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await tn()}catch(e){return Gi.warn(Ui.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Wi)&&n.src.includes(e))return n;return null})(a)||function(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:Vi}),i=document.createElement("script"),r=`${Wi}?l=${e}&id=${t}`;i.src=n?null==n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(a,u.measurementId),er&&(r("consent","default",er),er=void 0),r("js",new Date);const h=null!==(s=null==o?void 0:o.config)&&void 0!==s?s:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),r("config",u.measurementId,h),Zi&&(r("set",Zi),Zi=void 0),u.measurementId}class nr{constructor(e){this.app=e}_delete(){return delete ir[this.app.options.appId],Promise.resolve()}}let ir={},rr=[];const ar={};let or,sr,cr="dataLayer",lr=!1;function ur(e,t,n){!function(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Ui.create("invalid-analytics-context",{errorInfo:t});Gi.warn(n.message)}}();const i=e.options.appId;if(!i)throw Ui.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ui.create("no-api-key");Gi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ir[i])throw Ui.create("already-exists",{id:i});if(!lr){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let a=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(a=window.gtag),window.gtag=function(e,t,n,i){return async function(r,...a){try{if("event"===r){const[i,r]=a;await async function(e,t,n,i,r){try{let a=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=await qi(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),r=e&&t[e.appId];if(!r){a=[];break}a.push(r)}}0===a.length&&(a=Object.values(t)),await Promise.all(a),e("event",i,r||{})}catch(e){Gi.error(e)}}(e,t,n,i,r)}else if("config"===r){const[r,o]=a;await async function(e,t,n,i,r,a){const o=i[r];try{if(o)await t[o];else{const e=(await qi(n)).find((e=>e.measurementId===r));e&&await t[e.appId]}}catch(e){Gi.error(e)}e("config",r,a)}(e,t,n,i,r,o)}else if("consent"===r){const[t]=a;e("consent","update",t)}else if("get"===r){const[t,n,i]=a;e("get",t,n,i)}else if("set"===r){const[t]=a;e("set",t)}else e(r,...a)}catch(e){Gi.error(e)}}}(a,e,t,n),{gtagCore:a,wrappedGtag:window.gtag}}(ir,rr,ar);sr=e,or=t,lr=!0}return ir[i]=tr(e,rr,ar,t,or,cr,n),new nr(e)}function dr(e,t,n,i){e=ln(e),async function(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(sr,ir[e.app.options.appId],t,n,i).catch((e=>Gi.error(e)))}const hr="@firebase/analytics",fr="0.10.1";qn(new un(Hi,((e,{options:t})=>ur(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),qn(new un("analytics-internal",(function(e){try{const t=e.getProvider(Hi).getImmediate();return{logEvent:(e,n,i)=>dr(t,e,n,i)}}catch(e){throw Ui.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Qn(hr,fr),Qn(hr,fr,"esm2017");const pr={apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:3bdd502b0e7ce6789de10c",measurementId:"G-XNE7Y2439V"};class gr{constructor(){try{this.firebaseApp=Yn(pr),this.firebaseAnalytics=function(e=function(e="[DEFAULT]"){const t=Gn.get(e);if(!t&&e===Hn&&Qt())return Yn();if(!t)throw Jn.create("no-app",{appName:e});return t}()){const t=Xn(e=ln(e),Hi);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=Xn(e,Hi);if(n.isInitialized()){const e=n.getImmediate();if(on(t,n.getOptions()))return e;throw Ui.create("already-initialized")}return n.initialize({options:t})}(e)}(this.firebaseApp)}catch(e){console.error("Error while initializing Firebase:",e)}}static getInstance(){return gr.instance||(gr.instance=new gr),gr.instance}logEvents(e,t){try{console.log(`Sending custom event ${e} with data:`,t),dr(this.firebaseAnalytics,e,t)}catch(e){console.error("Error while logging custom event:",e)}}}const mr=new BroadcastChannel("my-channel");let vr=document.getElementById("loadingScreen");function yr(e){"Loading"==e.data.msg&&function(e,t){let n=document.getElementById("progressBar");t<100?n.style.width=t+"%":t>=100&&(vr.style.display="none",function(e){if(window.Android){let t=null!==localStorage.getItem(e);window.Android.cachedStatus(t)}}(e.data.data.bookName),localStorage.setItem(e.data.data.bookName,"true"))}(e,parseInt(e.data.data.progress)),"UpdateFound"==e.data.msg&&(console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>.,update Found"),function(){let e="Update Found.\nPlease accept the update by pressing Ok.";1==confirm(e)?window.location.reload():e="Update will happen on the next launch."}())}mr.addEventListener("message",yr);const wr=window.location.search;let br=new URLSearchParams(wr).get("book");null==br&&(br="LetsFlyLevel2En"),console.log("Book Name: "+br);let Er=new class{constructor(e,t,i,r){console.log("Curious Reader App v0.3.0 initializing!"),this.bookName=e,this.contentFilePath=t,this.imagesPath=i,this.audioPath=r,this.firebaseAnalyticsManager=gr.getInstance(),this.contentParser=new n(t),this.playBackEngine=new Nt(i,r),this.broadcastChannel=new BroadcastChannel("cr-message-channel")}async initialize(){try{const e=await this.contentParser.parseBook();e.bookName=this.bookName,console.log("App initialized with book:",e),this.enforceLandscapeMode(),await this.registerServiceWorker(e),this.playBackEngine.initializeBook(e),console.log("Initialization completed successfully!")}catch(e){console.error("Initialization error:",e)}}enforceLandscapeMode(){window.Android&&"function"==typeof window.Android.setContainerAppOrientation&&window.Android.setContainerAppOrientation("landscape")}async registerServiceWorker(e){if("serviceWorker"in navigator)try{let t=new Vt("/sw.js",{});await t.register(),await navigator.serviceWorker.ready,null==localStorage.getItem(e.bookName)?(vr.style.display="flex",this.broadcastChannel.postMessage({command:"Cache",data:{lang:this.lang,bookData:e,contentFile:this.contentFilePath}})):vr.style.display="none",this.broadcastChannel.onmessage=t=>{console.log("CRapp: Message Received!"),console.log(t.data.command),"Activated"==t.data.command&&this.broadcastChannel.postMessage({command:"Cache",data:{lang:this.lang,bookData:e,contentFile:this.contentFilePath}})},navigator.serviceWorker.addEventListener("message",yr)}catch(e){console.log("Error Registering Service Worker",e)}}}(br,`/BookContent/${br}/content/content.json`,`/BookContent/${br}/content/images/`,`/BookContent/${br}/content/audios/`);Er.initialize()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0hvaEIsVUFBVUMsY0FBY3VsQixNQUNhLE1BQXZDdEIsYUFBYUMsUUFBUW45QyxFQUFLQyxXQUMxQjA4QyxHQUFlM3lDLE1BQU1HLFFBQVUsT0FDL0JwTCxLQUFLbXlDLGlCQUFpQjVhLFlBQVksQ0FDOUIrakIsUUFBUyxRQUNUOXFDLEtBQU0sQ0FDRmt2QyxLQUFNMS9DLEtBQUswL0MsS0FDWEMsU0FBVTErQyxFQUNWMitDLFlBQWE1L0MsS0FBS00sb0JBSTFCczlDLEdBQWUzeUMsTUFBTUcsUUFBVSxPQUduQ3BMLEtBQUtteUMsaUJBQWlCN2EsVUFBYTluQixJQUMvQnpPLFFBQVFDLElBQUksNEJBQ1pELFFBQVFDLElBQUl3TyxFQUFNZ0IsS0FBSzhxQyxTQUNHLGFBQXRCOXJDLEVBQU1nQixLQUFLOHFDLFNBQ1h0N0MsS0FBS215QyxpQkFBaUI1YSxZQUFZLENBQzlCK2pCLFFBQVMsUUFDVDlxQyxLQUFNLENBQ0ZrdkMsS0FBTTEvQyxLQUFLMC9DLEtBQ1hDLFNBQVUxK0MsRUFDVjIrQyxZQUFhNS9DLEtBQUtNLG9CQUtsQzI1QixVQUFVQyxjQUFjcnFCLGlCQUFpQixVQUFXZ3VDLElBQ3RELE1BQU9yOEMsR0FDTFQsUUFBUUMsSUFBSSxtQ0FBb0NRLEdBSTVELEdBNERtQk4sR0FBVSxnQkFBZ0JBLDBCQUM3QyxnQkFBZ0JBLHFCQUNoQixnQkFBZ0JBLHNCQUVwQmdxQyxHQUFJMUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vTW9kZWxzL0Jvb2sudHMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vLy4vUGFyc2VyL0NvbnRlbnRQYXJzZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BzcGxpZGVqcy9zcGxpZGUvZGlzdC9qcy9zcGxpZGUuZXNtLmpzIiwid2VicGFjazovLy8uL1BsYXlCYWNrRW5naW5lL1BsYXlCYWNrRW5naW5lLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93b3JrYm94LXdpbmRvdy9idWlsZC93b3JrYm94LXdpbmRvdy5wcm9kLmVzNS5tanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC93cmFwLWlkYi12YWx1ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9pbnN0YWxsYXRpb25zL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hbmFseXRpY3MvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly8vLi9BbmFseXRpY3MvRmlyZWJhc2UvY29uZmlnLnRzIiwid2VicGFjazovLy8uL0FuYWx5dGljcy9GaXJlYmFzZS9GaXJlYmFzZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vQXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBQYWdlIHR5cGUgdGhhdCBkZVxyXG5cclxuaW1wb3J0IHsgUGFnZSB9IGZyb20gXCIuL1BhZ2VcIjtcclxuXHJcbmV4cG9ydCBlbnVtIEJvb2tUeXBlIHtcclxuICAgIEN1cmlvdXNSZWFkZXIgPSBcIkN1cmlvdXNSZWFkZXJcIixcclxuICAgIEdETCA9IFwiR0RMXCIsXHJcbiAgICBVbmtub3duID0gXCJVbmtub3duXCIsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEJvb2sgPSB7XHJcbiAgICBib29rTmFtZTogc3RyaW5nO1xyXG4gICAgcGFnZXM6IFBhZ2VbXTtcclxuICAgIGJvb2tUeXBlOiBCb29rVHlwZTtcclxufSIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiaW1wb3J0IHtcclxuICAgIEJvb2ssXHJcbiAgICBCb29rVHlwZSxcclxuICAgIFBhZ2UsXHJcbiAgICBUZXh0RWxlbWVudCxcclxuICAgIEltYWdlRWxlbWVudCxcclxuICAgIEF1ZGlvRWxlbWVudCxcclxuICAgIEF1ZGlvVGltZXN0YW1wcyxcclxuICAgIFdvcmRUaW1lc3RhbXBFbGVtZW50LFxyXG59IGZyb20gXCIuLi9Nb2RlbHMvTW9kZWxzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGVudFBhcnNlciB7XHJcbiAgICBpbWFnZXNQYXRoOiBzdHJpbmc7XHJcbiAgICBhdWRpb1BhdGg6IHN0cmluZztcclxuICAgIGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nO1xyXG5cclxuICAgIGNvbnRlbnRKU09OOiBhbnk7XHJcblxyXG4gICAgZW1wdHlHbG93SW1hZ2VUYWc6IHN0cmluZyA9IFwiZW1wdHlfZ2xvd19pbWFnZVwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RmlsZVBhdGggPSBjb250ZW50RmlsZVBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcGFyc2VCb29rKCk6IFByb21pc2U8Qm9vaz4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VDb250ZW50SlNPTkZpbGUoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGNvbnRlbnRKU09OKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50SlNPTiA9IGNvbnRlbnRKU09OO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29udGVudCBKU09OIGZpbGUgcGFyc2VkIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNvbnRlbnRKU09OKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJvb2s6IEJvb2sgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tOYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tUeXBlOiB0aGlzLmRldGVybWluZUJvb2tUeXBlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYm9vay5wYWdlcyA9IHRoaXMucGFyc2VQYWdlcyhib29rKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShib29rKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRldGVybWluZUJvb2tUeXBlKCk6IEJvb2tUeXBlIHtcclxuICAgICAgICBpZiAodGhpcy5jb250ZW50SlNPTltcInByZXNlbnRhdGlvblwiXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCb29rVHlwZS5DdXJpb3VzUmVhZGVyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb250ZW50SlNPTltcImNoYXB0ZXJzXCJdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvb2tUeXBlLkdETDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9va1R5cGUuVW5rbm93bjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VQYWdlcyhib29rOiBCb29rKTogUGFnZVtdIHtcclxuICAgICAgICBsZXQgcGFnZXM6IFBhZ2VbXSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoYm9vay5ib29rVHlwZSA9PT0gQm9va1R5cGUuQ3VyaW91c1JlYWRlcikge1xyXG4gICAgICAgICAgICBsZXQgcGFnZXNKU09OID0gdGhpcy5jb250ZW50SlNPTltcInByZXNlbnRhdGlvblwiXVtcInNsaWRlc1wiXTtcclxuICAgICAgICAgICAgbGV0IGdsb2JhbEZpbGxDb2xvciA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRKU09OW1wicHJlc2VudGF0aW9uXCJdW1wiZ2xvYmFsQmFja2dyb3VuZFNlbGVjdG9yXCJdW1xyXG4gICAgICAgICAgICAgICAgXCJmaWxsR2xvYmFsQmFja2dyb3VuZFwiXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VzSlNPTi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhZ2VKU09OID0gcGFnZXNKU09OW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhZ2U6IFBhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZ2xvYmFsRmlsbENvbG9yLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHBhZ2UudmlzdWFsRWxlbWVudHMgPSB0aGlzLnBhcnNlUGFnZUNSKHBhZ2VKU09OKTtcclxuICAgICAgICAgICAgICAgIHBhZ2VzLnB1c2gocGFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGJvb2suYm9va1R5cGUgPT09IEJvb2tUeXBlLkdETCkge1xyXG4gICAgICAgICAgICBsZXQgcGFnZXNKU09OID0gdGhpcy5jb250ZW50SlNPTltcImNoYXB0ZXJzXCJdO1xyXG4gICAgICAgICAgICBsZXQgZ2xvYmFsRmlsbENvbG9yID0gXCIjRkNGQ0YyXCI7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZXNKU09OLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUpTT04gPSBwYWdlc0pTT05baV07XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZTogUGFnZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBnbG9iYWxGaWxsQ29sb3IsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcGFnZS52aXN1YWxFbGVtZW50cyA9IHRoaXMucGFyc2VQYWdlR0RMKHBhZ2VKU09OKTtcclxuICAgICAgICAgICAgICAgIHBhZ2VzLnB1c2gocGFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVua25vd24gYm9vayB0eXBlIVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwYWdlcztcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVBhZ2VDUihwYWdlSlNPTjogYW55KTogYW55W10ge1xyXG4gICAgICAgIGxldCB2aXN1YWxFbGVtZW50czogYW55W10gPSBbXTtcclxuICAgICAgICBsZXQgZWxlbWVudHNKU09OID0gcGFnZUpTT05bXCJlbGVtZW50c1wiXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzSlNPTi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbGlicmFyeVN0cmluZzogc3RyaW5nID0gZWxlbWVudHNKU09OW2ldW1wiYWN0aW9uXCJdW1wibGlicmFyeVwiXTtcclxuICAgICAgICAgICAgaWYgKGxpYnJhcnlTdHJpbmcuaW5jbHVkZXMoXCJBZHZhbmNlZFRleHRcIikpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB0aGlzLnBhcnNlVGV4dEVsZW1lbnRDUihlbGVtZW50c0pTT05baV0pO1xyXG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudHMucHVzaCh0ZXh0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlicmFyeVN0cmluZy5pbmNsdWRlcyhcIkltYWdlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW1hZ2VFbGVtZW50OiBJbWFnZUVsZW1lbnQgPSB0aGlzLnBhcnNlSW1hZ2VFbGVtZW50Q1IoXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNKU09OW2ldXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdmlzdWFsRWxlbWVudHMucHVzaChpbWFnZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpYnJhcnlTdHJpbmcuaW5jbHVkZXMoXCJBdWRpb1wiKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGF1ZGlvRWxlbWVudDogQXVkaW9FbGVtZW50ID0gdGhpcy5wYXJzZUF1ZGlvRWxlbWVudENSKFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzSlNPTltpXVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnRzLnB1c2goYXVkaW9FbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZpc3VhbEVsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlUGFnZUdETChwYWdlSlNPTjogYW55KTogYW55W10ge1xyXG4gICAgICAgIGxldCB2aXN1YWxFbGVtZW50czogYW55W10gPSBbXTtcclxuICAgICAgICBsZXQgZWxlbWVudHNKU09OQXJyYXkgPSBwYWdlSlNPTltcInBhcmFtc1wiXVtcImNvbnRlbnRcIl07XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHNKU09OQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGxpYnJhcnlTdHJpbmc6IHN0cmluZyA9IGVsZW1lbnRzSlNPTkFycmF5W2ldW1wiY29udGVudFwiXVtcImxpYnJhcnlcIl07XHJcbiAgICAgICAgICAgIGlmIChsaWJyYXJ5U3RyaW5nLmluY2x1ZGVzKFwiQWR2YW5jZWRUZXh0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0gdGhpcy5wYXJzZVRleHRFbGVtZW50R0RMKFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzSlNPTkFycmF5W2ldW1wiY29udGVudFwiXVtcInBhcmFtc1wiXVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHZpc3VhbEVsZW1lbnRzLnB1c2godGV4dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpYnJhcnlTdHJpbmcuaW5jbHVkZXMoXCJJbWFnZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50ID0gdGhpcy5wYXJzZUltYWdlRWxlbWVudEdETChcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c0pTT05BcnJheVtpXVtcImNvbnRlbnRcIl1bXCJwYXJhbXNcIl1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB2aXN1YWxFbGVtZW50cy5wdXNoKGltYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2aXN1YWxFbGVtZW50cztcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVRleHRFbGVtZW50Q1IoZWxlbWVudEpTT046IGFueSk6IFRleHRFbGVtZW50IHtcclxuICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICAgICAgcG9zaXRpb25YOiBlbGVtZW50SlNPTltcInhcIl0sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWTogZWxlbWVudEpTT05bXCJ5XCJdLFxyXG4gICAgICAgICAgICB3aWR0aDogZWxlbWVudEpTT05bXCJ3aWR0aFwiXSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50SlNPTltcImhlaWdodFwiXSxcclxuICAgICAgICAgICAgdGV4dENvbnRlbnRBc0hUTUw6IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wicGFyYW1zXCJdW1widGV4dFwiXSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGV4dEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VUZXh0RWxlbWVudEdETChlbGVtZW50SlNPTjogYW55KTogVGV4dEVsZW1lbnQge1xyXG4gICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IE5hTixcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBOYU4sXHJcbiAgICAgICAgICAgIHdpZHRoOiBOYU4sXHJcbiAgICAgICAgICAgIGhlaWdodDogTmFOLFxyXG4gICAgICAgICAgICB0ZXh0Q29udGVudEFzSFRNTDogZWxlbWVudEpTT05bXCJ0ZXh0XCJdLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRleHRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlSW1hZ2VFbGVtZW50Q1IoZWxlbWVudEpTT046IGFueSk6IEltYWdlRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IHBhdGg6IHN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgaWYgKGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wicGFyYW1zXCJdW1wiZmlsZVwiXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHBhdGggPSB0aGlzLmVtcHR5R2xvd0ltYWdlVGFnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBhdGggPSBlbGVtZW50SlNPTltcImFjdGlvblwiXVtcInBhcmFtc1wiXVtcImZpbGVcIl1bXCJwYXRoXCJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW1hZ2VFbGVtZW50OiBJbWFnZUVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIGRvbUlEOiBwYXRoID09PSB0aGlzLmVtcHR5R2xvd0ltYWdlVGFnXHJcbiAgICAgICAgICAgICAgICAgICAgPyBlbGVtZW50SlNPTltcImlkXCJdXHJcbiAgICAgICAgICAgICAgICAgICAgOiBlbGVtZW50SlNPTltcImFjdGlvblwiXVtcInN1YkNvbnRlbnRJZFwiXSxcclxuICAgICAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IGVsZW1lbnRKU09OW1wieFwiXSxcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBlbGVtZW50SlNPTltcInlcIl0sXHJcbiAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50SlNPTltcIndpZHRoXCJdLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnRKU09OW1wiaGVpZ2h0XCJdLFxyXG4gICAgICAgICAgICBpbWFnZVNvdXJjZTogcGF0aCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gaW1hZ2VFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlSW1hZ2VFbGVtZW50R0RMKGVsZW1lbnRKU09OOiBhbnkpOiBJbWFnZUVsZW1lbnQge1xyXG4gICAgICAgIGxldCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCA9IHtcclxuICAgICAgICAgICAgZG9tSUQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VcIixcclxuICAgICAgICAgICAgcG9zaXRpb25YOiBOYU4sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWTogTmFOLFxyXG4gICAgICAgICAgICB3aWR0aDogZWxlbWVudEpTT05bXCJ3aWR0aFwiXSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50SlNPTltcImhlaWdodFwiXSxcclxuICAgICAgICAgICAgaW1hZ2VTb3VyY2U6IGVsZW1lbnRKU09OW1wiZmlsZVwiXVtcInBhdGhcIl0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gaW1hZ2VFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlQXVkaW9FbGVtZW50Q1IoZWxlbWVudEpTT046IGFueSk6IEF1ZGlvRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGF1ZGlvVGltZXN0YW1wczogQXVkaW9UaW1lc3RhbXBzID0ge1xyXG4gICAgICAgICAgICB0aW1lc3RhbXBzOiBbXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCB0aW1lc3RhbXBzSlNPTkFycmF5ID1cclxuICAgICAgICAgICAgZWxlbWVudEpTT05bXCJhY3Rpb25cIl1bXCJwYXJhbXNcIl1bXCJ0aW1lU3RhbXBGb3JFYWNoVGV4dFwiXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbWVzdGFtcHNKU09OQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHRpbWVzdGFtcEluZGV4ID0gaTtcclxuICAgICAgICAgICAgbGV0IHRpbWVzdGFtcEpTT04gPSB0aW1lc3RhbXBzSlNPTkFycmF5W2ldO1xyXG4gICAgICAgICAgICBsZXQgdGltZXN0YW1wOiBXb3JkVGltZXN0YW1wRWxlbWVudCA9IHtcclxuICAgICAgICAgICAgICAgIGRvbUlEOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wic3ViQ29udGVudElkXCJdICtcclxuICAgICAgICAgICAgICAgICAgICBcIl9cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wSW5kZXgudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHdvcmQ6IHRpbWVzdGFtcEpTT05bXCJ0ZXh0XCJdLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lc3RhbXA6IHRpbWVzdGFtcEpTT05bXCJzdGFydER1cmF0aW9uXCJdLFxyXG4gICAgICAgICAgICAgICAgZW5kVGltZXN0YW1wOiB0aW1lc3RhbXBKU09OW1wiZW5kRHVyYXRpb25cIl0sXHJcbiAgICAgICAgICAgICAgICBhdWRpb1NyYzogdGltZXN0YW1wSlNPTltcIndvcmRmaWxlXCJdWzBdW1wicGF0aFwiXSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMucHVzaCh0aW1lc3RhbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgIGRvbUlEOiBlbGVtZW50SlNPTltcImFjdGlvblwiXVtcInN1YkNvbnRlbnRJZFwiXSxcclxuICAgICAgICAgICAgdHlwZTogXCJhdWRpb1wiLFxyXG4gICAgICAgICAgICBwb3NpdGlvblg6IGVsZW1lbnRKU09OW1wieFwiXSxcclxuICAgICAgICAgICAgcG9zaXRpb25ZOiBlbGVtZW50SlNPTltcInlcIl0sXHJcbiAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50SlNPTltcIndpZHRoXCJdLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnRKU09OW1wiaGVpZ2h0XCJdLFxyXG4gICAgICAgICAgICBnbG93Q29sb3I6IGVsZW1lbnRKU09OW1wiYWN0aW9uXCJdW1wicGFyYW1zXCJdW1wiZ2xvd0NvbG9yXCJdLFxyXG4gICAgICAgICAgICBhdWRpb1NyYzogZWxlbWVudEpTT05bXCJhY3Rpb25cIl1bXCJwYXJhbXNcIl1bXCJmaWxlc1wiXVswXVtcInBhdGhcIl0sXHJcbiAgICAgICAgICAgIGF1ZGlvVGltZXN0YW1wczogYXVkaW9UaW1lc3RhbXBzLFxyXG4gICAgICAgICAgICBzdHlsZXM6IFwiXCIsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF1ZGlvRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwYXJzZUNvbnRlbnRKU09ORmlsZSgpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4oXCJHRVRcIiwgdGhpcy5jb250ZW50RmlsZVBhdGgsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gXCJqc29uXCI7XHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RhdHVzID0geGhyLnN0YXR1cztcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZSA9IHhoci5yZXNwb25zZTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzcG9uc2VbXCJsMTBuXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByZXNwb25zZVtcIm92ZXJyaWRlXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbi8qIVxuICogU3BsaWRlLmpzXG4gKiBWZXJzaW9uICA6IDQuMS40XG4gKiBMaWNlbnNlICA6IE1JVFxuICogQ29weXJpZ2h0OiAyMDIyIE5hb3Rvc2hpIEZ1aml0YVxuICovXG52YXIgTUVESUFfUFJFRkVSU19SRURVQ0VEX01PVElPTiA9IFwiKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSlcIjtcbnZhciBDUkVBVEVEID0gMTtcbnZhciBNT1VOVEVEID0gMjtcbnZhciBJRExFID0gMztcbnZhciBNT1ZJTkcgPSA0O1xudmFyIFNDUk9MTElORyA9IDU7XG52YXIgRFJBR0dJTkcgPSA2O1xudmFyIERFU1RST1lFRCA9IDc7XG52YXIgU1RBVEVTID0ge1xuICBDUkVBVEVEOiBDUkVBVEVELFxuICBNT1VOVEVEOiBNT1VOVEVELFxuICBJRExFOiBJRExFLFxuICBNT1ZJTkc6IE1PVklORyxcbiAgU0NST0xMSU5HOiBTQ1JPTExJTkcsXG4gIERSQUdHSU5HOiBEUkFHR0lORyxcbiAgREVTVFJPWUVEOiBERVNUUk9ZRURcbn07XG5cbmZ1bmN0aW9uIGVtcHR5KGFycmF5KSB7XG4gIGFycmF5Lmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIHNsaWNlKGFycmF5TGlrZSwgc3RhcnQsIGVuZCkge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyYXlMaWtlLCBzdGFydCwgZW5kKTtcbn1cblxuZnVuY3Rpb24gYXBwbHkoZnVuYykge1xuICByZXR1cm4gZnVuYy5iaW5kLmFwcGx5KGZ1bmMsIFtudWxsXS5jb25jYXQoc2xpY2UoYXJndW1lbnRzLCAxKSkpO1xufVxuXG52YXIgbmV4dFRpY2sgPSBzZXRUaW1lb3V0O1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuZnVuY3Rpb24gcmFmKGZ1bmMpIHtcbiAgcmV0dXJuIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jKTtcbn1cblxuZnVuY3Rpb24gdHlwZU9mKHR5cGUsIHN1YmplY3QpIHtcbiAgcmV0dXJuIHR5cGVvZiBzdWJqZWN0ID09PSB0eXBlO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChzdWJqZWN0KSB7XG4gIHJldHVybiAhaXNOdWxsKHN1YmplY3QpICYmIHR5cGVPZihcIm9iamVjdFwiLCBzdWJqZWN0KTtcbn1cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xudmFyIGlzRnVuY3Rpb24gPSBhcHBseSh0eXBlT2YsIFwiZnVuY3Rpb25cIik7XG52YXIgaXNTdHJpbmcgPSBhcHBseSh0eXBlT2YsIFwic3RyaW5nXCIpO1xudmFyIGlzVW5kZWZpbmVkID0gYXBwbHkodHlwZU9mLCBcInVuZGVmaW5lZFwiKTtcblxuZnVuY3Rpb24gaXNOdWxsKHN1YmplY3QpIHtcbiAgcmV0dXJuIHN1YmplY3QgPT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQoc3ViamVjdCkge1xuICB0cnkge1xuICAgIHJldHVybiBzdWJqZWN0IGluc3RhbmNlb2YgKHN1YmplY3Qub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3cpLkhUTUxFbGVtZW50O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRvQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xufVxuXG5mdW5jdGlvbiBmb3JFYWNoKHZhbHVlcywgaXRlcmF0ZWUpIHtcbiAgdG9BcnJheSh2YWx1ZXMpLmZvckVhY2goaXRlcmF0ZWUpO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlcyhhcnJheSwgdmFsdWUpIHtcbiAgcmV0dXJuIGFycmF5LmluZGV4T2YodmFsdWUpID4gLTE7XG59XG5cbmZ1bmN0aW9uIHB1c2goYXJyYXksIGl0ZW1zKSB7XG4gIGFycmF5LnB1c2guYXBwbHkoYXJyYXksIHRvQXJyYXkoaXRlbXMpKTtcbiAgcmV0dXJuIGFycmF5O1xufVxuXG5mdW5jdGlvbiB0b2dnbGVDbGFzcyhlbG0sIGNsYXNzZXMsIGFkZCkge1xuICBpZiAoZWxtKSB7XG4gICAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgZWxtLmNsYXNzTGlzdFthZGQgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0obmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MoZWxtLCBjbGFzc2VzKSB7XG4gIHRvZ2dsZUNsYXNzKGVsbSwgaXNTdHJpbmcoY2xhc3NlcykgPyBjbGFzc2VzLnNwbGl0KFwiIFwiKSA6IGNsYXNzZXMsIHRydWUpO1xufVxuXG5mdW5jdGlvbiBhcHBlbmQocGFyZW50LCBjaGlsZHJlbikge1xuICBmb3JFYWNoKGNoaWxkcmVuLCBwYXJlbnQuYXBwZW5kQ2hpbGQuYmluZChwYXJlbnQpKTtcbn1cblxuZnVuY3Rpb24gYmVmb3JlKG5vZGVzLCByZWYpIHtcbiAgZm9yRWFjaChub2RlcywgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB2YXIgcGFyZW50ID0gKHJlZiB8fCBub2RlKS5wYXJlbnROb2RlO1xuXG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCByZWYpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXMoZWxtLCBzZWxlY3Rvcikge1xuICByZXR1cm4gaXNIVE1MRWxlbWVudChlbG0pICYmIChlbG1bXCJtc01hdGNoZXNTZWxlY3RvclwiXSB8fCBlbG0ubWF0Y2hlcykuY2FsbChlbG0sIHNlbGVjdG9yKTtcbn1cblxuZnVuY3Rpb24gY2hpbGRyZW4ocGFyZW50LCBzZWxlY3Rvcikge1xuICB2YXIgY2hpbGRyZW4yID0gcGFyZW50ID8gc2xpY2UocGFyZW50LmNoaWxkcmVuKSA6IFtdO1xuICByZXR1cm4gc2VsZWN0b3IgPyBjaGlsZHJlbjIuZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgIHJldHVybiBtYXRjaGVzKGNoaWxkLCBzZWxlY3Rvcik7XG4gIH0pIDogY2hpbGRyZW4yO1xufVxuXG5mdW5jdGlvbiBjaGlsZChwYXJlbnQsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA/IGNoaWxkcmVuKHBhcmVudCwgc2VsZWN0b3IpWzBdIDogcGFyZW50LmZpcnN0RWxlbWVudENoaWxkO1xufVxuXG52YXIgb3duS2V5cyA9IE9iamVjdC5rZXlzO1xuXG5mdW5jdGlvbiBmb3JPd24ob2JqZWN0LCBpdGVyYXRlZSwgcmlnaHQpIHtcbiAgaWYgKG9iamVjdCkge1xuICAgIChyaWdodCA/IG93bktleXMob2JqZWN0KS5yZXZlcnNlKCkgOiBvd25LZXlzKG9iamVjdCkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAga2V5ICE9PSBcIl9fcHJvdG9fX1wiICYmIGl0ZXJhdGVlKG9iamVjdFtrZXldLCBrZXkpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gYXNzaWduKG9iamVjdCkge1xuICBzbGljZShhcmd1bWVudHMsIDEpLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgIGZvck93bihzb3VyY2UsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICBvYmplY3Rba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gbWVyZ2Uob2JqZWN0KSB7XG4gIHNsaWNlKGFyZ3VtZW50cywgMSkuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgZm9yT3duKHNvdXJjZSwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlLnNsaWNlKCk7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBvYmplY3Rba2V5XSA9IG1lcmdlKHt9LCBpc09iamVjdChvYmplY3Rba2V5XSkgPyBvYmplY3Rba2V5XSA6IHt9LCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gb21pdChvYmplY3QsIGtleXMpIHtcbiAgZm9yRWFjaChrZXlzIHx8IG93bktleXMob2JqZWN0KSwgZnVuY3Rpb24gKGtleSkge1xuICAgIGRlbGV0ZSBvYmplY3Rba2V5XTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUF0dHJpYnV0ZShlbG1zLCBhdHRycykge1xuICBmb3JFYWNoKGVsbXMsIGZ1bmN0aW9uIChlbG0pIHtcbiAgICBmb3JFYWNoKGF0dHJzLCBmdW5jdGlvbiAoYXR0cikge1xuICAgICAgZWxtICYmIGVsbS5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGUoZWxtcywgYXR0cnMsIHZhbHVlKSB7XG4gIGlmIChpc09iamVjdChhdHRycykpIHtcbiAgICBmb3JPd24oYXR0cnMsIGZ1bmN0aW9uICh2YWx1ZTIsIG5hbWUpIHtcbiAgICAgIHNldEF0dHJpYnV0ZShlbG1zLCBuYW1lLCB2YWx1ZTIpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGZvckVhY2goZWxtcywgZnVuY3Rpb24gKGVsbSkge1xuICAgICAgaXNOdWxsKHZhbHVlKSB8fCB2YWx1ZSA9PT0gXCJcIiA/IHJlbW92ZUF0dHJpYnV0ZShlbG0sIGF0dHJzKSA6IGVsbS5zZXRBdHRyaWJ1dGUoYXR0cnMsIFN0cmluZyh2YWx1ZSkpO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZSh0YWcsIGF0dHJzLCBwYXJlbnQpIHtcbiAgdmFyIGVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcblxuICBpZiAoYXR0cnMpIHtcbiAgICBpc1N0cmluZyhhdHRycykgPyBhZGRDbGFzcyhlbG0sIGF0dHJzKSA6IHNldEF0dHJpYnV0ZShlbG0sIGF0dHJzKTtcbiAgfVxuXG4gIHBhcmVudCAmJiBhcHBlbmQocGFyZW50LCBlbG0pO1xuICByZXR1cm4gZWxtO1xufVxuXG5mdW5jdGlvbiBzdHlsZShlbG0sIHByb3AsIHZhbHVlKSB7XG4gIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShlbG0pW3Byb3BdO1xuICB9XG5cbiAgaWYgKCFpc051bGwodmFsdWUpKSB7XG4gICAgZWxtLnN0eWxlW3Byb3BdID0gXCJcIiArIHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXkoZWxtLCBkaXNwbGF5Mikge1xuICBzdHlsZShlbG0sIFwiZGlzcGxheVwiLCBkaXNwbGF5Mik7XG59XG5cbmZ1bmN0aW9uIGZvY3VzKGVsbSkge1xuICBlbG1bXCJzZXRBY3RpdmVcIl0gJiYgZWxtW1wic2V0QWN0aXZlXCJdKCkgfHwgZWxtLmZvY3VzKHtcbiAgICBwcmV2ZW50U2Nyb2xsOiB0cnVlXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRBdHRyaWJ1dGUoZWxtLCBhdHRyKSB7XG4gIHJldHVybiBlbG0uZ2V0QXR0cmlidXRlKGF0dHIpO1xufVxuXG5mdW5jdGlvbiBoYXNDbGFzcyhlbG0sIGNsYXNzTmFtZSkge1xuICByZXR1cm4gZWxtICYmIGVsbS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbn1cblxuZnVuY3Rpb24gcmVjdCh0YXJnZXQpIHtcbiAgcmV0dXJuIHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKG5vZGVzKSB7XG4gIGZvckVhY2gobm9kZXMsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VIdG1sKGh0bWwpIHtcbiAgcmV0dXJuIGNoaWxkKG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgXCJ0ZXh0L2h0bWxcIikuYm9keSk7XG59XG5cbmZ1bmN0aW9uIHByZXZlbnQoZSwgc3RvcFByb3BhZ2F0aW9uKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBpZiAoc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5KHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHBhcmVudCAmJiBwYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5QWxsKHBhcmVudCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHNlbGVjdG9yID8gc2xpY2UocGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSA6IFtdO1xufVxuXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbG0sIGNsYXNzZXMpIHtcbiAgdG9nZ2xlQ2xhc3MoZWxtLCBjbGFzc2VzLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIHRpbWVPZihlKSB7XG4gIHJldHVybiBlLnRpbWVTdGFtcDtcbn1cblxuZnVuY3Rpb24gdW5pdCh2YWx1ZSkge1xuICByZXR1cm4gaXNTdHJpbmcodmFsdWUpID8gdmFsdWUgOiB2YWx1ZSA/IHZhbHVlICsgXCJweFwiIDogXCJcIjtcbn1cblxudmFyIFBST0pFQ1RfQ09ERSA9IFwic3BsaWRlXCI7XG52YXIgREFUQV9BVFRSSUJVVEUgPSBcImRhdGEtXCIgKyBQUk9KRUNUX0NPREU7XG5cbmZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJbXCIgKyBQUk9KRUNUX0NPREUgKyBcIl0gXCIgKyAobWVzc2FnZSB8fCBcIlwiKSk7XG4gIH1cbn1cblxudmFyIG1pbiA9IE1hdGgubWluLFxuICAgIG1heCA9IE1hdGgubWF4LFxuICAgIGZsb29yID0gTWF0aC5mbG9vcixcbiAgICBjZWlsID0gTWF0aC5jZWlsLFxuICAgIGFicyA9IE1hdGguYWJzO1xuXG5mdW5jdGlvbiBhcHByb3hpbWF0ZWx5RXF1YWwoeCwgeSwgZXBzaWxvbikge1xuICByZXR1cm4gYWJzKHggLSB5KSA8IGVwc2lsb247XG59XG5cbmZ1bmN0aW9uIGJldHdlZW4obnVtYmVyLCB4LCB5LCBleGNsdXNpdmUpIHtcbiAgdmFyIG1pbmltdW0gPSBtaW4oeCwgeSk7XG4gIHZhciBtYXhpbXVtID0gbWF4KHgsIHkpO1xuICByZXR1cm4gZXhjbHVzaXZlID8gbWluaW11bSA8IG51bWJlciAmJiBudW1iZXIgPCBtYXhpbXVtIDogbWluaW11bSA8PSBudW1iZXIgJiYgbnVtYmVyIDw9IG1heGltdW07XG59XG5cbmZ1bmN0aW9uIGNsYW1wKG51bWJlciwgeCwgeSkge1xuICB2YXIgbWluaW11bSA9IG1pbih4LCB5KTtcbiAgdmFyIG1heGltdW0gPSBtYXgoeCwgeSk7XG4gIHJldHVybiBtaW4obWF4KG1pbmltdW0sIG51bWJlciksIG1heGltdW0pO1xufVxuXG5mdW5jdGlvbiBzaWduKHgpIHtcbiAgcmV0dXJuICsoeCA+IDApIC0gKyh4IDwgMCk7XG59XG5cbmZ1bmN0aW9uIGNhbWVsVG9LZWJhYihzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oW2EtejAtOV0pKFtBLVpdKS9nLCBcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdChzdHJpbmcsIHJlcGxhY2VtZW50cykge1xuICBmb3JFYWNoKHJlcGxhY2VtZW50cywgZnVuY3Rpb24gKHJlcGxhY2VtZW50KSB7XG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoXCIlc1wiLCBcIlwiICsgcmVwbGFjZW1lbnQpO1xuICB9KTtcbiAgcmV0dXJuIHN0cmluZztcbn1cblxuZnVuY3Rpb24gcGFkKG51bWJlcikge1xuICByZXR1cm4gbnVtYmVyIDwgMTAgPyBcIjBcIiArIG51bWJlciA6IFwiXCIgKyBudW1iZXI7XG59XG5cbnZhciBpZHMgPSB7fTtcblxuZnVuY3Rpb24gdW5pcXVlSWQocHJlZml4KSB7XG4gIHJldHVybiBcIlwiICsgcHJlZml4ICsgcGFkKGlkc1twcmVmaXhdID0gKGlkc1twcmVmaXhdIHx8IDApICsgMSk7XG59XG5cbmZ1bmN0aW9uIEV2ZW50QmluZGVyKCkge1xuICB2YXIgbGlzdGVuZXJzID0gW107XG5cbiAgZnVuY3Rpb24gYmluZCh0YXJnZXRzLCBldmVudHMsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgZm9yRWFjaEV2ZW50KHRhcmdldHMsIGV2ZW50cywgZnVuY3Rpb24gKHRhcmdldCwgZXZlbnQsIG5hbWVzcGFjZSkge1xuICAgICAgdmFyIGlzRXZlbnRUYXJnZXQgPSAoXCJhZGRFdmVudExpc3RlbmVyXCIgaW4gdGFyZ2V0KTtcbiAgICAgIHZhciByZW1vdmVyID0gaXNFdmVudFRhcmdldCA/IHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyLmJpbmQodGFyZ2V0LCBldmVudCwgY2FsbGJhY2ssIG9wdGlvbnMpIDogdGFyZ2V0W1wicmVtb3ZlTGlzdGVuZXJcIl0uYmluZCh0YXJnZXQsIGNhbGxiYWNrKTtcbiAgICAgIGlzRXZlbnRUYXJnZXQgPyB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2ssIG9wdGlvbnMpIDogdGFyZ2V0W1wiYWRkTGlzdGVuZXJcIl0oY2FsbGJhY2spO1xuICAgICAgbGlzdGVuZXJzLnB1c2goW3RhcmdldCwgZXZlbnQsIG5hbWVzcGFjZSwgY2FsbGJhY2ssIHJlbW92ZXJdKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuYmluZCh0YXJnZXRzLCBldmVudHMsIGNhbGxiYWNrKSB7XG4gICAgZm9yRWFjaEV2ZW50KHRhcmdldHMsIGV2ZW50cywgZnVuY3Rpb24gKHRhcmdldCwgZXZlbnQsIG5hbWVzcGFjZSkge1xuICAgICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmZpbHRlcihmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyWzBdID09PSB0YXJnZXQgJiYgbGlzdGVuZXJbMV0gPT09IGV2ZW50ICYmIGxpc3RlbmVyWzJdID09PSBuYW1lc3BhY2UgJiYgKCFjYWxsYmFjayB8fCBsaXN0ZW5lclszXSA9PT0gY2FsbGJhY2spKSB7XG4gICAgICAgICAgbGlzdGVuZXJbNF0oKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGF0Y2godGFyZ2V0LCB0eXBlLCBkZXRhaWwpIHtcbiAgICB2YXIgZTtcbiAgICB2YXIgYnViYmxlcyA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mIEN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGUgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwge1xuICAgICAgICBidWJibGVzOiBidWJibGVzLFxuICAgICAgICBkZXRhaWw6IGRldGFpbFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO1xuICAgICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgYnViYmxlcywgZmFsc2UsIGRldGFpbCk7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgcmV0dXJuIGU7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JFYWNoRXZlbnQodGFyZ2V0cywgZXZlbnRzLCBpdGVyYXRlZSkge1xuICAgIGZvckVhY2godGFyZ2V0cywgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgdGFyZ2V0ICYmIGZvckVhY2goZXZlbnRzLCBmdW5jdGlvbiAoZXZlbnRzMikge1xuICAgICAgICBldmVudHMyLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5TKSB7XG4gICAgICAgICAgdmFyIGZyYWdtZW50ID0gZXZlbnROUy5zcGxpdChcIi5cIik7XG4gICAgICAgICAgaXRlcmF0ZWUodGFyZ2V0LCBmcmFnbWVudFswXSwgZnJhZ21lbnRbMV0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBsaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgZGF0YVs0XSgpO1xuICAgIH0pO1xuICAgIGVtcHR5KGxpc3RlbmVycyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGJpbmQ6IGJpbmQsXG4gICAgdW5iaW5kOiB1bmJpbmQsXG4gICAgZGlzcGF0Y2g6IGRpc3BhdGNoLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3lcbiAgfTtcbn1cblxudmFyIEVWRU5UX01PVU5URUQgPSBcIm1vdW50ZWRcIjtcbnZhciBFVkVOVF9SRUFEWSA9IFwicmVhZHlcIjtcbnZhciBFVkVOVF9NT1ZFID0gXCJtb3ZlXCI7XG52YXIgRVZFTlRfTU9WRUQgPSBcIm1vdmVkXCI7XG52YXIgRVZFTlRfQ0xJQ0sgPSBcImNsaWNrXCI7XG52YXIgRVZFTlRfQUNUSVZFID0gXCJhY3RpdmVcIjtcbnZhciBFVkVOVF9JTkFDVElWRSA9IFwiaW5hY3RpdmVcIjtcbnZhciBFVkVOVF9WSVNJQkxFID0gXCJ2aXNpYmxlXCI7XG52YXIgRVZFTlRfSElEREVOID0gXCJoaWRkZW5cIjtcbnZhciBFVkVOVF9SRUZSRVNIID0gXCJyZWZyZXNoXCI7XG52YXIgRVZFTlRfVVBEQVRFRCA9IFwidXBkYXRlZFwiO1xudmFyIEVWRU5UX1JFU0laRSA9IFwicmVzaXplXCI7XG52YXIgRVZFTlRfUkVTSVpFRCA9IFwicmVzaXplZFwiO1xudmFyIEVWRU5UX0RSQUcgPSBcImRyYWdcIjtcbnZhciBFVkVOVF9EUkFHR0lORyA9IFwiZHJhZ2dpbmdcIjtcbnZhciBFVkVOVF9EUkFHR0VEID0gXCJkcmFnZ2VkXCI7XG52YXIgRVZFTlRfU0NST0xMID0gXCJzY3JvbGxcIjtcbnZhciBFVkVOVF9TQ1JPTExFRCA9IFwic2Nyb2xsZWRcIjtcbnZhciBFVkVOVF9PVkVSRkxPVyA9IFwib3ZlcmZsb3dcIjtcbnZhciBFVkVOVF9ERVNUUk9ZID0gXCJkZXN0cm95XCI7XG52YXIgRVZFTlRfQVJST1dTX01PVU5URUQgPSBcImFycm93czptb3VudGVkXCI7XG52YXIgRVZFTlRfQVJST1dTX1VQREFURUQgPSBcImFycm93czp1cGRhdGVkXCI7XG52YXIgRVZFTlRfUEFHSU5BVElPTl9NT1VOVEVEID0gXCJwYWdpbmF0aW9uOm1vdW50ZWRcIjtcbnZhciBFVkVOVF9QQUdJTkFUSU9OX1VQREFURUQgPSBcInBhZ2luYXRpb246dXBkYXRlZFwiO1xudmFyIEVWRU5UX05BVklHQVRJT05fTU9VTlRFRCA9IFwibmF2aWdhdGlvbjptb3VudGVkXCI7XG52YXIgRVZFTlRfQVVUT1BMQVlfUExBWSA9IFwiYXV0b3BsYXk6cGxheVwiO1xudmFyIEVWRU5UX0FVVE9QTEFZX1BMQVlJTkcgPSBcImF1dG9wbGF5OnBsYXlpbmdcIjtcbnZhciBFVkVOVF9BVVRPUExBWV9QQVVTRSA9IFwiYXV0b3BsYXk6cGF1c2VcIjtcbnZhciBFVkVOVF9MQVpZTE9BRF9MT0FERUQgPSBcImxhenlsb2FkOmxvYWRlZFwiO1xudmFyIEVWRU5UX1NMSURFX0tFWURPV04gPSBcInNrXCI7XG52YXIgRVZFTlRfU0hJRlRFRCA9IFwic2hcIjtcbnZhciBFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRCA9IFwiZWlcIjtcblxuZnVuY3Rpb24gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMikge1xuICB2YXIgYnVzID0gU3BsaWRlMiA/IFNwbGlkZTIuZXZlbnQuYnVzIDogZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgYmluZGVyID0gRXZlbnRCaW5kZXIoKTtcblxuICBmdW5jdGlvbiBvbihldmVudHMsIGNhbGxiYWNrKSB7XG4gICAgYmluZGVyLmJpbmQoYnVzLCB0b0FycmF5KGV2ZW50cykuam9pbihcIiBcIiksIGZ1bmN0aW9uIChlKSB7XG4gICAgICBjYWxsYmFjay5hcHBseShjYWxsYmFjaywgaXNBcnJheShlLmRldGFpbCkgPyBlLmRldGFpbCA6IFtdKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcbiAgICBiaW5kZXIuZGlzcGF0Y2goYnVzLCBldmVudCwgc2xpY2UoYXJndW1lbnRzLCAxKSk7XG4gIH1cblxuICBpZiAoU3BsaWRlMikge1xuICAgIFNwbGlkZTIuZXZlbnQub24oRVZFTlRfREVTVFJPWSwgYmluZGVyLmRlc3Ryb3kpO1xuICB9XG5cbiAgcmV0dXJuIGFzc2lnbihiaW5kZXIsIHtcbiAgICBidXM6IGJ1cyxcbiAgICBvbjogb24sXG4gICAgb2ZmOiBhcHBseShiaW5kZXIudW5iaW5kLCBidXMpLFxuICAgIGVtaXQ6IGVtaXRcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFJlcXVlc3RJbnRlcnZhbChpbnRlcnZhbCwgb25JbnRlcnZhbCwgb25VcGRhdGUsIGxpbWl0KSB7XG4gIHZhciBub3cgPSBEYXRlLm5vdztcbiAgdmFyIHN0YXJ0VGltZTtcbiAgdmFyIHJhdGUgPSAwO1xuICB2YXIgaWQ7XG4gIHZhciBwYXVzZWQgPSB0cnVlO1xuICB2YXIgY291bnQgPSAwO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBpZiAoIXBhdXNlZCkge1xuICAgICAgcmF0ZSA9IGludGVydmFsID8gbWluKChub3coKSAtIHN0YXJ0VGltZSkgLyBpbnRlcnZhbCwgMSkgOiAxO1xuICAgICAgb25VcGRhdGUgJiYgb25VcGRhdGUocmF0ZSk7XG5cbiAgICAgIGlmIChyYXRlID49IDEpIHtcbiAgICAgICAgb25JbnRlcnZhbCgpO1xuICAgICAgICBzdGFydFRpbWUgPSBub3coKTtcblxuICAgICAgICBpZiAobGltaXQgJiYgKytjb3VudCA+PSBsaW1pdCkge1xuICAgICAgICAgIHJldHVybiBwYXVzZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlkID0gcmFmKHVwZGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQocmVzdW1lKSB7XG4gICAgcmVzdW1lIHx8IGNhbmNlbCgpO1xuICAgIHN0YXJ0VGltZSA9IG5vdygpIC0gKHJlc3VtZSA/IHJhdGUgKiBpbnRlcnZhbCA6IDApO1xuICAgIHBhdXNlZCA9IGZhbHNlO1xuICAgIGlkID0gcmFmKHVwZGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBwYXVzZWQgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcmV3aW5kKCkge1xuICAgIHN0YXJ0VGltZSA9IG5vdygpO1xuICAgIHJhdGUgPSAwO1xuXG4gICAgaWYgKG9uVXBkYXRlKSB7XG4gICAgICBvblVwZGF0ZShyYXRlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWQgJiYgY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xuICAgIHJhdGUgPSAwO1xuICAgIGlkID0gMDtcbiAgICBwYXVzZWQgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0KHRpbWUpIHtcbiAgICBpbnRlcnZhbCA9IHRpbWU7XG4gIH1cblxuICBmdW5jdGlvbiBpc1BhdXNlZCgpIHtcbiAgICByZXR1cm4gcGF1c2VkO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydDogc3RhcnQsXG4gICAgcmV3aW5kOiByZXdpbmQsXG4gICAgcGF1c2U6IHBhdXNlLFxuICAgIGNhbmNlbDogY2FuY2VsLFxuICAgIHNldDogc2V0LFxuICAgIGlzUGF1c2VkOiBpc1BhdXNlZFxuICB9O1xufVxuXG5mdW5jdGlvbiBTdGF0ZShpbml0aWFsU3RhdGUpIHtcbiAgdmFyIHN0YXRlID0gaW5pdGlhbFN0YXRlO1xuXG4gIGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgIHN0YXRlID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBpcyhzdGF0ZXMpIHtcbiAgICByZXR1cm4gaW5jbHVkZXModG9BcnJheShzdGF0ZXMpLCBzdGF0ZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNldDogc2V0LFxuICAgIGlzOiBpc1xuICB9O1xufVxuXG5mdW5jdGlvbiBUaHJvdHRsZShmdW5jLCBkdXJhdGlvbikge1xuICB2YXIgaW50ZXJ2YWwgPSBSZXF1ZXN0SW50ZXJ2YWwoZHVyYXRpb24gfHwgMCwgZnVuYywgbnVsbCwgMSk7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaW50ZXJ2YWwuaXNQYXVzZWQoKSAmJiBpbnRlcnZhbC5zdGFydCgpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBNZWRpYShTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgc3RhdGUgPSBTcGxpZGUyLnN0YXRlO1xuICB2YXIgYnJlYWtwb2ludHMgPSBvcHRpb25zLmJyZWFrcG9pbnRzIHx8IHt9O1xuICB2YXIgcmVkdWNlZE1vdGlvbiA9IG9wdGlvbnMucmVkdWNlZE1vdGlvbiB8fCB7fTtcbiAgdmFyIGJpbmRlciA9IEV2ZW50QmluZGVyKCk7XG4gIHZhciBxdWVyaWVzID0gW107XG5cbiAgZnVuY3Rpb24gc2V0dXAoKSB7XG4gICAgdmFyIGlzTWluID0gb3B0aW9ucy5tZWRpYVF1ZXJ5ID09PSBcIm1pblwiO1xuICAgIG93bktleXMoYnJlYWtwb2ludHMpLnNvcnQoZnVuY3Rpb24gKG4sIG0pIHtcbiAgICAgIHJldHVybiBpc01pbiA/ICtuIC0gK20gOiArbSAtICtuO1xuICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmVnaXN0ZXIoYnJlYWtwb2ludHNba2V5XSwgXCIoXCIgKyAoaXNNaW4gPyBcIm1pblwiIDogXCJtYXhcIikgKyBcIi13aWR0aDpcIiArIGtleSArIFwicHgpXCIpO1xuICAgIH0pO1xuICAgIHJlZ2lzdGVyKHJlZHVjZWRNb3Rpb24sIE1FRElBX1BSRUZFUlNfUkVEVUNFRF9NT1RJT04pO1xuICAgIHVwZGF0ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveShjb21wbGV0ZWx5KSB7XG4gICAgaWYgKGNvbXBsZXRlbHkpIHtcbiAgICAgIGJpbmRlci5kZXN0cm95KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIob3B0aW9uczIsIHF1ZXJ5KSB7XG4gICAgdmFyIHF1ZXJ5TGlzdCA9IG1hdGNoTWVkaWEocXVlcnkpO1xuICAgIGJpbmRlci5iaW5kKHF1ZXJ5TGlzdCwgXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICBxdWVyaWVzLnB1c2goW29wdGlvbnMyLCBxdWVyeUxpc3RdKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICB2YXIgZGVzdHJveWVkID0gc3RhdGUuaXMoREVTVFJPWUVEKTtcbiAgICB2YXIgZGlyZWN0aW9uID0gb3B0aW9ucy5kaXJlY3Rpb247XG4gICAgdmFyIG1lcmdlZCA9IHF1ZXJpZXMucmVkdWNlKGZ1bmN0aW9uIChtZXJnZWQyLCBlbnRyeSkge1xuICAgICAgcmV0dXJuIG1lcmdlKG1lcmdlZDIsIGVudHJ5WzFdLm1hdGNoZXMgPyBlbnRyeVswXSA6IHt9KTtcbiAgICB9LCB7fSk7XG4gICAgb21pdChvcHRpb25zKTtcbiAgICBzZXQobWVyZ2VkKTtcblxuICAgIGlmIChvcHRpb25zLmRlc3Ryb3kpIHtcbiAgICAgIFNwbGlkZTIuZGVzdHJveShvcHRpb25zLmRlc3Ryb3kgPT09IFwiY29tcGxldGVseVwiKTtcbiAgICB9IGVsc2UgaWYgKGRlc3Ryb3llZCkge1xuICAgICAgZGVzdHJveSh0cnVlKTtcbiAgICAgIFNwbGlkZTIubW91bnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlyZWN0aW9uICE9PSBvcHRpb25zLmRpcmVjdGlvbiAmJiBTcGxpZGUyLnJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWR1Y2UoZW5hYmxlKSB7XG4gICAgaWYgKG1hdGNoTWVkaWEoTUVESUFfUFJFRkVSU19SRURVQ0VEX01PVElPTikubWF0Y2hlcykge1xuICAgICAgZW5hYmxlID8gbWVyZ2Uob3B0aW9ucywgcmVkdWNlZE1vdGlvbikgOiBvbWl0KG9wdGlvbnMsIG93bktleXMocmVkdWNlZE1vdGlvbikpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldChvcHRzLCBiYXNlLCBub3RpZnkpIHtcbiAgICBtZXJnZShvcHRpb25zLCBvcHRzKTtcbiAgICBiYXNlICYmIG1lcmdlKE9iamVjdC5nZXRQcm90b3R5cGVPZihvcHRpb25zKSwgb3B0cyk7XG5cbiAgICBpZiAobm90aWZ5IHx8ICFzdGF0ZS5pcyhDUkVBVEVEKSkge1xuICAgICAgU3BsaWRlMi5lbWl0KEVWRU5UX1VQREFURUQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2V0dXA6IHNldHVwLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgcmVkdWNlOiByZWR1Y2UsXG4gICAgc2V0OiBzZXRcbiAgfTtcbn1cblxudmFyIEFSUk9XID0gXCJBcnJvd1wiO1xudmFyIEFSUk9XX0xFRlQgPSBBUlJPVyArIFwiTGVmdFwiO1xudmFyIEFSUk9XX1JJR0hUID0gQVJST1cgKyBcIlJpZ2h0XCI7XG52YXIgQVJST1dfVVAgPSBBUlJPVyArIFwiVXBcIjtcbnZhciBBUlJPV19ET1dOID0gQVJST1cgKyBcIkRvd25cIjtcbnZhciBMVFIgPSBcImx0clwiO1xudmFyIFJUTCA9IFwicnRsXCI7XG52YXIgVFRCID0gXCJ0dGJcIjtcbnZhciBPUklFTlRBVElPTl9NQVAgPSB7XG4gIHdpZHRoOiBbXCJoZWlnaHRcIl0sXG4gIGxlZnQ6IFtcInRvcFwiLCBcInJpZ2h0XCJdLFxuICByaWdodDogW1wiYm90dG9tXCIsIFwibGVmdFwiXSxcbiAgeDogW1wieVwiXSxcbiAgWDogW1wiWVwiXSxcbiAgWTogW1wiWFwiXSxcbiAgQXJyb3dMZWZ0OiBbQVJST1dfVVAsIEFSUk9XX1JJR0hUXSxcbiAgQXJyb3dSaWdodDogW0FSUk9XX0RPV04sIEFSUk9XX0xFRlRdXG59O1xuXG5mdW5jdGlvbiBEaXJlY3Rpb24oU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgZnVuY3Rpb24gcmVzb2x2ZShwcm9wLCBheGlzT25seSwgZGlyZWN0aW9uKSB7XG4gICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uIHx8IG9wdGlvbnMuZGlyZWN0aW9uO1xuICAgIHZhciBpbmRleCA9IGRpcmVjdGlvbiA9PT0gUlRMICYmICFheGlzT25seSA/IDEgOiBkaXJlY3Rpb24gPT09IFRUQiA/IDAgOiAtMTtcbiAgICByZXR1cm4gT1JJRU5UQVRJT05fTUFQW3Byb3BdICYmIE9SSUVOVEFUSU9OX01BUFtwcm9wXVtpbmRleF0gfHwgcHJvcC5yZXBsYWNlKC93aWR0aHxsZWZ0fHJpZ2h0L2ksIGZ1bmN0aW9uIChtYXRjaCwgb2Zmc2V0KSB7XG4gICAgICB2YXIgcmVwbGFjZW1lbnQgPSBPUklFTlRBVElPTl9NQVBbbWF0Y2gudG9Mb3dlckNhc2UoKV1baW5kZXhdIHx8IG1hdGNoO1xuICAgICAgcmV0dXJuIG9mZnNldCA+IDAgPyByZXBsYWNlbWVudC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHJlcGxhY2VtZW50LnNsaWNlKDEpIDogcmVwbGFjZW1lbnQ7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvcmllbnQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgKiAob3B0aW9ucy5kaXJlY3Rpb24gPT09IFJUTCA/IDEgOiAtMSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlc29sdmU6IHJlc29sdmUsXG4gICAgb3JpZW50OiBvcmllbnRcbiAgfTtcbn1cblxudmFyIFJPTEUgPSBcInJvbGVcIjtcbnZhciBUQUJfSU5ERVggPSBcInRhYmluZGV4XCI7XG52YXIgRElTQUJMRUQgPSBcImRpc2FibGVkXCI7XG52YXIgQVJJQV9QUkVGSVggPSBcImFyaWEtXCI7XG52YXIgQVJJQV9DT05UUk9MUyA9IEFSSUFfUFJFRklYICsgXCJjb250cm9sc1wiO1xudmFyIEFSSUFfQ1VSUkVOVCA9IEFSSUFfUFJFRklYICsgXCJjdXJyZW50XCI7XG52YXIgQVJJQV9TRUxFQ1RFRCA9IEFSSUFfUFJFRklYICsgXCJzZWxlY3RlZFwiO1xudmFyIEFSSUFfTEFCRUwgPSBBUklBX1BSRUZJWCArIFwibGFiZWxcIjtcbnZhciBBUklBX0xBQkVMTEVEQlkgPSBBUklBX1BSRUZJWCArIFwibGFiZWxsZWRieVwiO1xudmFyIEFSSUFfSElEREVOID0gQVJJQV9QUkVGSVggKyBcImhpZGRlblwiO1xudmFyIEFSSUFfT1JJRU5UQVRJT04gPSBBUklBX1BSRUZJWCArIFwib3JpZW50YXRpb25cIjtcbnZhciBBUklBX1JPTEVERVNDUklQVElPTiA9IEFSSUFfUFJFRklYICsgXCJyb2xlZGVzY3JpcHRpb25cIjtcbnZhciBBUklBX0xJVkUgPSBBUklBX1BSRUZJWCArIFwibGl2ZVwiO1xudmFyIEFSSUFfQlVTWSA9IEFSSUFfUFJFRklYICsgXCJidXN5XCI7XG52YXIgQVJJQV9BVE9NSUMgPSBBUklBX1BSRUZJWCArIFwiYXRvbWljXCI7XG52YXIgQUxMX0FUVFJJQlVURVMgPSBbUk9MRSwgVEFCX0lOREVYLCBESVNBQkxFRCwgQVJJQV9DT05UUk9MUywgQVJJQV9DVVJSRU5ULCBBUklBX0xBQkVMLCBBUklBX0xBQkVMTEVEQlksIEFSSUFfSElEREVOLCBBUklBX09SSUVOVEFUSU9OLCBBUklBX1JPTEVERVNDUklQVElPTl07XG52YXIgQ0xBU1NfUFJFRklYID0gUFJPSkVDVF9DT0RFICsgXCJfX1wiO1xudmFyIFNUQVRVU19DTEFTU19QUkVGSVggPSBcImlzLVwiO1xudmFyIENMQVNTX1JPT1QgPSBQUk9KRUNUX0NPREU7XG52YXIgQ0xBU1NfVFJBQ0sgPSBDTEFTU19QUkVGSVggKyBcInRyYWNrXCI7XG52YXIgQ0xBU1NfTElTVCA9IENMQVNTX1BSRUZJWCArIFwibGlzdFwiO1xudmFyIENMQVNTX1NMSURFID0gQ0xBU1NfUFJFRklYICsgXCJzbGlkZVwiO1xudmFyIENMQVNTX0NMT05FID0gQ0xBU1NfU0xJREUgKyBcIi0tY2xvbmVcIjtcbnZhciBDTEFTU19DT05UQUlORVIgPSBDTEFTU19TTElERSArIFwiX19jb250YWluZXJcIjtcbnZhciBDTEFTU19BUlJPV1MgPSBDTEFTU19QUkVGSVggKyBcImFycm93c1wiO1xudmFyIENMQVNTX0FSUk9XID0gQ0xBU1NfUFJFRklYICsgXCJhcnJvd1wiO1xudmFyIENMQVNTX0FSUk9XX1BSRVYgPSBDTEFTU19BUlJPVyArIFwiLS1wcmV2XCI7XG52YXIgQ0xBU1NfQVJST1dfTkVYVCA9IENMQVNTX0FSUk9XICsgXCItLW5leHRcIjtcbnZhciBDTEFTU19QQUdJTkFUSU9OID0gQ0xBU1NfUFJFRklYICsgXCJwYWdpbmF0aW9uXCI7XG52YXIgQ0xBU1NfUEFHSU5BVElPTl9QQUdFID0gQ0xBU1NfUEFHSU5BVElPTiArIFwiX19wYWdlXCI7XG52YXIgQ0xBU1NfUFJPR1JFU1MgPSBDTEFTU19QUkVGSVggKyBcInByb2dyZXNzXCI7XG52YXIgQ0xBU1NfUFJPR1JFU1NfQkFSID0gQ0xBU1NfUFJPR1JFU1MgKyBcIl9fYmFyXCI7XG52YXIgQ0xBU1NfVE9HR0xFID0gQ0xBU1NfUFJFRklYICsgXCJ0b2dnbGVcIjtcbnZhciBDTEFTU19UT0dHTEVfUExBWSA9IENMQVNTX1RPR0dMRSArIFwiX19wbGF5XCI7XG52YXIgQ0xBU1NfVE9HR0xFX1BBVVNFID0gQ0xBU1NfVE9HR0xFICsgXCJfX3BhdXNlXCI7XG52YXIgQ0xBU1NfU1BJTk5FUiA9IENMQVNTX1BSRUZJWCArIFwic3Bpbm5lclwiO1xudmFyIENMQVNTX1NSID0gQ0xBU1NfUFJFRklYICsgXCJzclwiO1xudmFyIENMQVNTX0lOSVRJQUxJWkVEID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwiaW5pdGlhbGl6ZWRcIjtcbnZhciBDTEFTU19BQ1RJVkUgPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJhY3RpdmVcIjtcbnZhciBDTEFTU19QUkVWID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwicHJldlwiO1xudmFyIENMQVNTX05FWFQgPSBTVEFUVVNfQ0xBU1NfUFJFRklYICsgXCJuZXh0XCI7XG52YXIgQ0xBU1NfVklTSUJMRSA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcInZpc2libGVcIjtcbnZhciBDTEFTU19MT0FESU5HID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwibG9hZGluZ1wiO1xudmFyIENMQVNTX0ZPQ1VTX0lOID0gU1RBVFVTX0NMQVNTX1BSRUZJWCArIFwiZm9jdXMtaW5cIjtcbnZhciBDTEFTU19PVkVSRkxPVyA9IFNUQVRVU19DTEFTU19QUkVGSVggKyBcIm92ZXJmbG93XCI7XG52YXIgU1RBVFVTX0NMQVNTRVMgPSBbQ0xBU1NfQUNUSVZFLCBDTEFTU19WSVNJQkxFLCBDTEFTU19QUkVWLCBDTEFTU19ORVhULCBDTEFTU19MT0FESU5HLCBDTEFTU19GT0NVU19JTiwgQ0xBU1NfT1ZFUkZMT1ddO1xudmFyIENMQVNTRVMgPSB7XG4gIHNsaWRlOiBDTEFTU19TTElERSxcbiAgY2xvbmU6IENMQVNTX0NMT05FLFxuICBhcnJvd3M6IENMQVNTX0FSUk9XUyxcbiAgYXJyb3c6IENMQVNTX0FSUk9XLFxuICBwcmV2OiBDTEFTU19BUlJPV19QUkVWLFxuICBuZXh0OiBDTEFTU19BUlJPV19ORVhULFxuICBwYWdpbmF0aW9uOiBDTEFTU19QQUdJTkFUSU9OLFxuICBwYWdlOiBDTEFTU19QQUdJTkFUSU9OX1BBR0UsXG4gIHNwaW5uZXI6IENMQVNTX1NQSU5ORVJcbn07XG5cbmZ1bmN0aW9uIGNsb3Nlc3QoZnJvbSwgc2VsZWN0b3IpIHtcbiAgaWYgKGlzRnVuY3Rpb24oZnJvbS5jbG9zZXN0KSkge1xuICAgIHJldHVybiBmcm9tLmNsb3Nlc3Qoc2VsZWN0b3IpO1xuICB9XG5cbiAgdmFyIGVsbSA9IGZyb207XG5cbiAgd2hpbGUgKGVsbSAmJiBlbG0ubm9kZVR5cGUgPT09IDEpIHtcbiAgICBpZiAobWF0Y2hlcyhlbG0sIHNlbGVjdG9yKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZWxtID0gZWxtLnBhcmVudEVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gZWxtO1xufVxuXG52YXIgRlJJQ1RJT04gPSA1O1xudmFyIExPR19JTlRFUlZBTCA9IDIwMDtcbnZhciBQT0lOVEVSX0RPV05fRVZFTlRTID0gXCJ0b3VjaHN0YXJ0IG1vdXNlZG93blwiO1xudmFyIFBPSU5URVJfTU9WRV9FVkVOVFMgPSBcInRvdWNobW92ZSBtb3VzZW1vdmVcIjtcbnZhciBQT0lOVEVSX1VQX0VWRU5UUyA9IFwidG91Y2hlbmQgdG91Y2hjYW5jZWwgbW91c2V1cCBjbGlja1wiO1xuXG5mdW5jdGlvbiBFbGVtZW50cyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZS5vbixcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2UuYmluZDtcblxuICB2YXIgcm9vdCA9IFNwbGlkZTIucm9vdDtcbiAgdmFyIGkxOG4gPSBvcHRpb25zLmkxOG47XG4gIHZhciBlbGVtZW50cyA9IHt9O1xuICB2YXIgc2xpZGVzID0gW107XG4gIHZhciByb290Q2xhc3NlcyA9IFtdO1xuICB2YXIgdHJhY2tDbGFzc2VzID0gW107XG4gIHZhciB0cmFjaztcbiAgdmFyIGxpc3Q7XG4gIHZhciBpc1VzaW5nS2V5O1xuXG4gIGZ1bmN0aW9uIHNldHVwKCkge1xuICAgIGNvbGxlY3QoKTtcbiAgICBpbml0KCk7XG4gICAgdXBkYXRlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBvbihFVkVOVF9SRUZSRVNILCBkZXN0cm95KTtcbiAgICBvbihFVkVOVF9SRUZSRVNILCBzZXR1cCk7XG4gICAgb24oRVZFTlRfVVBEQVRFRCwgdXBkYXRlKTtcbiAgICBiaW5kKGRvY3VtZW50LCBQT0lOVEVSX0RPV05fRVZFTlRTICsgXCIga2V5ZG93blwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaXNVc2luZ0tleSA9IGUudHlwZSA9PT0gXCJrZXlkb3duXCI7XG4gICAgfSwge1xuICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgIH0pO1xuICAgIGJpbmQocm9vdCwgXCJmb2N1c2luXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRvZ2dsZUNsYXNzKHJvb3QsIENMQVNTX0ZPQ1VTX0lOLCAhIWlzVXNpbmdLZXkpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveShjb21wbGV0ZWx5KSB7XG4gICAgdmFyIGF0dHJzID0gQUxMX0FUVFJJQlVURVMuY29uY2F0KFwic3R5bGVcIik7XG4gICAgZW1wdHkoc2xpZGVzKTtcbiAgICByZW1vdmVDbGFzcyhyb290LCByb290Q2xhc3Nlcyk7XG4gICAgcmVtb3ZlQ2xhc3ModHJhY2ssIHRyYWNrQ2xhc3Nlcyk7XG4gICAgcmVtb3ZlQXR0cmlidXRlKFt0cmFjaywgbGlzdF0sIGF0dHJzKTtcbiAgICByZW1vdmVBdHRyaWJ1dGUocm9vdCwgY29tcGxldGVseSA/IGF0dHJzIDogW1wic3R5bGVcIiwgQVJJQV9ST0xFREVTQ1JJUFRJT05dKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICByZW1vdmVDbGFzcyhyb290LCByb290Q2xhc3Nlcyk7XG4gICAgcmVtb3ZlQ2xhc3ModHJhY2ssIHRyYWNrQ2xhc3Nlcyk7XG4gICAgcm9vdENsYXNzZXMgPSBnZXRDbGFzc2VzKENMQVNTX1JPT1QpO1xuICAgIHRyYWNrQ2xhc3NlcyA9IGdldENsYXNzZXMoQ0xBU1NfVFJBQ0spO1xuICAgIGFkZENsYXNzKHJvb3QsIHJvb3RDbGFzc2VzKTtcbiAgICBhZGRDbGFzcyh0cmFjaywgdHJhY2tDbGFzc2VzKTtcbiAgICBzZXRBdHRyaWJ1dGUocm9vdCwgQVJJQV9MQUJFTCwgb3B0aW9ucy5sYWJlbCk7XG4gICAgc2V0QXR0cmlidXRlKHJvb3QsIEFSSUFfTEFCRUxMRURCWSwgb3B0aW9ucy5sYWJlbGxlZGJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbGxlY3QoKSB7XG4gICAgdHJhY2sgPSBmaW5kKFwiLlwiICsgQ0xBU1NfVFJBQ0spO1xuICAgIGxpc3QgPSBjaGlsZCh0cmFjaywgXCIuXCIgKyBDTEFTU19MSVNUKTtcbiAgICBhc3NlcnQodHJhY2sgJiYgbGlzdCwgXCJBIHRyYWNrL2xpc3QgZWxlbWVudCBpcyBtaXNzaW5nLlwiKTtcbiAgICBwdXNoKHNsaWRlcywgY2hpbGRyZW4obGlzdCwgXCIuXCIgKyBDTEFTU19TTElERSArIFwiOm5vdCguXCIgKyBDTEFTU19DTE9ORSArIFwiKVwiKSk7XG4gICAgZm9yT3duKHtcbiAgICAgIGFycm93czogQ0xBU1NfQVJST1dTLFxuICAgICAgcGFnaW5hdGlvbjogQ0xBU1NfUEFHSU5BVElPTixcbiAgICAgIHByZXY6IENMQVNTX0FSUk9XX1BSRVYsXG4gICAgICBuZXh0OiBDTEFTU19BUlJPV19ORVhULFxuICAgICAgYmFyOiBDTEFTU19QUk9HUkVTU19CQVIsXG4gICAgICB0b2dnbGU6IENMQVNTX1RPR0dMRVxuICAgIH0sIGZ1bmN0aW9uIChjbGFzc05hbWUsIGtleSkge1xuICAgICAgZWxlbWVudHNba2V5XSA9IGZpbmQoXCIuXCIgKyBjbGFzc05hbWUpO1xuICAgIH0pO1xuICAgIGFzc2lnbihlbGVtZW50cywge1xuICAgICAgcm9vdDogcm9vdCxcbiAgICAgIHRyYWNrOiB0cmFjayxcbiAgICAgIGxpc3Q6IGxpc3QsXG4gICAgICBzbGlkZXM6IHNsaWRlc1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgaWQgPSByb290LmlkIHx8IHVuaXF1ZUlkKFBST0pFQ1RfQ09ERSk7XG4gICAgdmFyIHJvbGUgPSBvcHRpb25zLnJvbGU7XG4gICAgcm9vdC5pZCA9IGlkO1xuICAgIHRyYWNrLmlkID0gdHJhY2suaWQgfHwgaWQgKyBcIi10cmFja1wiO1xuICAgIGxpc3QuaWQgPSBsaXN0LmlkIHx8IGlkICsgXCItbGlzdFwiO1xuXG4gICAgaWYgKCFnZXRBdHRyaWJ1dGUocm9vdCwgUk9MRSkgJiYgcm9vdC50YWdOYW1lICE9PSBcIlNFQ1RJT05cIiAmJiByb2xlKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUocm9vdCwgUk9MRSwgcm9sZSk7XG4gICAgfVxuXG4gICAgc2V0QXR0cmlidXRlKHJvb3QsIEFSSUFfUk9MRURFU0NSSVBUSU9OLCBpMThuLmNhcm91c2VsKTtcbiAgICBzZXRBdHRyaWJ1dGUobGlzdCwgUk9MRSwgXCJwcmVzZW50YXRpb25cIik7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kKHNlbGVjdG9yKSB7XG4gICAgdmFyIGVsbSA9IHF1ZXJ5KHJvb3QsIHNlbGVjdG9yKTtcbiAgICByZXR1cm4gZWxtICYmIGNsb3Nlc3QoZWxtLCBcIi5cIiArIENMQVNTX1JPT1QpID09PSByb290ID8gZWxtIDogdm9pZCAwO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2xhc3NlcyhiYXNlKSB7XG4gICAgcmV0dXJuIFtiYXNlICsgXCItLVwiICsgb3B0aW9ucy50eXBlLCBiYXNlICsgXCItLVwiICsgb3B0aW9ucy5kaXJlY3Rpb24sIG9wdGlvbnMuZHJhZyAmJiBiYXNlICsgXCItLWRyYWdnYWJsZVwiLCBvcHRpb25zLmlzTmF2aWdhdGlvbiAmJiBiYXNlICsgXCItLW5hdlwiLCBiYXNlID09PSBDTEFTU19ST09UICYmIENMQVNTX0FDVElWRV07XG4gIH1cblxuICByZXR1cm4gYXNzaWduKGVsZW1lbnRzLCB7XG4gICAgc2V0dXA6IHNldHVwLFxuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95XG4gIH0pO1xufVxuXG52YXIgU0xJREUgPSBcInNsaWRlXCI7XG52YXIgTE9PUCA9IFwibG9vcFwiO1xudmFyIEZBREUgPSBcImZhZGVcIjtcblxuZnVuY3Rpb24gU2xpZGUkMShTcGxpZGUyLCBpbmRleCwgc2xpZGVJbmRleCwgc2xpZGUpIHtcbiAgdmFyIGV2ZW50ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMik7XG4gIHZhciBvbiA9IGV2ZW50Lm9uLFxuICAgICAgZW1pdCA9IGV2ZW50LmVtaXQsXG4gICAgICBiaW5kID0gZXZlbnQuYmluZDtcbiAgdmFyIENvbXBvbmVudHMgPSBTcGxpZGUyLkNvbXBvbmVudHMsXG4gICAgICByb290ID0gU3BsaWRlMi5yb290LFxuICAgICAgb3B0aW9ucyA9IFNwbGlkZTIub3B0aW9ucztcbiAgdmFyIGlzTmF2aWdhdGlvbiA9IG9wdGlvbnMuaXNOYXZpZ2F0aW9uLFxuICAgICAgdXBkYXRlT25Nb3ZlID0gb3B0aW9ucy51cGRhdGVPbk1vdmUsXG4gICAgICBpMThuID0gb3B0aW9ucy5pMThuLFxuICAgICAgcGFnaW5hdGlvbiA9IG9wdGlvbnMucGFnaW5hdGlvbixcbiAgICAgIHNsaWRlRm9jdXMgPSBvcHRpb25zLnNsaWRlRm9jdXM7XG4gIHZhciByZXNvbHZlID0gQ29tcG9uZW50cy5EaXJlY3Rpb24ucmVzb2x2ZTtcbiAgdmFyIHN0eWxlcyA9IGdldEF0dHJpYnV0ZShzbGlkZSwgXCJzdHlsZVwiKTtcbiAgdmFyIGxhYmVsID0gZ2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0xBQkVMKTtcbiAgdmFyIGlzQ2xvbmUgPSBzbGlkZUluZGV4ID4gLTE7XG4gIHZhciBjb250YWluZXIgPSBjaGlsZChzbGlkZSwgXCIuXCIgKyBDTEFTU19DT05UQUlORVIpO1xuICB2YXIgZGVzdHJveWVkO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGlmICghaXNDbG9uZSkge1xuICAgICAgc2xpZGUuaWQgPSByb290LmlkICsgXCItc2xpZGVcIiArIHBhZChpbmRleCArIDEpO1xuICAgICAgc2V0QXR0cmlidXRlKHNsaWRlLCBST0xFLCBwYWdpbmF0aW9uID8gXCJ0YWJwYW5lbFwiIDogXCJncm91cFwiKTtcbiAgICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9ST0xFREVTQ1JJUFRJT04sIGkxOG4uc2xpZGUpO1xuICAgICAgc2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0xBQkVMLCBsYWJlbCB8fCBmb3JtYXQoaTE4bi5zbGlkZUxhYmVsLCBbaW5kZXggKyAxLCBTcGxpZGUyLmxlbmd0aF0pKTtcbiAgICB9XG5cbiAgICBsaXN0ZW4oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3RlbigpIHtcbiAgICBiaW5kKHNsaWRlLCBcImNsaWNrXCIsIGFwcGx5KGVtaXQsIEVWRU5UX0NMSUNLLCBzZWxmKSk7XG4gICAgYmluZChzbGlkZSwgXCJrZXlkb3duXCIsIGFwcGx5KGVtaXQsIEVWRU5UX1NMSURFX0tFWURPV04sIHNlbGYpKTtcbiAgICBvbihbRVZFTlRfTU9WRUQsIEVWRU5UX1NISUZURUQsIEVWRU5UX1NDUk9MTEVEXSwgdXBkYXRlKTtcbiAgICBvbihFVkVOVF9OQVZJR0FUSU9OX01PVU5URUQsIGluaXROYXZpZ2F0aW9uKTtcblxuICAgIGlmICh1cGRhdGVPbk1vdmUpIHtcbiAgICAgIG9uKEVWRU5UX01PVkUsIG9uTW92ZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBkZXN0cm95ZWQgPSB0cnVlO1xuICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgICByZW1vdmVDbGFzcyhzbGlkZSwgU1RBVFVTX0NMQVNTRVMpO1xuICAgIHJlbW92ZUF0dHJpYnV0ZShzbGlkZSwgQUxMX0FUVFJJQlVURVMpO1xuICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgXCJzdHlsZVwiLCBzdHlsZXMpO1xuICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9MQUJFTCwgbGFiZWwgfHwgXCJcIik7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0TmF2aWdhdGlvbigpIHtcbiAgICB2YXIgY29udHJvbHMgPSBTcGxpZGUyLnNwbGlkZXMubWFwKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHZhciBTbGlkZTIgPSB0YXJnZXQuc3BsaWRlLkNvbXBvbmVudHMuU2xpZGVzLmdldEF0KGluZGV4KTtcbiAgICAgIHJldHVybiBTbGlkZTIgPyBTbGlkZTIuc2xpZGUuaWQgOiBcIlwiO1xuICAgIH0pLmpvaW4oXCIgXCIpO1xuICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9MQUJFTCwgZm9ybWF0KGkxOG4uc2xpZGVYLCAoaXNDbG9uZSA/IHNsaWRlSW5kZXggOiBpbmRleCkgKyAxKSk7XG4gICAgc2V0QXR0cmlidXRlKHNsaWRlLCBBUklBX0NPTlRST0xTLCBjb250cm9scyk7XG4gICAgc2V0QXR0cmlidXRlKHNsaWRlLCBST0xFLCBzbGlkZUZvY3VzID8gXCJidXR0b25cIiA6IFwiXCIpO1xuICAgIHNsaWRlRm9jdXMgJiYgcmVtb3ZlQXR0cmlidXRlKHNsaWRlLCBBUklBX1JPTEVERVNDUklQVElPTik7XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdmUoKSB7XG4gICAgaWYgKCFkZXN0cm95ZWQpIHtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBpZiAoIWRlc3Ryb3llZCkge1xuICAgICAgdmFyIGN1cnIgPSBTcGxpZGUyLmluZGV4O1xuICAgICAgdXBkYXRlQWN0aXZpdHkoKTtcbiAgICAgIHVwZGF0ZVZpc2liaWxpdHkoKTtcbiAgICAgIHRvZ2dsZUNsYXNzKHNsaWRlLCBDTEFTU19QUkVWLCBpbmRleCA9PT0gY3VyciAtIDEpO1xuICAgICAgdG9nZ2xlQ2xhc3Moc2xpZGUsIENMQVNTX05FWFQsIGluZGV4ID09PSBjdXJyICsgMSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlQWN0aXZpdHkoKSB7XG4gICAgdmFyIGFjdGl2ZSA9IGlzQWN0aXZlKCk7XG5cbiAgICBpZiAoYWN0aXZlICE9PSBoYXNDbGFzcyhzbGlkZSwgQ0xBU1NfQUNUSVZFKSkge1xuICAgICAgdG9nZ2xlQ2xhc3Moc2xpZGUsIENMQVNTX0FDVElWRSwgYWN0aXZlKTtcbiAgICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9DVVJSRU5ULCBpc05hdmlnYXRpb24gJiYgYWN0aXZlIHx8IFwiXCIpO1xuICAgICAgZW1pdChhY3RpdmUgPyBFVkVOVF9BQ1RJVkUgOiBFVkVOVF9JTkFDVElWRSwgc2VsZik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlVmlzaWJpbGl0eSgpIHtcbiAgICB2YXIgdmlzaWJsZSA9IGlzVmlzaWJsZSgpO1xuICAgIHZhciBoaWRkZW4gPSAhdmlzaWJsZSAmJiAoIWlzQWN0aXZlKCkgfHwgaXNDbG9uZSk7XG5cbiAgICBpZiAoIVNwbGlkZTIuc3RhdGUuaXMoW01PVklORywgU0NST0xMSU5HXSkpIHtcbiAgICAgIHNldEF0dHJpYnV0ZShzbGlkZSwgQVJJQV9ISURERU4sIGhpZGRlbiB8fCBcIlwiKTtcbiAgICB9XG5cbiAgICBzZXRBdHRyaWJ1dGUocXVlcnlBbGwoc2xpZGUsIG9wdGlvbnMuZm9jdXNhYmxlTm9kZXMgfHwgXCJcIiksIFRBQl9JTkRFWCwgaGlkZGVuID8gLTEgOiBcIlwiKTtcblxuICAgIGlmIChzbGlkZUZvY3VzKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUoc2xpZGUsIFRBQl9JTkRFWCwgaGlkZGVuID8gLTEgOiAwKTtcbiAgICB9XG5cbiAgICBpZiAodmlzaWJsZSAhPT0gaGFzQ2xhc3Moc2xpZGUsIENMQVNTX1ZJU0lCTEUpKSB7XG4gICAgICB0b2dnbGVDbGFzcyhzbGlkZSwgQ0xBU1NfVklTSUJMRSwgdmlzaWJsZSk7XG4gICAgICBlbWl0KHZpc2libGUgPyBFVkVOVF9WSVNJQkxFIDogRVZFTlRfSElEREVOLCBzZWxmKTtcbiAgICB9XG5cbiAgICBpZiAoIXZpc2libGUgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gc2xpZGUpIHtcbiAgICAgIHZhciBTbGlkZTIgPSBDb21wb25lbnRzLlNsaWRlcy5nZXRBdChTcGxpZGUyLmluZGV4KTtcbiAgICAgIFNsaWRlMiAmJiBmb2N1cyhTbGlkZTIuc2xpZGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0eWxlJDEocHJvcCwgdmFsdWUsIHVzZUNvbnRhaW5lcikge1xuICAgIHN0eWxlKHVzZUNvbnRhaW5lciAmJiBjb250YWluZXIgfHwgc2xpZGUsIHByb3AsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQWN0aXZlKCkge1xuICAgIHZhciBjdXJyID0gU3BsaWRlMi5pbmRleDtcbiAgICByZXR1cm4gY3VyciA9PT0gaW5kZXggfHwgb3B0aW9ucy5jbG9uZVN0YXR1cyAmJiBjdXJyID09PSBzbGlkZUluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gaXNWaXNpYmxlKCkge1xuICAgIGlmIChTcGxpZGUyLmlzKEZBREUpKSB7XG4gICAgICByZXR1cm4gaXNBY3RpdmUoKTtcbiAgICB9XG5cbiAgICB2YXIgdHJhY2tSZWN0ID0gcmVjdChDb21wb25lbnRzLkVsZW1lbnRzLnRyYWNrKTtcbiAgICB2YXIgc2xpZGVSZWN0ID0gcmVjdChzbGlkZSk7XG4gICAgdmFyIGxlZnQgPSByZXNvbHZlKFwibGVmdFwiLCB0cnVlKTtcbiAgICB2YXIgcmlnaHQgPSByZXNvbHZlKFwicmlnaHRcIiwgdHJ1ZSk7XG4gICAgcmV0dXJuIGZsb29yKHRyYWNrUmVjdFtsZWZ0XSkgPD0gY2VpbChzbGlkZVJlY3RbbGVmdF0pICYmIGZsb29yKHNsaWRlUmVjdFtyaWdodF0pIDw9IGNlaWwodHJhY2tSZWN0W3JpZ2h0XSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1dpdGhpbihmcm9tLCBkaXN0YW5jZSkge1xuICAgIHZhciBkaWZmID0gYWJzKGZyb20gLSBpbmRleCk7XG5cbiAgICBpZiAoIWlzQ2xvbmUgJiYgKG9wdGlvbnMucmV3aW5kIHx8IFNwbGlkZTIuaXMoTE9PUCkpKSB7XG4gICAgICBkaWZmID0gbWluKGRpZmYsIFNwbGlkZTIubGVuZ3RoIC0gZGlmZik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpZmYgPD0gZGlzdGFuY2U7XG4gIH1cblxuICB2YXIgc2VsZiA9IHtcbiAgICBpbmRleDogaW5kZXgsXG4gICAgc2xpZGVJbmRleDogc2xpZGVJbmRleCxcbiAgICBzbGlkZTogc2xpZGUsXG4gICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgaXNDbG9uZTogaXNDbG9uZSxcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICB1cGRhdGU6IHVwZGF0ZSxcbiAgICBzdHlsZTogc3R5bGUkMSxcbiAgICBpc1dpdGhpbjogaXNXaXRoaW5cbiAgfTtcbiAgcmV0dXJuIHNlbGY7XG59XG5cbmZ1bmN0aW9uIFNsaWRlcyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlMiA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2UyLm9uLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTIuZW1pdCxcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2UyLmJpbmQ7XG5cbiAgdmFyIF9Db21wb25lbnRzMiRFbGVtZW50cyA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgc2xpZGVzID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzLnNsaWRlcyxcbiAgICAgIGxpc3QgPSBfQ29tcG9uZW50czIkRWxlbWVudHMubGlzdDtcbiAgdmFyIFNsaWRlczIgPSBbXTtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpbml0KCk7XG4gICAgb24oRVZFTlRfUkVGUkVTSCwgZGVzdHJveSk7XG4gICAgb24oRVZFTlRfUkVGUkVTSCwgaW5pdCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzbGlkZSwgaW5kZXgpIHtcbiAgICAgIHJlZ2lzdGVyKHNsaWRlLCBpbmRleCwgLTEpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBmb3JFYWNoJDEoZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgU2xpZGUyLmRlc3Ryb3koKTtcbiAgICB9KTtcbiAgICBlbXB0eShTbGlkZXMyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBmb3JFYWNoJDEoZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgU2xpZGUyLnVwZGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIoc2xpZGUsIGluZGV4LCBzbGlkZUluZGV4KSB7XG4gICAgdmFyIG9iamVjdCA9IFNsaWRlJDEoU3BsaWRlMiwgaW5kZXgsIHNsaWRlSW5kZXgsIHNsaWRlKTtcbiAgICBvYmplY3QubW91bnQoKTtcbiAgICBTbGlkZXMyLnB1c2gob2JqZWN0KTtcbiAgICBTbGlkZXMyLnNvcnQoZnVuY3Rpb24gKFNsaWRlMSwgU2xpZGUyKSB7XG4gICAgICByZXR1cm4gU2xpZGUxLmluZGV4IC0gU2xpZGUyLmluZGV4O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0KGV4Y2x1ZGVDbG9uZXMpIHtcbiAgICByZXR1cm4gZXhjbHVkZUNsb25lcyA/IGZpbHRlcihmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICByZXR1cm4gIVNsaWRlMi5pc0Nsb25lO1xuICAgIH0pIDogU2xpZGVzMjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluKHBhZ2UpIHtcbiAgICB2YXIgQ29udHJvbGxlciA9IENvbXBvbmVudHMyLkNvbnRyb2xsZXI7XG4gICAgdmFyIGluZGV4ID0gQ29udHJvbGxlci50b0luZGV4KHBhZ2UpO1xuICAgIHZhciBtYXggPSBDb250cm9sbGVyLmhhc0ZvY3VzKCkgPyAxIDogb3B0aW9ucy5wZXJQYWdlO1xuICAgIHJldHVybiBmaWx0ZXIoZnVuY3Rpb24gKFNsaWRlMikge1xuICAgICAgcmV0dXJuIGJldHdlZW4oU2xpZGUyLmluZGV4LCBpbmRleCwgaW5kZXggKyBtYXggLSAxKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEF0KGluZGV4KSB7XG4gICAgcmV0dXJuIGZpbHRlcihpbmRleClbMF07XG4gIH1cblxuICBmdW5jdGlvbiBhZGQoaXRlbXMsIGluZGV4KSB7XG4gICAgZm9yRWFjaChpdGVtcywgZnVuY3Rpb24gKHNsaWRlKSB7XG4gICAgICBpZiAoaXNTdHJpbmcoc2xpZGUpKSB7XG4gICAgICAgIHNsaWRlID0gcGFyc2VIdG1sKHNsaWRlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzSFRNTEVsZW1lbnQoc2xpZGUpKSB7XG4gICAgICAgIHZhciByZWYgPSBzbGlkZXNbaW5kZXhdO1xuICAgICAgICByZWYgPyBiZWZvcmUoc2xpZGUsIHJlZikgOiBhcHBlbmQobGlzdCwgc2xpZGUpO1xuICAgICAgICBhZGRDbGFzcyhzbGlkZSwgb3B0aW9ucy5jbGFzc2VzLnNsaWRlKTtcbiAgICAgICAgb2JzZXJ2ZUltYWdlcyhzbGlkZSwgYXBwbHkoZW1pdCwgRVZFTlRfUkVTSVpFKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZW1pdChFVkVOVF9SRUZSRVNIKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZSQxKG1hdGNoZXIpIHtcbiAgICByZW1vdmUoZmlsdGVyKG1hdGNoZXIpLm1hcChmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICByZXR1cm4gU2xpZGUyLnNsaWRlO1xuICAgIH0pKTtcbiAgICBlbWl0KEVWRU5UX1JFRlJFU0gpO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9yRWFjaCQxKGl0ZXJhdGVlLCBleGNsdWRlQ2xvbmVzKSB7XG4gICAgZ2V0KGV4Y2x1ZGVDbG9uZXMpLmZvckVhY2goaXRlcmF0ZWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlsdGVyKG1hdGNoZXIpIHtcbiAgICByZXR1cm4gU2xpZGVzMi5maWx0ZXIoaXNGdW5jdGlvbihtYXRjaGVyKSA/IG1hdGNoZXIgOiBmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICByZXR1cm4gaXNTdHJpbmcobWF0Y2hlcikgPyBtYXRjaGVzKFNsaWRlMi5zbGlkZSwgbWF0Y2hlcikgOiBpbmNsdWRlcyh0b0FycmF5KG1hdGNoZXIpLCBTbGlkZTIuaW5kZXgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gc3R5bGUocHJvcCwgdmFsdWUsIHVzZUNvbnRhaW5lcikge1xuICAgIGZvckVhY2gkMShmdW5jdGlvbiAoU2xpZGUyKSB7XG4gICAgICBTbGlkZTIuc3R5bGUocHJvcCwgdmFsdWUsIHVzZUNvbnRhaW5lcik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvYnNlcnZlSW1hZ2VzKGVsbSwgY2FsbGJhY2spIHtcbiAgICB2YXIgaW1hZ2VzID0gcXVlcnlBbGwoZWxtLCBcImltZ1wiKTtcbiAgICB2YXIgbGVuZ3RoID0gaW1hZ2VzLmxlbmd0aDtcblxuICAgIGlmIChsZW5ndGgpIHtcbiAgICAgIGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbWcpIHtcbiAgICAgICAgYmluZChpbWcsIFwibG9hZCBlcnJvclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCEgLS1sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExlbmd0aChleGNsdWRlQ2xvbmVzKSB7XG4gICAgcmV0dXJuIGV4Y2x1ZGVDbG9uZXMgPyBzbGlkZXMubGVuZ3RoIDogU2xpZGVzMi5sZW5ndGg7XG4gIH1cblxuICBmdW5jdGlvbiBpc0Vub3VnaCgpIHtcbiAgICByZXR1cm4gU2xpZGVzMi5sZW5ndGggPiBvcHRpb25zLnBlclBhZ2U7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgIHJlZ2lzdGVyOiByZWdpc3RlcixcbiAgICBnZXQ6IGdldCxcbiAgICBnZXRJbjogZ2V0SW4sXG4gICAgZ2V0QXQ6IGdldEF0LFxuICAgIGFkZDogYWRkLFxuICAgIHJlbW92ZTogcmVtb3ZlJDEsXG4gICAgZm9yRWFjaDogZm9yRWFjaCQxLFxuICAgIGZpbHRlcjogZmlsdGVyLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICBnZXRMZW5ndGg6IGdldExlbmd0aCxcbiAgICBpc0Vub3VnaDogaXNFbm91Z2hcbiAgfTtcbn1cblxuZnVuY3Rpb24gTGF5b3V0KFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2UzID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTMub24sXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlMy5iaW5kLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTMuZW1pdDtcblxuICB2YXIgU2xpZGVzID0gQ29tcG9uZW50czIuU2xpZGVzO1xuICB2YXIgcmVzb2x2ZSA9IENvbXBvbmVudHMyLkRpcmVjdGlvbi5yZXNvbHZlO1xuICB2YXIgX0NvbXBvbmVudHMyJEVsZW1lbnRzMiA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgcm9vdCA9IF9Db21wb25lbnRzMiRFbGVtZW50czIucm9vdCxcbiAgICAgIHRyYWNrID0gX0NvbXBvbmVudHMyJEVsZW1lbnRzMi50cmFjayxcbiAgICAgIGxpc3QgPSBfQ29tcG9uZW50czIkRWxlbWVudHMyLmxpc3Q7XG4gIHZhciBnZXRBdCA9IFNsaWRlcy5nZXRBdCxcbiAgICAgIHN0eWxlU2xpZGVzID0gU2xpZGVzLnN0eWxlO1xuICB2YXIgdmVydGljYWw7XG4gIHZhciByb290UmVjdDtcbiAgdmFyIG92ZXJmbG93O1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGluaXQoKTtcbiAgICBiaW5kKHdpbmRvdywgXCJyZXNpemUgbG9hZFwiLCBUaHJvdHRsZShhcHBseShlbWl0LCBFVkVOVF9SRVNJWkUpKSk7XG4gICAgb24oW0VWRU5UX1VQREFURUQsIEVWRU5UX1JFRlJFU0hdLCBpbml0KTtcbiAgICBvbihFVkVOVF9SRVNJWkUsIHJlc2l6ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZlcnRpY2FsID0gb3B0aW9ucy5kaXJlY3Rpb24gPT09IFRUQjtcbiAgICBzdHlsZShyb290LCBcIm1heFdpZHRoXCIsIHVuaXQob3B0aW9ucy53aWR0aCkpO1xuICAgIHN0eWxlKHRyYWNrLCByZXNvbHZlKFwicGFkZGluZ0xlZnRcIiksIGNzc1BhZGRpbmcoZmFsc2UpKTtcbiAgICBzdHlsZSh0cmFjaywgcmVzb2x2ZShcInBhZGRpbmdSaWdodFwiKSwgY3NzUGFkZGluZyh0cnVlKSk7XG4gICAgcmVzaXplKHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzaXplKGZvcmNlKSB7XG4gICAgdmFyIG5ld1JlY3QgPSByZWN0KHJvb3QpO1xuXG4gICAgaWYgKGZvcmNlIHx8IHJvb3RSZWN0LndpZHRoICE9PSBuZXdSZWN0LndpZHRoIHx8IHJvb3RSZWN0LmhlaWdodCAhPT0gbmV3UmVjdC5oZWlnaHQpIHtcbiAgICAgIHN0eWxlKHRyYWNrLCBcImhlaWdodFwiLCBjc3NUcmFja0hlaWdodCgpKTtcbiAgICAgIHN0eWxlU2xpZGVzKHJlc29sdmUoXCJtYXJnaW5SaWdodFwiKSwgdW5pdChvcHRpb25zLmdhcCkpO1xuICAgICAgc3R5bGVTbGlkZXMoXCJ3aWR0aFwiLCBjc3NTbGlkZVdpZHRoKCkpO1xuICAgICAgc3R5bGVTbGlkZXMoXCJoZWlnaHRcIiwgY3NzU2xpZGVIZWlnaHQoKSwgdHJ1ZSk7XG4gICAgICByb290UmVjdCA9IG5ld1JlY3Q7XG4gICAgICBlbWl0KEVWRU5UX1JFU0laRUQpO1xuXG4gICAgICBpZiAob3ZlcmZsb3cgIT09IChvdmVyZmxvdyA9IGlzT3ZlcmZsb3coKSkpIHtcbiAgICAgICAgdG9nZ2xlQ2xhc3Mocm9vdCwgQ0xBU1NfT1ZFUkZMT1csIG92ZXJmbG93KTtcbiAgICAgICAgZW1pdChFVkVOVF9PVkVSRkxPVywgb3ZlcmZsb3cpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNzc1BhZGRpbmcocmlnaHQpIHtcbiAgICB2YXIgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZztcbiAgICB2YXIgcHJvcCA9IHJlc29sdmUocmlnaHQgPyBcInJpZ2h0XCIgOiBcImxlZnRcIik7XG4gICAgcmV0dXJuIHBhZGRpbmcgJiYgdW5pdChwYWRkaW5nW3Byb3BdIHx8IChpc09iamVjdChwYWRkaW5nKSA/IDAgOiBwYWRkaW5nKSkgfHwgXCIwcHhcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNzc1RyYWNrSGVpZ2h0KCkge1xuICAgIHZhciBoZWlnaHQgPSBcIlwiO1xuXG4gICAgaWYgKHZlcnRpY2FsKSB7XG4gICAgICBoZWlnaHQgPSBjc3NIZWlnaHQoKTtcbiAgICAgIGFzc2VydChoZWlnaHQsIFwiaGVpZ2h0IG9yIGhlaWdodFJhdGlvIGlzIG1pc3NpbmcuXCIpO1xuICAgICAgaGVpZ2h0ID0gXCJjYWxjKFwiICsgaGVpZ2h0ICsgXCIgLSBcIiArIGNzc1BhZGRpbmcoZmFsc2UpICsgXCIgLSBcIiArIGNzc1BhZGRpbmcodHJ1ZSkgKyBcIilcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gaGVpZ2h0O1xuICB9XG5cbiAgZnVuY3Rpb24gY3NzSGVpZ2h0KCkge1xuICAgIHJldHVybiB1bml0KG9wdGlvbnMuaGVpZ2h0IHx8IHJlY3QobGlzdCkud2lkdGggKiBvcHRpb25zLmhlaWdodFJhdGlvKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNzc1NsaWRlV2lkdGgoKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuYXV0b1dpZHRoID8gbnVsbCA6IHVuaXQob3B0aW9ucy5maXhlZFdpZHRoKSB8fCAodmVydGljYWwgPyBcIlwiIDogY3NzU2xpZGVTaXplKCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3NzU2xpZGVIZWlnaHQoKSB7XG4gICAgcmV0dXJuIHVuaXQob3B0aW9ucy5maXhlZEhlaWdodCkgfHwgKHZlcnRpY2FsID8gb3B0aW9ucy5hdXRvSGVpZ2h0ID8gbnVsbCA6IGNzc1NsaWRlU2l6ZSgpIDogY3NzSGVpZ2h0KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3NzU2xpZGVTaXplKCkge1xuICAgIHZhciBnYXAgPSB1bml0KG9wdGlvbnMuZ2FwKTtcbiAgICByZXR1cm4gXCJjYWxjKCgxMDAlXCIgKyAoZ2FwICYmIFwiICsgXCIgKyBnYXApICsgXCIpL1wiICsgKG9wdGlvbnMucGVyUGFnZSB8fCAxKSArIChnYXAgJiYgXCIgLSBcIiArIGdhcCkgKyBcIilcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3RTaXplKCkge1xuICAgIHJldHVybiByZWN0KGxpc3QpW3Jlc29sdmUoXCJ3aWR0aFwiKV07XG4gIH1cblxuICBmdW5jdGlvbiBzbGlkZVNpemUoaW5kZXgsIHdpdGhvdXRHYXApIHtcbiAgICB2YXIgU2xpZGUgPSBnZXRBdChpbmRleCB8fCAwKTtcbiAgICByZXR1cm4gU2xpZGUgPyByZWN0KFNsaWRlLnNsaWRlKVtyZXNvbHZlKFwid2lkdGhcIildICsgKHdpdGhvdXRHYXAgPyAwIDogZ2V0R2FwKCkpIDogMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvdGFsU2l6ZShpbmRleCwgd2l0aG91dEdhcCkge1xuICAgIHZhciBTbGlkZSA9IGdldEF0KGluZGV4KTtcblxuICAgIGlmIChTbGlkZSkge1xuICAgICAgdmFyIHJpZ2h0ID0gcmVjdChTbGlkZS5zbGlkZSlbcmVzb2x2ZShcInJpZ2h0XCIpXTtcbiAgICAgIHZhciBsZWZ0ID0gcmVjdChsaXN0KVtyZXNvbHZlKFwibGVmdFwiKV07XG4gICAgICByZXR1cm4gYWJzKHJpZ2h0IC0gbGVmdCkgKyAod2l0aG91dEdhcCA/IDAgOiBnZXRHYXAoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBmdW5jdGlvbiBzbGlkZXJTaXplKHdpdGhvdXRHYXApIHtcbiAgICByZXR1cm4gdG90YWxTaXplKFNwbGlkZTIubGVuZ3RoIC0gMSkgLSB0b3RhbFNpemUoMCkgKyBzbGlkZVNpemUoMCwgd2l0aG91dEdhcCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRHYXAoKSB7XG4gICAgdmFyIFNsaWRlID0gZ2V0QXQoMCk7XG4gICAgcmV0dXJuIFNsaWRlICYmIHBhcnNlRmxvYXQoc3R5bGUoU2xpZGUuc2xpZGUsIHJlc29sdmUoXCJtYXJnaW5SaWdodFwiKSkpIHx8IDA7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQYWRkaW5nKHJpZ2h0KSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoc3R5bGUodHJhY2ssIHJlc29sdmUoXCJwYWRkaW5nXCIgKyAocmlnaHQgPyBcIlJpZ2h0XCIgOiBcIkxlZnRcIikpKSkgfHwgMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzT3ZlcmZsb3coKSB7XG4gICAgcmV0dXJuIFNwbGlkZTIuaXMoRkFERSkgfHwgc2xpZGVyU2l6ZSh0cnVlKSA+IGxpc3RTaXplKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICByZXNpemU6IHJlc2l6ZSxcbiAgICBsaXN0U2l6ZTogbGlzdFNpemUsXG4gICAgc2xpZGVTaXplOiBzbGlkZVNpemUsXG4gICAgc2xpZGVyU2l6ZTogc2xpZGVyU2l6ZSxcbiAgICB0b3RhbFNpemU6IHRvdGFsU2l6ZSxcbiAgICBnZXRQYWRkaW5nOiBnZXRQYWRkaW5nLFxuICAgIGlzT3ZlcmZsb3c6IGlzT3ZlcmZsb3dcbiAgfTtcbn1cblxudmFyIE1VTFRJUExJRVIgPSAyO1xuXG5mdW5jdGlvbiBDbG9uZXMoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIGV2ZW50ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMik7XG4gIHZhciBvbiA9IGV2ZW50Lm9uO1xuICB2YXIgRWxlbWVudHMgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIFNsaWRlcyA9IENvbXBvbmVudHMyLlNsaWRlcztcbiAgdmFyIHJlc29sdmUgPSBDb21wb25lbnRzMi5EaXJlY3Rpb24ucmVzb2x2ZTtcbiAgdmFyIGNsb25lcyA9IFtdO1xuICB2YXIgY2xvbmVDb3VudDtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBvbihFVkVOVF9SRUZSRVNILCByZW1vdW50KTtcbiAgICBvbihbRVZFTlRfVVBEQVRFRCwgRVZFTlRfUkVTSVpFXSwgb2JzZXJ2ZSk7XG5cbiAgICBpZiAoY2xvbmVDb3VudCA9IGNvbXB1dGVDbG9uZUNvdW50KCkpIHtcbiAgICAgIGdlbmVyYXRlKGNsb25lQ291bnQpO1xuICAgICAgQ29tcG9uZW50czIuTGF5b3V0LnJlc2l6ZSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdW50KCkge1xuICAgIGRlc3Ryb3koKTtcbiAgICBtb3VudCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICByZW1vdmUoY2xvbmVzKTtcbiAgICBlbXB0eShjbG9uZXMpO1xuICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmUoKSB7XG4gICAgdmFyIGNvdW50ID0gY29tcHV0ZUNsb25lQ291bnQoKTtcblxuICAgIGlmIChjbG9uZUNvdW50ICE9PSBjb3VudCkge1xuICAgICAgaWYgKGNsb25lQ291bnQgPCBjb3VudCB8fCAhY291bnQpIHtcbiAgICAgICAgZXZlbnQuZW1pdChFVkVOVF9SRUZSRVNIKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZW5lcmF0ZShjb3VudCkge1xuICAgIHZhciBzbGlkZXMgPSBTbGlkZXMuZ2V0KCkuc2xpY2UoKTtcbiAgICB2YXIgbGVuZ3RoID0gc2xpZGVzLmxlbmd0aDtcblxuICAgIGlmIChsZW5ndGgpIHtcbiAgICAgIHdoaWxlIChzbGlkZXMubGVuZ3RoIDwgY291bnQpIHtcbiAgICAgICAgcHVzaChzbGlkZXMsIHNsaWRlcyk7XG4gICAgICB9XG5cbiAgICAgIHB1c2goc2xpZGVzLnNsaWNlKC1jb3VudCksIHNsaWRlcy5zbGljZSgwLCBjb3VudCkpLmZvckVhY2goZnVuY3Rpb24gKFNsaWRlLCBpbmRleCkge1xuICAgICAgICB2YXIgaXNIZWFkID0gaW5kZXggPCBjb3VudDtcbiAgICAgICAgdmFyIGNsb25lID0gY2xvbmVEZWVwKFNsaWRlLnNsaWRlLCBpbmRleCk7XG4gICAgICAgIGlzSGVhZCA/IGJlZm9yZShjbG9uZSwgc2xpZGVzWzBdLnNsaWRlKSA6IGFwcGVuZChFbGVtZW50cy5saXN0LCBjbG9uZSk7XG4gICAgICAgIHB1c2goY2xvbmVzLCBjbG9uZSk7XG4gICAgICAgIFNsaWRlcy5yZWdpc3RlcihjbG9uZSwgaW5kZXggLSBjb3VudCArIChpc0hlYWQgPyAwIDogbGVuZ3RoKSwgU2xpZGUuaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xvbmVEZWVwKGVsbSwgaW5kZXgpIHtcbiAgICB2YXIgY2xvbmUgPSBlbG0uY2xvbmVOb2RlKHRydWUpO1xuICAgIGFkZENsYXNzKGNsb25lLCBvcHRpb25zLmNsYXNzZXMuY2xvbmUpO1xuICAgIGNsb25lLmlkID0gU3BsaWRlMi5yb290LmlkICsgXCItY2xvbmVcIiArIHBhZChpbmRleCArIDEpO1xuICAgIHJldHVybiBjbG9uZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVDbG9uZUNvdW50KCkge1xuICAgIHZhciBjbG9uZXMyID0gb3B0aW9ucy5jbG9uZXM7XG5cbiAgICBpZiAoIVNwbGlkZTIuaXMoTE9PUCkpIHtcbiAgICAgIGNsb25lczIgPSAwO1xuICAgIH0gZWxzZSBpZiAoaXNVbmRlZmluZWQoY2xvbmVzMikpIHtcbiAgICAgIHZhciBmaXhlZFNpemUgPSBvcHRpb25zW3Jlc29sdmUoXCJmaXhlZFdpZHRoXCIpXSAmJiBDb21wb25lbnRzMi5MYXlvdXQuc2xpZGVTaXplKDApO1xuICAgICAgdmFyIGZpeGVkQ291bnQgPSBmaXhlZFNpemUgJiYgY2VpbChyZWN0KEVsZW1lbnRzLnRyYWNrKVtyZXNvbHZlKFwid2lkdGhcIildIC8gZml4ZWRTaXplKTtcbiAgICAgIGNsb25lczIgPSBmaXhlZENvdW50IHx8IG9wdGlvbnNbcmVzb2x2ZShcImF1dG9XaWR0aFwiKV0gJiYgU3BsaWRlMi5sZW5ndGggfHwgb3B0aW9ucy5wZXJQYWdlICogTVVMVElQTElFUjtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmVzMjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3lcbiAgfTtcbn1cblxuZnVuY3Rpb24gTW92ZShTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlNCA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2U0Lm9uLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTQuZW1pdDtcblxuICB2YXIgc2V0ID0gU3BsaWRlMi5zdGF0ZS5zZXQ7XG4gIHZhciBfQ29tcG9uZW50czIkTGF5b3V0ID0gQ29tcG9uZW50czIuTGF5b3V0LFxuICAgICAgc2xpZGVTaXplID0gX0NvbXBvbmVudHMyJExheW91dC5zbGlkZVNpemUsXG4gICAgICBnZXRQYWRkaW5nID0gX0NvbXBvbmVudHMyJExheW91dC5nZXRQYWRkaW5nLFxuICAgICAgdG90YWxTaXplID0gX0NvbXBvbmVudHMyJExheW91dC50b3RhbFNpemUsXG4gICAgICBsaXN0U2l6ZSA9IF9Db21wb25lbnRzMiRMYXlvdXQubGlzdFNpemUsXG4gICAgICBzbGlkZXJTaXplID0gX0NvbXBvbmVudHMyJExheW91dC5zbGlkZXJTaXplO1xuICB2YXIgX0NvbXBvbmVudHMyJERpcmVjdGlvID0gQ29tcG9uZW50czIuRGlyZWN0aW9uLFxuICAgICAgcmVzb2x2ZSA9IF9Db21wb25lbnRzMiREaXJlY3Rpby5yZXNvbHZlLFxuICAgICAgb3JpZW50ID0gX0NvbXBvbmVudHMyJERpcmVjdGlvLm9yaWVudDtcbiAgdmFyIF9Db21wb25lbnRzMiRFbGVtZW50czMgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIGxpc3QgPSBfQ29tcG9uZW50czIkRWxlbWVudHMzLmxpc3QsXG4gICAgICB0cmFjayA9IF9Db21wb25lbnRzMiRFbGVtZW50czMudHJhY2s7XG4gIHZhciBUcmFuc2l0aW9uO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIFRyYW5zaXRpb24gPSBDb21wb25lbnRzMi5UcmFuc2l0aW9uO1xuICAgIG9uKFtFVkVOVF9NT1VOVEVELCBFVkVOVF9SRVNJWkVELCBFVkVOVF9VUERBVEVELCBFVkVOVF9SRUZSRVNIXSwgcmVwb3NpdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiByZXBvc2l0aW9uKCkge1xuICAgIGlmICghQ29tcG9uZW50czIuQ29udHJvbGxlci5pc0J1c3koKSkge1xuICAgICAgQ29tcG9uZW50czIuU2Nyb2xsLmNhbmNlbCgpO1xuICAgICAganVtcChTcGxpZGUyLmluZGV4KTtcbiAgICAgIENvbXBvbmVudHMyLlNsaWRlcy51cGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlKGRlc3QsIGluZGV4LCBwcmV2LCBjYWxsYmFjaykge1xuICAgIGlmIChkZXN0ICE9PSBpbmRleCAmJiBjYW5TaGlmdChkZXN0ID4gcHJldikpIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgICAgdHJhbnNsYXRlKHNoaWZ0KGdldFBvc2l0aW9uKCksIGRlc3QgPiBwcmV2KSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgc2V0KE1PVklORyk7XG4gICAgZW1pdChFVkVOVF9NT1ZFLCBpbmRleCwgcHJldiwgZGVzdCk7XG4gICAgVHJhbnNpdGlvbi5zdGFydChpbmRleCwgZnVuY3Rpb24gKCkge1xuICAgICAgc2V0KElETEUpO1xuICAgICAgZW1pdChFVkVOVF9NT1ZFRCwgaW5kZXgsIHByZXYsIGRlc3QpO1xuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGp1bXAoaW5kZXgpIHtcbiAgICB0cmFuc2xhdGUodG9Qb3NpdGlvbihpbmRleCwgdHJ1ZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNsYXRlKHBvc2l0aW9uLCBwcmV2ZW50TG9vcCkge1xuICAgIGlmICghU3BsaWRlMi5pcyhGQURFKSkge1xuICAgICAgdmFyIGRlc3RpbmF0aW9uID0gcHJldmVudExvb3AgPyBwb3NpdGlvbiA6IGxvb3AocG9zaXRpb24pO1xuICAgICAgc3R5bGUobGlzdCwgXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGVcIiArIHJlc29sdmUoXCJYXCIpICsgXCIoXCIgKyBkZXN0aW5hdGlvbiArIFwicHgpXCIpO1xuICAgICAgcG9zaXRpb24gIT09IGRlc3RpbmF0aW9uICYmIGVtaXQoRVZFTlRfU0hJRlRFRCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9vcChwb3NpdGlvbikge1xuICAgIGlmIChTcGxpZGUyLmlzKExPT1ApKSB7XG4gICAgICB2YXIgaW5kZXggPSB0b0luZGV4KHBvc2l0aW9uKTtcbiAgICAgIHZhciBleGNlZWRlZE1heCA9IGluZGV4ID4gQ29tcG9uZW50czIuQ29udHJvbGxlci5nZXRFbmQoKTtcbiAgICAgIHZhciBleGNlZWRlZE1pbiA9IGluZGV4IDwgMDtcblxuICAgICAgaWYgKGV4Y2VlZGVkTWluIHx8IGV4Y2VlZGVkTWF4KSB7XG4gICAgICAgIHBvc2l0aW9uID0gc2hpZnQocG9zaXRpb24sIGV4Y2VlZGVkTWF4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBzaGlmdChwb3NpdGlvbiwgYmFja3dhcmRzKSB7XG4gICAgdmFyIGV4Y2VzcyA9IHBvc2l0aW9uIC0gZ2V0TGltaXQoYmFja3dhcmRzKTtcbiAgICB2YXIgc2l6ZSA9IHNsaWRlclNpemUoKTtcbiAgICBwb3NpdGlvbiAtPSBvcmllbnQoc2l6ZSAqIChjZWlsKGFicyhleGNlc3MpIC8gc2l6ZSkgfHwgMSkpICogKGJhY2t3YXJkcyA/IDEgOiAtMSk7XG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIHRyYW5zbGF0ZShnZXRQb3NpdGlvbigpLCB0cnVlKTtcbiAgICBUcmFuc2l0aW9uLmNhbmNlbCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9JbmRleChwb3NpdGlvbikge1xuICAgIHZhciBTbGlkZXMgPSBDb21wb25lbnRzMi5TbGlkZXMuZ2V0KCk7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgbWluRGlzdGFuY2UgPSBJbmZpbml0eTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgU2xpZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc2xpZGVJbmRleCA9IFNsaWRlc1tpXS5pbmRleDtcbiAgICAgIHZhciBkaXN0YW5jZSA9IGFicyh0b1Bvc2l0aW9uKHNsaWRlSW5kZXgsIHRydWUpIC0gcG9zaXRpb24pO1xuXG4gICAgICBpZiAoZGlzdGFuY2UgPD0gbWluRGlzdGFuY2UpIHtcbiAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgaW5kZXggPSBzbGlkZUluZGV4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gdG9Qb3NpdGlvbihpbmRleCwgdHJpbW1pbmcpIHtcbiAgICB2YXIgcG9zaXRpb24gPSBvcmllbnQodG90YWxTaXplKGluZGV4IC0gMSkgLSBvZmZzZXQoaW5kZXgpKTtcbiAgICByZXR1cm4gdHJpbW1pbmcgPyB0cmltKHBvc2l0aW9uKSA6IHBvc2l0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UG9zaXRpb24oKSB7XG4gICAgdmFyIGxlZnQgPSByZXNvbHZlKFwibGVmdFwiKTtcbiAgICByZXR1cm4gcmVjdChsaXN0KVtsZWZ0XSAtIHJlY3QodHJhY2spW2xlZnRdICsgb3JpZW50KGdldFBhZGRpbmcoZmFsc2UpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaW0ocG9zaXRpb24pIHtcbiAgICBpZiAob3B0aW9ucy50cmltU3BhY2UgJiYgU3BsaWRlMi5pcyhTTElERSkpIHtcbiAgICAgIHBvc2l0aW9uID0gY2xhbXAocG9zaXRpb24sIDAsIG9yaWVudChzbGlkZXJTaXplKHRydWUpIC0gbGlzdFNpemUoKSkpO1xuICAgIH1cblxuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9mZnNldChpbmRleCkge1xuICAgIHZhciBmb2N1cyA9IG9wdGlvbnMuZm9jdXM7XG4gICAgcmV0dXJuIGZvY3VzID09PSBcImNlbnRlclwiID8gKGxpc3RTaXplKCkgLSBzbGlkZVNpemUoaW5kZXgsIHRydWUpKSAvIDIgOiArZm9jdXMgKiBzbGlkZVNpemUoaW5kZXgpIHx8IDA7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRMaW1pdChtYXgpIHtcbiAgICByZXR1cm4gdG9Qb3NpdGlvbihtYXggPyBDb21wb25lbnRzMi5Db250cm9sbGVyLmdldEVuZCgpIDogMCwgISFvcHRpb25zLnRyaW1TcGFjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TaGlmdChiYWNrd2FyZHMpIHtcbiAgICB2YXIgc2hpZnRlZCA9IG9yaWVudChzaGlmdChnZXRQb3NpdGlvbigpLCBiYWNrd2FyZHMpKTtcbiAgICByZXR1cm4gYmFja3dhcmRzID8gc2hpZnRlZCA+PSAwIDogc2hpZnRlZCA8PSBsaXN0W3Jlc29sdmUoXCJzY3JvbGxXaWR0aFwiKV0gLSByZWN0KHRyYWNrKVtyZXNvbHZlKFwid2lkdGhcIildO1xuICB9XG5cbiAgZnVuY3Rpb24gZXhjZWVkZWRMaW1pdChtYXgsIHBvc2l0aW9uKSB7XG4gICAgcG9zaXRpb24gPSBpc1VuZGVmaW5lZChwb3NpdGlvbikgPyBnZXRQb3NpdGlvbigpIDogcG9zaXRpb247XG4gICAgdmFyIGV4Y2VlZGVkTWluID0gbWF4ICE9PSB0cnVlICYmIG9yaWVudChwb3NpdGlvbikgPCBvcmllbnQoZ2V0TGltaXQoZmFsc2UpKTtcbiAgICB2YXIgZXhjZWVkZWRNYXggPSBtYXggIT09IGZhbHNlICYmIG9yaWVudChwb3NpdGlvbikgPiBvcmllbnQoZ2V0TGltaXQodHJ1ZSkpO1xuICAgIHJldHVybiBleGNlZWRlZE1pbiB8fCBleGNlZWRlZE1heDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIG1vdmU6IG1vdmUsXG4gICAganVtcDoganVtcCxcbiAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZSxcbiAgICBzaGlmdDogc2hpZnQsXG4gICAgY2FuY2VsOiBjYW5jZWwsXG4gICAgdG9JbmRleDogdG9JbmRleCxcbiAgICB0b1Bvc2l0aW9uOiB0b1Bvc2l0aW9uLFxuICAgIGdldFBvc2l0aW9uOiBnZXRQb3NpdGlvbixcbiAgICBnZXRMaW1pdDogZ2V0TGltaXQsXG4gICAgZXhjZWVkZWRMaW1pdDogZXhjZWVkZWRMaW1pdCxcbiAgICByZXBvc2l0aW9uOiByZXBvc2l0aW9uXG4gIH07XG59XG5cbmZ1bmN0aW9uIENvbnRyb2xsZXIoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTUgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlNS5vbixcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2U1LmVtaXQ7XG5cbiAgdmFyIE1vdmUgPSBDb21wb25lbnRzMi5Nb3ZlO1xuICB2YXIgZ2V0UG9zaXRpb24gPSBNb3ZlLmdldFBvc2l0aW9uLFxuICAgICAgZ2V0TGltaXQgPSBNb3ZlLmdldExpbWl0LFxuICAgICAgdG9Qb3NpdGlvbiA9IE1vdmUudG9Qb3NpdGlvbjtcbiAgdmFyIF9Db21wb25lbnRzMiRTbGlkZXMgPSBDb21wb25lbnRzMi5TbGlkZXMsXG4gICAgICBpc0Vub3VnaCA9IF9Db21wb25lbnRzMiRTbGlkZXMuaXNFbm91Z2gsXG4gICAgICBnZXRMZW5ndGggPSBfQ29tcG9uZW50czIkU2xpZGVzLmdldExlbmd0aDtcbiAgdmFyIG9taXRFbmQgPSBvcHRpb25zLm9taXRFbmQ7XG4gIHZhciBpc0xvb3AgPSBTcGxpZGUyLmlzKExPT1ApO1xuICB2YXIgaXNTbGlkZSA9IFNwbGlkZTIuaXMoU0xJREUpO1xuICB2YXIgZ2V0TmV4dCA9IGFwcGx5KGdldEFkamFjZW50LCBmYWxzZSk7XG4gIHZhciBnZXRQcmV2ID0gYXBwbHkoZ2V0QWRqYWNlbnQsIHRydWUpO1xuICB2YXIgY3VyckluZGV4ID0gb3B0aW9ucy5zdGFydCB8fCAwO1xuICB2YXIgZW5kSW5kZXg7XG4gIHZhciBwcmV2SW5kZXggPSBjdXJySW5kZXg7XG4gIHZhciBzbGlkZUNvdW50O1xuICB2YXIgcGVyTW92ZTtcbiAgdmFyIHBlclBhZ2U7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaW5pdCgpO1xuICAgIG9uKFtFVkVOVF9VUERBVEVELCBFVkVOVF9SRUZSRVNILCBFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRF0sIGluaXQpO1xuICAgIG9uKEVWRU5UX1JFU0laRUQsIG9uUmVzaXplZCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHNsaWRlQ291bnQgPSBnZXRMZW5ndGgodHJ1ZSk7XG4gICAgcGVyTW92ZSA9IG9wdGlvbnMucGVyTW92ZTtcbiAgICBwZXJQYWdlID0gb3B0aW9ucy5wZXJQYWdlO1xuICAgIGVuZEluZGV4ID0gZ2V0RW5kKCk7XG4gICAgdmFyIGluZGV4ID0gY2xhbXAoY3VyckluZGV4LCAwLCBvbWl0RW5kID8gZW5kSW5kZXggOiBzbGlkZUNvdW50IC0gMSk7XG5cbiAgICBpZiAoaW5kZXggIT09IGN1cnJJbmRleCkge1xuICAgICAgY3VyckluZGV4ID0gaW5kZXg7XG4gICAgICBNb3ZlLnJlcG9zaXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblJlc2l6ZWQoKSB7XG4gICAgaWYgKGVuZEluZGV4ICE9PSBnZXRFbmQoKSkge1xuICAgICAgZW1pdChFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ28oY29udHJvbCwgYWxsb3dTYW1lSW5kZXgsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFpc0J1c3koKSkge1xuICAgICAgdmFyIGRlc3QgPSBwYXJzZShjb250cm9sKTtcbiAgICAgIHZhciBpbmRleCA9IGxvb3AoZGVzdCk7XG5cbiAgICAgIGlmIChpbmRleCA+IC0xICYmIChhbGxvd1NhbWVJbmRleCB8fCBpbmRleCAhPT0gY3VyckluZGV4KSkge1xuICAgICAgICBzZXRJbmRleChpbmRleCk7XG4gICAgICAgIE1vdmUubW92ZShkZXN0LCBpbmRleCwgcHJldkluZGV4LCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc25hcCwgY2FsbGJhY2spIHtcbiAgICBDb21wb25lbnRzMi5TY3JvbGwuc2Nyb2xsKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc25hcCwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGluZGV4ID0gbG9vcChNb3ZlLnRvSW5kZXgoZ2V0UG9zaXRpb24oKSkpO1xuICAgICAgc2V0SW5kZXgob21pdEVuZCA/IG1pbihpbmRleCwgZW5kSW5kZXgpIDogaW5kZXgpO1xuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlKGNvbnRyb2wpIHtcbiAgICB2YXIgaW5kZXggPSBjdXJySW5kZXg7XG5cbiAgICBpZiAoaXNTdHJpbmcoY29udHJvbCkpIHtcbiAgICAgIHZhciBfcmVmID0gY29udHJvbC5tYXRjaCgvKFsrXFwtPD5dKShcXGQrKT8vKSB8fCBbXSxcbiAgICAgICAgICBpbmRpY2F0b3IgPSBfcmVmWzFdLFxuICAgICAgICAgIG51bWJlciA9IF9yZWZbMl07XG5cbiAgICAgIGlmIChpbmRpY2F0b3IgPT09IFwiK1wiIHx8IGluZGljYXRvciA9PT0gXCItXCIpIHtcbiAgICAgICAgaW5kZXggPSBjb21wdXRlRGVzdEluZGV4KGN1cnJJbmRleCArICsoXCJcIiArIGluZGljYXRvciArICgrbnVtYmVyIHx8IDEpKSwgY3VyckluZGV4KTtcbiAgICAgIH0gZWxzZSBpZiAoaW5kaWNhdG9yID09PSBcIj5cIikge1xuICAgICAgICBpbmRleCA9IG51bWJlciA/IHRvSW5kZXgoK251bWJlcikgOiBnZXROZXh0KHRydWUpO1xuICAgICAgfSBlbHNlIGlmIChpbmRpY2F0b3IgPT09IFwiPFwiKSB7XG4gICAgICAgIGluZGV4ID0gZ2V0UHJldih0cnVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXggPSBpc0xvb3AgPyBjb250cm9sIDogY2xhbXAoY29udHJvbCwgMCwgZW5kSW5kZXgpO1xuICAgIH1cblxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEFkamFjZW50KHByZXYsIGRlc3RpbmF0aW9uKSB7XG4gICAgdmFyIG51bWJlciA9IHBlck1vdmUgfHwgKGhhc0ZvY3VzKCkgPyAxIDogcGVyUGFnZSk7XG4gICAgdmFyIGRlc3QgPSBjb21wdXRlRGVzdEluZGV4KGN1cnJJbmRleCArIG51bWJlciAqIChwcmV2ID8gLTEgOiAxKSwgY3VyckluZGV4LCAhKHBlck1vdmUgfHwgaGFzRm9jdXMoKSkpO1xuXG4gICAgaWYgKGRlc3QgPT09IC0xICYmIGlzU2xpZGUpIHtcbiAgICAgIGlmICghYXBwcm94aW1hdGVseUVxdWFsKGdldFBvc2l0aW9uKCksIGdldExpbWl0KCFwcmV2KSwgMSkpIHtcbiAgICAgICAgcmV0dXJuIHByZXYgPyAwIDogZW5kSW5kZXg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3RpbmF0aW9uID8gZGVzdCA6IGxvb3AoZGVzdCk7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wdXRlRGVzdEluZGV4KGRlc3QsIGZyb20sIHNuYXBQYWdlKSB7XG4gICAgaWYgKGlzRW5vdWdoKCkgfHwgaGFzRm9jdXMoKSkge1xuICAgICAgdmFyIGluZGV4ID0gY29tcHV0ZU1vdmFibGVEZXN0SW5kZXgoZGVzdCk7XG5cbiAgICAgIGlmIChpbmRleCAhPT0gZGVzdCkge1xuICAgICAgICBmcm9tID0gZGVzdDtcbiAgICAgICAgZGVzdCA9IGluZGV4O1xuICAgICAgICBzbmFwUGFnZSA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVzdCA8IDAgfHwgZGVzdCA+IGVuZEluZGV4KSB7XG4gICAgICAgIGlmICghcGVyTW92ZSAmJiAoYmV0d2VlbigwLCBkZXN0LCBmcm9tLCB0cnVlKSB8fCBiZXR3ZWVuKGVuZEluZGV4LCBmcm9tLCBkZXN0LCB0cnVlKSkpIHtcbiAgICAgICAgICBkZXN0ID0gdG9JbmRleCh0b1BhZ2UoZGVzdCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpc0xvb3ApIHtcbiAgICAgICAgICAgIGRlc3QgPSBzbmFwUGFnZSA/IGRlc3QgPCAwID8gLShzbGlkZUNvdW50ICUgcGVyUGFnZSB8fCBwZXJQYWdlKSA6IHNsaWRlQ291bnQgOiBkZXN0O1xuICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXdpbmQpIHtcbiAgICAgICAgICAgIGRlc3QgPSBkZXN0IDwgMCA/IGVuZEluZGV4IDogMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVzdCA9IC0xO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHNuYXBQYWdlICYmIGRlc3QgIT09IGZyb20pIHtcbiAgICAgICAgICBkZXN0ID0gdG9JbmRleCh0b1BhZ2UoZnJvbSkgKyAoZGVzdCA8IGZyb20gPyAtMSA6IDEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZXN0ID0gLTE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3Q7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wdXRlTW92YWJsZURlc3RJbmRleChkZXN0KSB7XG4gICAgaWYgKGlzU2xpZGUgJiYgb3B0aW9ucy50cmltU3BhY2UgPT09IFwibW92ZVwiICYmIGRlc3QgIT09IGN1cnJJbmRleCkge1xuICAgICAgdmFyIHBvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcblxuICAgICAgd2hpbGUgKHBvc2l0aW9uID09PSB0b1Bvc2l0aW9uKGRlc3QsIHRydWUpICYmIGJldHdlZW4oZGVzdCwgMCwgU3BsaWRlMi5sZW5ndGggLSAxLCAhb3B0aW9ucy5yZXdpbmQpKSB7XG4gICAgICAgIGRlc3QgPCBjdXJySW5kZXggPyAtLWRlc3QgOiArK2Rlc3Q7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlc3Q7XG4gIH1cblxuICBmdW5jdGlvbiBsb29wKGluZGV4KSB7XG4gICAgcmV0dXJuIGlzTG9vcCA/IChpbmRleCArIHNsaWRlQ291bnQpICUgc2xpZGVDb3VudCB8fCAwIDogaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRFbmQoKSB7XG4gICAgdmFyIGVuZCA9IHNsaWRlQ291bnQgLSAoaGFzRm9jdXMoKSB8fCBpc0xvb3AgJiYgcGVyTW92ZSA/IDEgOiBwZXJQYWdlKTtcblxuICAgIHdoaWxlIChvbWl0RW5kICYmIGVuZC0tID4gMCkge1xuICAgICAgaWYgKHRvUG9zaXRpb24oc2xpZGVDb3VudCAtIDEsIHRydWUpICE9PSB0b1Bvc2l0aW9uKGVuZCwgdHJ1ZSkpIHtcbiAgICAgICAgZW5kKys7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjbGFtcChlbmQsIDAsIHNsaWRlQ291bnQgLSAxKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvSW5kZXgocGFnZSkge1xuICAgIHJldHVybiBjbGFtcChoYXNGb2N1cygpID8gcGFnZSA6IHBlclBhZ2UgKiBwYWdlLCAwLCBlbmRJbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiB0b1BhZ2UoaW5kZXgpIHtcbiAgICByZXR1cm4gaGFzRm9jdXMoKSA/IG1pbihpbmRleCwgZW5kSW5kZXgpIDogZmxvb3IoKGluZGV4ID49IGVuZEluZGV4ID8gc2xpZGVDb3VudCAtIDEgOiBpbmRleCkgLyBwZXJQYWdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvRGVzdChkZXN0aW5hdGlvbikge1xuICAgIHZhciBjbG9zZXN0ID0gTW92ZS50b0luZGV4KGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gaXNTbGlkZSA/IGNsYW1wKGNsb3Nlc3QsIDAsIGVuZEluZGV4KSA6IGNsb3Nlc3Q7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRJbmRleChpbmRleCkge1xuICAgIGlmIChpbmRleCAhPT0gY3VyckluZGV4KSB7XG4gICAgICBwcmV2SW5kZXggPSBjdXJySW5kZXg7XG4gICAgICBjdXJySW5kZXggPSBpbmRleDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbmRleChwcmV2KSB7XG4gICAgcmV0dXJuIHByZXYgPyBwcmV2SW5kZXggOiBjdXJySW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNGb2N1cygpIHtcbiAgICByZXR1cm4gIWlzVW5kZWZpbmVkKG9wdGlvbnMuZm9jdXMpIHx8IG9wdGlvbnMuaXNOYXZpZ2F0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNCdXN5KCkge1xuICAgIHJldHVybiBTcGxpZGUyLnN0YXRlLmlzKFtNT1ZJTkcsIFNDUk9MTElOR10pICYmICEhb3B0aW9ucy53YWl0Rm9yVHJhbnNpdGlvbjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGdvOiBnbyxcbiAgICBzY3JvbGw6IHNjcm9sbCxcbiAgICBnZXROZXh0OiBnZXROZXh0LFxuICAgIGdldFByZXY6IGdldFByZXYsXG4gICAgZ2V0QWRqYWNlbnQ6IGdldEFkamFjZW50LFxuICAgIGdldEVuZDogZ2V0RW5kLFxuICAgIHNldEluZGV4OiBzZXRJbmRleCxcbiAgICBnZXRJbmRleDogZ2V0SW5kZXgsXG4gICAgdG9JbmRleDogdG9JbmRleCxcbiAgICB0b1BhZ2U6IHRvUGFnZSxcbiAgICB0b0Rlc3Q6IHRvRGVzdCxcbiAgICBoYXNGb2N1czogaGFzRm9jdXMsXG4gICAgaXNCdXN5OiBpc0J1c3lcbiAgfTtcbn1cblxudmFyIFhNTF9OQU1FX1NQQUNFID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiO1xudmFyIFBBVEggPSBcIm0xNS41IDAuOTMyLTQuMyA0LjM4IDE0LjUgMTQuNi0xNC41IDE0LjUgNC4zIDQuNCAxNC42LTE0LjYgNC40LTQuMy00LjQtNC40LTE0LjYtMTQuNnpcIjtcbnZhciBTSVpFID0gNDA7XG5cbmZ1bmN0aW9uIEFycm93cyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgZXZlbnQgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKTtcbiAgdmFyIG9uID0gZXZlbnQub24sXG4gICAgICBiaW5kID0gZXZlbnQuYmluZCxcbiAgICAgIGVtaXQgPSBldmVudC5lbWl0O1xuICB2YXIgY2xhc3NlcyA9IG9wdGlvbnMuY2xhc3NlcyxcbiAgICAgIGkxOG4gPSBvcHRpb25zLmkxOG47XG4gIHZhciBFbGVtZW50cyA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgQ29udHJvbGxlciA9IENvbXBvbmVudHMyLkNvbnRyb2xsZXI7XG4gIHZhciBwbGFjZWhvbGRlciA9IEVsZW1lbnRzLmFycm93cyxcbiAgICAgIHRyYWNrID0gRWxlbWVudHMudHJhY2s7XG4gIHZhciB3cmFwcGVyID0gcGxhY2Vob2xkZXI7XG4gIHZhciBwcmV2ID0gRWxlbWVudHMucHJldjtcbiAgdmFyIG5leHQgPSBFbGVtZW50cy5uZXh0O1xuICB2YXIgY3JlYXRlZDtcbiAgdmFyIHdyYXBwZXJDbGFzc2VzO1xuICB2YXIgYXJyb3dzID0ge307XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaW5pdCgpO1xuICAgIG9uKEVWRU5UX1VQREFURUQsIHJlbW91bnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3VudCgpIHtcbiAgICBkZXN0cm95KCk7XG4gICAgbW91bnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGVuYWJsZWQgPSBvcHRpb25zLmFycm93cztcblxuICAgIGlmIChlbmFibGVkICYmICEocHJldiAmJiBuZXh0KSkge1xuICAgICAgY3JlYXRlQXJyb3dzKCk7XG4gICAgfVxuXG4gICAgaWYgKHByZXYgJiYgbmV4dCkge1xuICAgICAgYXNzaWduKGFycm93cywge1xuICAgICAgICBwcmV2OiBwcmV2LFxuICAgICAgICBuZXh0OiBuZXh0XG4gICAgICB9KTtcbiAgICAgIGRpc3BsYXkod3JhcHBlciwgZW5hYmxlZCA/IFwiXCIgOiBcIm5vbmVcIik7XG4gICAgICBhZGRDbGFzcyh3cmFwcGVyLCB3cmFwcGVyQ2xhc3NlcyA9IENMQVNTX0FSUk9XUyArIFwiLS1cIiArIG9wdGlvbnMuZGlyZWN0aW9uKTtcblxuICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgbGlzdGVuKCk7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICBzZXRBdHRyaWJ1dGUoW3ByZXYsIG5leHRdLCBBUklBX0NPTlRST0xTLCB0cmFjay5pZCk7XG4gICAgICAgIGVtaXQoRVZFTlRfQVJST1dTX01PVU5URUQsIHByZXYsIG5leHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgZXZlbnQuZGVzdHJveSgpO1xuICAgIHJlbW92ZUNsYXNzKHdyYXBwZXIsIHdyYXBwZXJDbGFzc2VzKTtcblxuICAgIGlmIChjcmVhdGVkKSB7XG4gICAgICByZW1vdmUocGxhY2Vob2xkZXIgPyBbcHJldiwgbmV4dF0gOiB3cmFwcGVyKTtcbiAgICAgIHByZXYgPSBuZXh0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlQXR0cmlidXRlKFtwcmV2LCBuZXh0XSwgQUxMX0FUVFJJQlVURVMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3RlbigpIHtcbiAgICBvbihbRVZFTlRfTU9VTlRFRCwgRVZFTlRfTU9WRUQsIEVWRU5UX1JFRlJFU0gsIEVWRU5UX1NDUk9MTEVELCBFVkVOVF9FTkRfSU5ERVhfQ0hBTkdFRF0sIHVwZGF0ZSk7XG4gICAgYmluZChuZXh0LCBcImNsaWNrXCIsIGFwcGx5KGdvLCBcIj5cIikpO1xuICAgIGJpbmQocHJldiwgXCJjbGlja1wiLCBhcHBseShnbywgXCI8XCIpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvKGNvbnRyb2wpIHtcbiAgICBDb250cm9sbGVyLmdvKGNvbnRyb2wsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQXJyb3dzKCkge1xuICAgIHdyYXBwZXIgPSBwbGFjZWhvbGRlciB8fCBjcmVhdGUoXCJkaXZcIiwgY2xhc3Nlcy5hcnJvd3MpO1xuICAgIHByZXYgPSBjcmVhdGVBcnJvdyh0cnVlKTtcbiAgICBuZXh0ID0gY3JlYXRlQXJyb3coZmFsc2UpO1xuICAgIGNyZWF0ZWQgPSB0cnVlO1xuICAgIGFwcGVuZCh3cmFwcGVyLCBbcHJldiwgbmV4dF0pO1xuICAgICFwbGFjZWhvbGRlciAmJiBiZWZvcmUod3JhcHBlciwgdHJhY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQXJyb3cocHJldjIpIHtcbiAgICB2YXIgYXJyb3cgPSBcIjxidXR0b24gY2xhc3M9XFxcIlwiICsgY2xhc3Nlcy5hcnJvdyArIFwiIFwiICsgKHByZXYyID8gY2xhc3Nlcy5wcmV2IDogY2xhc3Nlcy5uZXh0KSArIFwiXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiPjxzdmcgeG1sbnM9XFxcIlwiICsgWE1MX05BTUVfU1BBQ0UgKyBcIlxcXCIgdmlld0JveD1cXFwiMCAwIFwiICsgU0laRSArIFwiIFwiICsgU0laRSArIFwiXFxcIiB3aWR0aD1cXFwiXCIgKyBTSVpFICsgXCJcXFwiIGhlaWdodD1cXFwiXCIgKyBTSVpFICsgXCJcXFwiIGZvY3VzYWJsZT1cXFwiZmFsc2VcXFwiPjxwYXRoIGQ9XFxcIlwiICsgKG9wdGlvbnMuYXJyb3dQYXRoIHx8IFBBVEgpICsgXCJcXFwiIC8+XCI7XG4gICAgcmV0dXJuIHBhcnNlSHRtbChhcnJvdyk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgaWYgKHByZXYgJiYgbmV4dCkge1xuICAgICAgdmFyIGluZGV4ID0gU3BsaWRlMi5pbmRleDtcbiAgICAgIHZhciBwcmV2SW5kZXggPSBDb250cm9sbGVyLmdldFByZXYoKTtcbiAgICAgIHZhciBuZXh0SW5kZXggPSBDb250cm9sbGVyLmdldE5leHQoKTtcbiAgICAgIHZhciBwcmV2TGFiZWwgPSBwcmV2SW5kZXggPiAtMSAmJiBpbmRleCA8IHByZXZJbmRleCA/IGkxOG4ubGFzdCA6IGkxOG4ucHJldjtcbiAgICAgIHZhciBuZXh0TGFiZWwgPSBuZXh0SW5kZXggPiAtMSAmJiBpbmRleCA+IG5leHRJbmRleCA/IGkxOG4uZmlyc3QgOiBpMThuLm5leHQ7XG4gICAgICBwcmV2LmRpc2FibGVkID0gcHJldkluZGV4IDwgMDtcbiAgICAgIG5leHQuZGlzYWJsZWQgPSBuZXh0SW5kZXggPCAwO1xuICAgICAgc2V0QXR0cmlidXRlKHByZXYsIEFSSUFfTEFCRUwsIHByZXZMYWJlbCk7XG4gICAgICBzZXRBdHRyaWJ1dGUobmV4dCwgQVJJQV9MQUJFTCwgbmV4dExhYmVsKTtcbiAgICAgIGVtaXQoRVZFTlRfQVJST1dTX1VQREFURUQsIHByZXYsIG5leHQsIHByZXZJbmRleCwgbmV4dEluZGV4KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFycm93czogYXJyb3dzLFxuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIHVwZGF0ZTogdXBkYXRlXG4gIH07XG59XG5cbnZhciBJTlRFUlZBTF9EQVRBX0FUVFJJQlVURSA9IERBVEFfQVRUUklCVVRFICsgXCItaW50ZXJ2YWxcIjtcblxuZnVuY3Rpb24gQXV0b3BsYXkoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTYgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlNi5vbixcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2U2LmJpbmQsXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlNi5lbWl0O1xuXG4gIHZhciBpbnRlcnZhbCA9IFJlcXVlc3RJbnRlcnZhbChvcHRpb25zLmludGVydmFsLCBTcGxpZGUyLmdvLmJpbmQoU3BsaWRlMiwgXCI+XCIpLCBvbkFuaW1hdGlvbkZyYW1lKTtcbiAgdmFyIGlzUGF1c2VkID0gaW50ZXJ2YWwuaXNQYXVzZWQ7XG4gIHZhciBFbGVtZW50cyA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgX0NvbXBvbmVudHMyJEVsZW1lbnRzNCA9IENvbXBvbmVudHMyLkVsZW1lbnRzLFxuICAgICAgcm9vdCA9IF9Db21wb25lbnRzMiRFbGVtZW50czQucm9vdCxcbiAgICAgIHRvZ2dsZSA9IF9Db21wb25lbnRzMiRFbGVtZW50czQudG9nZ2xlO1xuICB2YXIgYXV0b3BsYXkgPSBvcHRpb25zLmF1dG9wbGF5O1xuICB2YXIgaG92ZXJlZDtcbiAgdmFyIGZvY3VzZWQ7XG4gIHZhciBzdG9wcGVkID0gYXV0b3BsYXkgPT09IFwicGF1c2VcIjtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpZiAoYXV0b3BsYXkpIHtcbiAgICAgIGxpc3RlbigpO1xuICAgICAgdG9nZ2xlICYmIHNldEF0dHJpYnV0ZSh0b2dnbGUsIEFSSUFfQ09OVFJPTFMsIEVsZW1lbnRzLnRyYWNrLmlkKTtcbiAgICAgIHN0b3BwZWQgfHwgcGxheSgpO1xuICAgICAgdXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbGlzdGVuKCkge1xuICAgIGlmIChvcHRpb25zLnBhdXNlT25Ib3Zlcikge1xuICAgICAgYmluZChyb290LCBcIm1vdXNlZW50ZXIgbW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBob3ZlcmVkID0gZS50eXBlID09PSBcIm1vdXNlZW50ZXJcIjtcbiAgICAgICAgYXV0b1RvZ2dsZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucGF1c2VPbkZvY3VzKSB7XG4gICAgICBiaW5kKHJvb3QsIFwiZm9jdXNpbiBmb2N1c291dFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBmb2N1c2VkID0gZS50eXBlID09PSBcImZvY3VzaW5cIjtcbiAgICAgICAgYXV0b1RvZ2dsZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRvZ2dsZSkge1xuICAgICAgYmluZCh0b2dnbGUsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzdG9wcGVkID8gcGxheSgpIDogcGF1c2UodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBvbihbRVZFTlRfTU9WRSwgRVZFTlRfU0NST0xMLCBFVkVOVF9SRUZSRVNIXSwgaW50ZXJ2YWwucmV3aW5kKTtcbiAgICBvbihFVkVOVF9NT1ZFLCBvbk1vdmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBpZiAoaXNQYXVzZWQoKSAmJiBDb21wb25lbnRzMi5TbGlkZXMuaXNFbm91Z2goKSkge1xuICAgICAgaW50ZXJ2YWwuc3RhcnQoIW9wdGlvbnMucmVzZXRQcm9ncmVzcyk7XG4gICAgICBmb2N1c2VkID0gaG92ZXJlZCA9IHN0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHVwZGF0ZSgpO1xuICAgICAgZW1pdChFVkVOVF9BVVRPUExBWV9QTEFZKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZShzdG9wKSB7XG4gICAgaWYgKHN0b3AgPT09IHZvaWQgMCkge1xuICAgICAgc3RvcCA9IHRydWU7XG4gICAgfVxuXG4gICAgc3RvcHBlZCA9ICEhc3RvcDtcbiAgICB1cGRhdGUoKTtcblxuICAgIGlmICghaXNQYXVzZWQoKSkge1xuICAgICAgaW50ZXJ2YWwucGF1c2UoKTtcbiAgICAgIGVtaXQoRVZFTlRfQVVUT1BMQVlfUEFVU0UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGF1dG9Ub2dnbGUoKSB7XG4gICAgaWYgKCFzdG9wcGVkKSB7XG4gICAgICBob3ZlcmVkIHx8IGZvY3VzZWQgPyBwYXVzZShmYWxzZSkgOiBwbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIGlmICh0b2dnbGUpIHtcbiAgICAgIHRvZ2dsZUNsYXNzKHRvZ2dsZSwgQ0xBU1NfQUNUSVZFLCAhc3RvcHBlZCk7XG4gICAgICBzZXRBdHRyaWJ1dGUodG9nZ2xlLCBBUklBX0xBQkVMLCBvcHRpb25zLmkxOG5bc3RvcHBlZCA/IFwicGxheVwiIDogXCJwYXVzZVwiXSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25BbmltYXRpb25GcmFtZShyYXRlKSB7XG4gICAgdmFyIGJhciA9IEVsZW1lbnRzLmJhcjtcbiAgICBiYXIgJiYgc3R5bGUoYmFyLCBcIndpZHRoXCIsIHJhdGUgKiAxMDAgKyBcIiVcIik7XG4gICAgZW1pdChFVkVOVF9BVVRPUExBWV9QTEFZSU5HLCByYXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW92ZShpbmRleCkge1xuICAgIHZhciBTbGlkZSA9IENvbXBvbmVudHMyLlNsaWRlcy5nZXRBdChpbmRleCk7XG4gICAgaW50ZXJ2YWwuc2V0KFNsaWRlICYmICtnZXRBdHRyaWJ1dGUoU2xpZGUuc2xpZGUsIElOVEVSVkFMX0RBVEFfQVRUUklCVVRFKSB8fCBvcHRpb25zLmludGVydmFsKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGludGVydmFsLmNhbmNlbCxcbiAgICBwbGF5OiBwbGF5LFxuICAgIHBhdXNlOiBwYXVzZSxcbiAgICBpc1BhdXNlZDogaXNQYXVzZWRcbiAgfTtcbn1cblxuZnVuY3Rpb24gQ292ZXIoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTcgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlNy5vbjtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpZiAob3B0aW9ucy5jb3Zlcikge1xuICAgICAgb24oRVZFTlRfTEFaWUxPQURfTE9BREVELCBhcHBseSh0b2dnbGUsIHRydWUpKTtcbiAgICAgIG9uKFtFVkVOVF9NT1VOVEVELCBFVkVOVF9VUERBVEVELCBFVkVOVF9SRUZSRVNIXSwgYXBwbHkoY292ZXIsIHRydWUpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjb3Zlcihjb3ZlcjIpIHtcbiAgICBDb21wb25lbnRzMi5TbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoU2xpZGUpIHtcbiAgICAgIHZhciBpbWcgPSBjaGlsZChTbGlkZS5jb250YWluZXIgfHwgU2xpZGUuc2xpZGUsIFwiaW1nXCIpO1xuXG4gICAgICBpZiAoaW1nICYmIGltZy5zcmMpIHtcbiAgICAgICAgdG9nZ2xlKGNvdmVyMiwgaW1nLCBTbGlkZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGUoY292ZXIyLCBpbWcsIFNsaWRlKSB7XG4gICAgU2xpZGUuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIGNvdmVyMiA/IFwiY2VudGVyL2NvdmVyIG5vLXJlcGVhdCB1cmwoXFxcIlwiICsgaW1nLnNyYyArIFwiXFxcIilcIiA6IFwiXCIsIHRydWUpO1xuICAgIGRpc3BsYXkoaW1nLCBjb3ZlcjIgPyBcIm5vbmVcIiA6IFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogYXBwbHkoY292ZXIsIGZhbHNlKVxuICB9O1xufVxuXG52YXIgQk9VTkNFX0RJRkZfVEhSRVNIT0xEID0gMTA7XG52YXIgQk9VTkNFX0RVUkFUSU9OID0gNjAwO1xudmFyIEZSSUNUSU9OX0ZBQ1RPUiA9IDAuNjtcbnZhciBCQVNFX1ZFTE9DSVRZID0gMS41O1xudmFyIE1JTl9EVVJBVElPTiA9IDgwMDtcblxuZnVuY3Rpb24gU2Nyb2xsKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBfRXZlbnRJbnRlcmZhY2U4ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTgub24sXG4gICAgICBlbWl0ID0gX0V2ZW50SW50ZXJmYWNlOC5lbWl0O1xuXG4gIHZhciBzZXQgPSBTcGxpZGUyLnN0YXRlLnNldDtcbiAgdmFyIE1vdmUgPSBDb21wb25lbnRzMi5Nb3ZlO1xuICB2YXIgZ2V0UG9zaXRpb24gPSBNb3ZlLmdldFBvc2l0aW9uLFxuICAgICAgZ2V0TGltaXQgPSBNb3ZlLmdldExpbWl0LFxuICAgICAgZXhjZWVkZWRMaW1pdCA9IE1vdmUuZXhjZWVkZWRMaW1pdCxcbiAgICAgIHRyYW5zbGF0ZSA9IE1vdmUudHJhbnNsYXRlO1xuICB2YXIgaXNTbGlkZSA9IFNwbGlkZTIuaXMoU0xJREUpO1xuICB2YXIgaW50ZXJ2YWw7XG4gIHZhciBjYWxsYmFjaztcbiAgdmFyIGZyaWN0aW9uID0gMTtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBvbihFVkVOVF9NT1ZFLCBjbGVhcik7XG4gICAgb24oW0VWRU5UX1VQREFURUQsIEVWRU5UX1JFRlJFU0hdLCBjYW5jZWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsKGRlc3RpbmF0aW9uLCBkdXJhdGlvbiwgc25hcCwgb25TY3JvbGxlZCwgbm9Db25zdHJhaW4pIHtcbiAgICB2YXIgZnJvbSA9IGdldFBvc2l0aW9uKCk7XG4gICAgY2xlYXIoKTtcblxuICAgIGlmIChzbmFwICYmICghaXNTbGlkZSB8fCAhZXhjZWVkZWRMaW1pdCgpKSkge1xuICAgICAgdmFyIHNpemUgPSBDb21wb25lbnRzMi5MYXlvdXQuc2xpZGVyU2l6ZSgpO1xuICAgICAgdmFyIG9mZnNldCA9IHNpZ24oZGVzdGluYXRpb24pICogc2l6ZSAqIGZsb29yKGFicyhkZXN0aW5hdGlvbikgLyBzaXplKSB8fCAwO1xuICAgICAgZGVzdGluYXRpb24gPSBNb3ZlLnRvUG9zaXRpb24oQ29tcG9uZW50czIuQ29udHJvbGxlci50b0Rlc3QoZGVzdGluYXRpb24gJSBzaXplKSkgKyBvZmZzZXQ7XG4gICAgfVxuXG4gICAgdmFyIG5vRGlzdGFuY2UgPSBhcHByb3hpbWF0ZWx5RXF1YWwoZnJvbSwgZGVzdGluYXRpb24sIDEpO1xuICAgIGZyaWN0aW9uID0gMTtcbiAgICBkdXJhdGlvbiA9IG5vRGlzdGFuY2UgPyAwIDogZHVyYXRpb24gfHwgbWF4KGFicyhkZXN0aW5hdGlvbiAtIGZyb20pIC8gQkFTRV9WRUxPQ0lUWSwgTUlOX0RVUkFUSU9OKTtcbiAgICBjYWxsYmFjayA9IG9uU2Nyb2xsZWQ7XG4gICAgaW50ZXJ2YWwgPSBSZXF1ZXN0SW50ZXJ2YWwoZHVyYXRpb24sIG9uRW5kLCBhcHBseSh1cGRhdGUsIGZyb20sIGRlc3RpbmF0aW9uLCBub0NvbnN0cmFpbiksIDEpO1xuICAgIHNldChTQ1JPTExJTkcpO1xuICAgIGVtaXQoRVZFTlRfU0NST0xMKTtcbiAgICBpbnRlcnZhbC5zdGFydCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25FbmQoKSB7XG4gICAgc2V0KElETEUpO1xuICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgZW1pdChFVkVOVF9TQ1JPTExFRCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoZnJvbSwgdG8sIG5vQ29uc3RyYWluLCByYXRlKSB7XG4gICAgdmFyIHBvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcbiAgICB2YXIgdGFyZ2V0ID0gZnJvbSArICh0byAtIGZyb20pICogZWFzaW5nKHJhdGUpO1xuICAgIHZhciBkaWZmID0gKHRhcmdldCAtIHBvc2l0aW9uKSAqIGZyaWN0aW9uO1xuICAgIHRyYW5zbGF0ZShwb3NpdGlvbiArIGRpZmYpO1xuXG4gICAgaWYgKGlzU2xpZGUgJiYgIW5vQ29uc3RyYWluICYmIGV4Y2VlZGVkTGltaXQoKSkge1xuICAgICAgZnJpY3Rpb24gKj0gRlJJQ1RJT05fRkFDVE9SO1xuXG4gICAgICBpZiAoYWJzKGRpZmYpIDwgQk9VTkNFX0RJRkZfVEhSRVNIT0xEKSB7XG4gICAgICAgIHNjcm9sbChnZXRMaW1pdChleGNlZWRlZExpbWl0KHRydWUpKSwgQk9VTkNFX0RVUkFUSU9OLCBmYWxzZSwgY2FsbGJhY2ssIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGlmIChpbnRlcnZhbCkge1xuICAgICAgaW50ZXJ2YWwuY2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmIChpbnRlcnZhbCAmJiAhaW50ZXJ2YWwuaXNQYXVzZWQoKSkge1xuICAgICAgY2xlYXIoKTtcbiAgICAgIG9uRW5kKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZWFzaW5nKHQpIHtcbiAgICB2YXIgZWFzaW5nRnVuYyA9IG9wdGlvbnMuZWFzaW5nRnVuYztcbiAgICByZXR1cm4gZWFzaW5nRnVuYyA/IGVhc2luZ0Z1bmModCkgOiAxIC0gTWF0aC5wb3coMSAtIHQsIDQpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogY2xlYXIsXG4gICAgc2Nyb2xsOiBzY3JvbGwsXG4gICAgY2FuY2VsOiBjYW5jZWxcbiAgfTtcbn1cblxudmFyIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TID0ge1xuICBwYXNzaXZlOiBmYWxzZSxcbiAgY2FwdHVyZTogdHJ1ZVxufTtcblxuZnVuY3Rpb24gRHJhZyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlOSA9IEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLFxuICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2U5Lm9uLFxuICAgICAgZW1pdCA9IF9FdmVudEludGVyZmFjZTkuZW1pdCxcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2U5LmJpbmQsXG4gICAgICB1bmJpbmQgPSBfRXZlbnRJbnRlcmZhY2U5LnVuYmluZDtcblxuICB2YXIgc3RhdGUgPSBTcGxpZGUyLnN0YXRlO1xuICB2YXIgTW92ZSA9IENvbXBvbmVudHMyLk1vdmUsXG4gICAgICBTY3JvbGwgPSBDb21wb25lbnRzMi5TY3JvbGwsXG4gICAgICBDb250cm9sbGVyID0gQ29tcG9uZW50czIuQ29udHJvbGxlcixcbiAgICAgIHRyYWNrID0gQ29tcG9uZW50czIuRWxlbWVudHMudHJhY2ssXG4gICAgICByZWR1Y2UgPSBDb21wb25lbnRzMi5NZWRpYS5yZWR1Y2U7XG4gIHZhciBfQ29tcG9uZW50czIkRGlyZWN0aW8yID0gQ29tcG9uZW50czIuRGlyZWN0aW9uLFxuICAgICAgcmVzb2x2ZSA9IF9Db21wb25lbnRzMiREaXJlY3RpbzIucmVzb2x2ZSxcbiAgICAgIG9yaWVudCA9IF9Db21wb25lbnRzMiREaXJlY3RpbzIub3JpZW50O1xuICB2YXIgZ2V0UG9zaXRpb24gPSBNb3ZlLmdldFBvc2l0aW9uLFxuICAgICAgZXhjZWVkZWRMaW1pdCA9IE1vdmUuZXhjZWVkZWRMaW1pdDtcbiAgdmFyIGJhc2VQb3NpdGlvbjtcbiAgdmFyIGJhc2VFdmVudDtcbiAgdmFyIHByZXZCYXNlRXZlbnQ7XG4gIHZhciBpc0ZyZWU7XG4gIHZhciBkcmFnZ2luZztcbiAgdmFyIGV4Y2VlZGVkID0gZmFsc2U7XG4gIHZhciBjbGlja1ByZXZlbnRlZDtcbiAgdmFyIGRpc2FibGVkO1xuICB2YXIgdGFyZ2V0O1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGJpbmQodHJhY2ssIFBPSU5URVJfTU9WRV9FVkVOVFMsIG5vb3AsIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TKTtcbiAgICBiaW5kKHRyYWNrLCBQT0lOVEVSX1VQX0VWRU5UUywgbm9vcCwgU0NST0xMX0xJU1RFTkVSX09QVElPTlMpO1xuICAgIGJpbmQodHJhY2ssIFBPSU5URVJfRE9XTl9FVkVOVFMsIG9uUG9pbnRlckRvd24sIFNDUk9MTF9MSVNURU5FUl9PUFRJT05TKTtcbiAgICBiaW5kKHRyYWNrLCBcImNsaWNrXCIsIG9uQ2xpY2ssIHtcbiAgICAgIGNhcHR1cmU6IHRydWVcbiAgICB9KTtcbiAgICBiaW5kKHRyYWNrLCBcImRyYWdzdGFydFwiLCBwcmV2ZW50KTtcbiAgICBvbihbRVZFTlRfTU9VTlRFRCwgRVZFTlRfVVBEQVRFRF0sIGluaXQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgZHJhZyA9IG9wdGlvbnMuZHJhZztcbiAgICBkaXNhYmxlKCFkcmFnKTtcbiAgICBpc0ZyZWUgPSBkcmFnID09PSBcImZyZWVcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUG9pbnRlckRvd24oZSkge1xuICAgIGNsaWNrUHJldmVudGVkID0gZmFsc2U7XG5cbiAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICB2YXIgaXNUb3VjaCA9IGlzVG91Y2hFdmVudChlKTtcblxuICAgICAgaWYgKGlzRHJhZ2dhYmxlKGUudGFyZ2V0KSAmJiAoaXNUb3VjaCB8fCAhZS5idXR0b24pKSB7XG4gICAgICAgIGlmICghQ29udHJvbGxlci5pc0J1c3koKSkge1xuICAgICAgICAgIHRhcmdldCA9IGlzVG91Y2ggPyB0cmFjayA6IHdpbmRvdztcbiAgICAgICAgICBkcmFnZ2luZyA9IHN0YXRlLmlzKFtNT1ZJTkcsIFNDUk9MTElOR10pO1xuICAgICAgICAgIHByZXZCYXNlRXZlbnQgPSBudWxsO1xuICAgICAgICAgIGJpbmQodGFyZ2V0LCBQT0lOVEVSX01PVkVfRVZFTlRTLCBvblBvaW50ZXJNb3ZlLCBTQ1JPTExfTElTVEVORVJfT1BUSU9OUyk7XG4gICAgICAgICAgYmluZCh0YXJnZXQsIFBPSU5URVJfVVBfRVZFTlRTLCBvblBvaW50ZXJVcCwgU0NST0xMX0xJU1RFTkVSX09QVElPTlMpO1xuICAgICAgICAgIE1vdmUuY2FuY2VsKCk7XG4gICAgICAgICAgU2Nyb2xsLmNhbmNlbCgpO1xuICAgICAgICAgIHNhdmUoZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJldmVudChlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUG9pbnRlck1vdmUoZSkge1xuICAgIGlmICghc3RhdGUuaXMoRFJBR0dJTkcpKSB7XG4gICAgICBzdGF0ZS5zZXQoRFJBR0dJTkcpO1xuICAgICAgZW1pdChFVkVOVF9EUkFHKTtcbiAgICB9XG5cbiAgICBpZiAoZS5jYW5jZWxhYmxlKSB7XG4gICAgICBpZiAoZHJhZ2dpbmcpIHtcbiAgICAgICAgTW92ZS50cmFuc2xhdGUoYmFzZVBvc2l0aW9uICsgY29uc3RyYWluKGRpZmZDb29yZChlKSkpO1xuICAgICAgICB2YXIgZXhwaXJlZCA9IGRpZmZUaW1lKGUpID4gTE9HX0lOVEVSVkFMO1xuICAgICAgICB2YXIgaGFzRXhjZWVkZWQgPSBleGNlZWRlZCAhPT0gKGV4Y2VlZGVkID0gZXhjZWVkZWRMaW1pdCgpKTtcblxuICAgICAgICBpZiAoZXhwaXJlZCB8fCBoYXNFeGNlZWRlZCkge1xuICAgICAgICAgIHNhdmUoZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjbGlja1ByZXZlbnRlZCA9IHRydWU7XG4gICAgICAgIGVtaXQoRVZFTlRfRFJBR0dJTkcpO1xuICAgICAgICBwcmV2ZW50KGUpO1xuICAgICAgfSBlbHNlIGlmIChpc1NsaWRlckRpcmVjdGlvbihlKSkge1xuICAgICAgICBkcmFnZ2luZyA9IHNob3VsZFN0YXJ0KGUpO1xuICAgICAgICBwcmV2ZW50KGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUG9pbnRlclVwKGUpIHtcbiAgICBpZiAoc3RhdGUuaXMoRFJBR0dJTkcpKSB7XG4gICAgICBzdGF0ZS5zZXQoSURMRSk7XG4gICAgICBlbWl0KEVWRU5UX0RSQUdHRUQpO1xuICAgIH1cblxuICAgIGlmIChkcmFnZ2luZykge1xuICAgICAgbW92ZShlKTtcbiAgICAgIHByZXZlbnQoZSk7XG4gICAgfVxuXG4gICAgdW5iaW5kKHRhcmdldCwgUE9JTlRFUl9NT1ZFX0VWRU5UUywgb25Qb2ludGVyTW92ZSk7XG4gICAgdW5iaW5kKHRhcmdldCwgUE9JTlRFUl9VUF9FVkVOVFMsIG9uUG9pbnRlclVwKTtcbiAgICBkcmFnZ2luZyA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgaWYgKCFkaXNhYmxlZCAmJiBjbGlja1ByZXZlbnRlZCkge1xuICAgICAgcHJldmVudChlLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzYXZlKGUpIHtcbiAgICBwcmV2QmFzZUV2ZW50ID0gYmFzZUV2ZW50O1xuICAgIGJhc2VFdmVudCA9IGU7XG4gICAgYmFzZVBvc2l0aW9uID0gZ2V0UG9zaXRpb24oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmUoZSkge1xuICAgIHZhciB2ZWxvY2l0eSA9IGNvbXB1dGVWZWxvY2l0eShlKTtcbiAgICB2YXIgZGVzdGluYXRpb24gPSBjb21wdXRlRGVzdGluYXRpb24odmVsb2NpdHkpO1xuICAgIHZhciByZXdpbmQgPSBvcHRpb25zLnJld2luZCAmJiBvcHRpb25zLnJld2luZEJ5RHJhZztcbiAgICByZWR1Y2UoZmFsc2UpO1xuXG4gICAgaWYgKGlzRnJlZSkge1xuICAgICAgQ29udHJvbGxlci5zY3JvbGwoZGVzdGluYXRpb24sIDAsIG9wdGlvbnMuc25hcCk7XG4gICAgfSBlbHNlIGlmIChTcGxpZGUyLmlzKEZBREUpKSB7XG4gICAgICBDb250cm9sbGVyLmdvKG9yaWVudChzaWduKHZlbG9jaXR5KSkgPCAwID8gcmV3aW5kID8gXCI8XCIgOiBcIi1cIiA6IHJld2luZCA/IFwiPlwiIDogXCIrXCIpO1xuICAgIH0gZWxzZSBpZiAoU3BsaWRlMi5pcyhTTElERSkgJiYgZXhjZWVkZWQgJiYgcmV3aW5kKSB7XG4gICAgICBDb250cm9sbGVyLmdvKGV4Y2VlZGVkTGltaXQodHJ1ZSkgPyBcIj5cIiA6IFwiPFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgQ29udHJvbGxlci5nbyhDb250cm9sbGVyLnRvRGVzdChkZXN0aW5hdGlvbiksIHRydWUpO1xuICAgIH1cblxuICAgIHJlZHVjZSh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZFN0YXJ0KGUpIHtcbiAgICB2YXIgdGhyZXNob2xkcyA9IG9wdGlvbnMuZHJhZ01pblRocmVzaG9sZDtcbiAgICB2YXIgaXNPYmogPSBpc09iamVjdCh0aHJlc2hvbGRzKTtcbiAgICB2YXIgbW91c2UgPSBpc09iaiAmJiB0aHJlc2hvbGRzLm1vdXNlIHx8IDA7XG4gICAgdmFyIHRvdWNoID0gKGlzT2JqID8gdGhyZXNob2xkcy50b3VjaCA6ICt0aHJlc2hvbGRzKSB8fCAxMDtcbiAgICByZXR1cm4gYWJzKGRpZmZDb29yZChlKSkgPiAoaXNUb3VjaEV2ZW50KGUpID8gdG91Y2ggOiBtb3VzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1NsaWRlckRpcmVjdGlvbihlKSB7XG4gICAgcmV0dXJuIGFicyhkaWZmQ29vcmQoZSkpID4gYWJzKGRpZmZDb29yZChlLCB0cnVlKSk7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wdXRlVmVsb2NpdHkoZSkge1xuICAgIGlmIChTcGxpZGUyLmlzKExPT1ApIHx8ICFleGNlZWRlZCkge1xuICAgICAgdmFyIHRpbWUgPSBkaWZmVGltZShlKTtcblxuICAgICAgaWYgKHRpbWUgJiYgdGltZSA8IExPR19JTlRFUlZBTCkge1xuICAgICAgICByZXR1cm4gZGlmZkNvb3JkKGUpIC8gdGltZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVEZXN0aW5hdGlvbih2ZWxvY2l0eSkge1xuICAgIHJldHVybiBnZXRQb3NpdGlvbigpICsgc2lnbih2ZWxvY2l0eSkgKiBtaW4oYWJzKHZlbG9jaXR5KSAqIChvcHRpb25zLmZsaWNrUG93ZXIgfHwgNjAwKSwgaXNGcmVlID8gSW5maW5pdHkgOiBDb21wb25lbnRzMi5MYXlvdXQubGlzdFNpemUoKSAqIChvcHRpb25zLmZsaWNrTWF4UGFnZXMgfHwgMSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlmZkNvb3JkKGUsIG9ydGhvZ29uYWwpIHtcbiAgICByZXR1cm4gY29vcmRPZihlLCBvcnRob2dvbmFsKSAtIGNvb3JkT2YoZ2V0QmFzZUV2ZW50KGUpLCBvcnRob2dvbmFsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpZmZUaW1lKGUpIHtcbiAgICByZXR1cm4gdGltZU9mKGUpIC0gdGltZU9mKGdldEJhc2VFdmVudChlKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRCYXNlRXZlbnQoZSkge1xuICAgIHJldHVybiBiYXNlRXZlbnQgPT09IGUgJiYgcHJldkJhc2VFdmVudCB8fCBiYXNlRXZlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBjb29yZE9mKGUsIG9ydGhvZ29uYWwpIHtcbiAgICByZXR1cm4gKGlzVG91Y2hFdmVudChlKSA/IGUuY2hhbmdlZFRvdWNoZXNbMF0gOiBlKVtcInBhZ2VcIiArIHJlc29sdmUob3J0aG9nb25hbCA/IFwiWVwiIDogXCJYXCIpXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN0cmFpbihkaWZmKSB7XG4gICAgcmV0dXJuIGRpZmYgLyAoZXhjZWVkZWQgJiYgU3BsaWRlMi5pcyhTTElERSkgPyBGUklDVElPTiA6IDEpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNEcmFnZ2FibGUodGFyZ2V0Mikge1xuICAgIHZhciBub0RyYWcgPSBvcHRpb25zLm5vRHJhZztcbiAgICByZXR1cm4gIW1hdGNoZXModGFyZ2V0MiwgXCIuXCIgKyBDTEFTU19QQUdJTkFUSU9OX1BBR0UgKyBcIiwgLlwiICsgQ0xBU1NfQVJST1cpICYmICghbm9EcmFnIHx8ICFtYXRjaGVzKHRhcmdldDIsIG5vRHJhZykpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUb3VjaEV2ZW50KGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIFRvdWNoRXZlbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgZSBpbnN0YW5jZW9mIFRvdWNoRXZlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBpc0RyYWdnaW5nKCkge1xuICAgIHJldHVybiBkcmFnZ2luZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGUodmFsdWUpIHtcbiAgICBkaXNhYmxlZCA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGlzYWJsZTogZGlzYWJsZSxcbiAgICBpc0RyYWdnaW5nOiBpc0RyYWdnaW5nXG4gIH07XG59XG5cbnZhciBOT1JNQUxJWkFUSU9OX01BUCA9IHtcbiAgU3BhY2ViYXI6IFwiIFwiLFxuICBSaWdodDogQVJST1dfUklHSFQsXG4gIExlZnQ6IEFSUk9XX0xFRlQsXG4gIFVwOiBBUlJPV19VUCxcbiAgRG93bjogQVJST1dfRE9XTlxufTtcblxuZnVuY3Rpb24gbm9ybWFsaXplS2V5KGtleSkge1xuICBrZXkgPSBpc1N0cmluZyhrZXkpID8ga2V5IDoga2V5LmtleTtcbiAgcmV0dXJuIE5PUk1BTElaQVRJT05fTUFQW2tleV0gfHwga2V5O1xufVxuXG52YXIgS0VZQk9BUkRfRVZFTlQgPSBcImtleWRvd25cIjtcblxuZnVuY3Rpb24gS2V5Ym9hcmQoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTEwID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTEwLm9uLFxuICAgICAgYmluZCA9IF9FdmVudEludGVyZmFjZTEwLmJpbmQsXG4gICAgICB1bmJpbmQgPSBfRXZlbnRJbnRlcmZhY2UxMC51bmJpbmQ7XG5cbiAgdmFyIHJvb3QgPSBTcGxpZGUyLnJvb3Q7XG4gIHZhciByZXNvbHZlID0gQ29tcG9uZW50czIuRGlyZWN0aW9uLnJlc29sdmU7XG4gIHZhciB0YXJnZXQ7XG4gIHZhciBkaXNhYmxlZDtcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBpbml0KCk7XG4gICAgb24oRVZFTlRfVVBEQVRFRCwgZGVzdHJveSk7XG4gICAgb24oRVZFTlRfVVBEQVRFRCwgaW5pdCk7XG4gICAgb24oRVZFTlRfTU9WRSwgb25Nb3ZlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGtleWJvYXJkID0gb3B0aW9ucy5rZXlib2FyZDtcblxuICAgIGlmIChrZXlib2FyZCkge1xuICAgICAgdGFyZ2V0ID0ga2V5Ym9hcmQgPT09IFwiZ2xvYmFsXCIgPyB3aW5kb3cgOiByb290O1xuICAgICAgYmluZCh0YXJnZXQsIEtFWUJPQVJEX0VWRU5ULCBvbktleWRvd24pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgdW5iaW5kKHRhcmdldCwgS0VZQk9BUkRfRVZFTlQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZSh2YWx1ZSkge1xuICAgIGRpc2FibGVkID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdmUoKSB7XG4gICAgdmFyIF9kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIGRpc2FibGVkID0gdHJ1ZTtcbiAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBkaXNhYmxlZCA9IF9kaXNhYmxlZDtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5ZG93bihlKSB7XG4gICAgaWYgKCFkaXNhYmxlZCkge1xuICAgICAgdmFyIGtleSA9IG5vcm1hbGl6ZUtleShlKTtcblxuICAgICAgaWYgKGtleSA9PT0gcmVzb2x2ZShBUlJPV19MRUZUKSkge1xuICAgICAgICBTcGxpZGUyLmdvKFwiPFwiKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSByZXNvbHZlKEFSUk9XX1JJR0hUKSkge1xuICAgICAgICBTcGxpZGUyLmdvKFwiPlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGRpc2FibGU6IGRpc2FibGVcbiAgfTtcbn1cblxudmFyIFNSQ19EQVRBX0FUVFJJQlVURSA9IERBVEFfQVRUUklCVVRFICsgXCItbGF6eVwiO1xudmFyIFNSQ1NFVF9EQVRBX0FUVFJJQlVURSA9IFNSQ19EQVRBX0FUVFJJQlVURSArIFwiLXNyY3NldFwiO1xudmFyIElNQUdFX1NFTEVDVE9SID0gXCJbXCIgKyBTUkNfREFUQV9BVFRSSUJVVEUgKyBcIl0sIFtcIiArIFNSQ1NFVF9EQVRBX0FUVFJJQlVURSArIFwiXVwiO1xuXG5mdW5jdGlvbiBMYXp5TG9hZChTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlMTEgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIG9uID0gX0V2ZW50SW50ZXJmYWNlMTEub24sXG4gICAgICBvZmYgPSBfRXZlbnRJbnRlcmZhY2UxMS5vZmYsXG4gICAgICBiaW5kID0gX0V2ZW50SW50ZXJmYWNlMTEuYmluZCxcbiAgICAgIGVtaXQgPSBfRXZlbnRJbnRlcmZhY2UxMS5lbWl0O1xuXG4gIHZhciBpc1NlcXVlbnRpYWwgPSBvcHRpb25zLmxhenlMb2FkID09PSBcInNlcXVlbnRpYWxcIjtcbiAgdmFyIGV2ZW50cyA9IFtFVkVOVF9NT1ZFRCwgRVZFTlRfU0NST0xMRURdO1xuICB2YXIgZW50cmllcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGlmIChvcHRpb25zLmxhenlMb2FkKSB7XG4gICAgICBpbml0KCk7XG4gICAgICBvbihFVkVOVF9SRUZSRVNILCBpbml0KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIGVtcHR5KGVudHJpZXMpO1xuICAgIHJlZ2lzdGVyKCk7XG5cbiAgICBpZiAoaXNTZXF1ZW50aWFsKSB7XG4gICAgICBsb2FkTmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvZmYoZXZlbnRzKTtcbiAgICAgIG9uKGV2ZW50cywgY2hlY2spO1xuICAgICAgY2hlY2soKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWdpc3RlcigpIHtcbiAgICBDb21wb25lbnRzMi5TbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoU2xpZGUpIHtcbiAgICAgIHF1ZXJ5QWxsKFNsaWRlLnNsaWRlLCBJTUFHRV9TRUxFQ1RPUikuZm9yRWFjaChmdW5jdGlvbiAoaW1nKSB7XG4gICAgICAgIHZhciBzcmMgPSBnZXRBdHRyaWJ1dGUoaW1nLCBTUkNfREFUQV9BVFRSSUJVVEUpO1xuICAgICAgICB2YXIgc3Jjc2V0ID0gZ2V0QXR0cmlidXRlKGltZywgU1JDU0VUX0RBVEFfQVRUUklCVVRFKTtcblxuICAgICAgICBpZiAoc3JjICE9PSBpbWcuc3JjIHx8IHNyY3NldCAhPT0gaW1nLnNyY3NldCkge1xuICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzZXMuc3Bpbm5lcjtcbiAgICAgICAgICB2YXIgcGFyZW50ID0gaW1nLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgdmFyIHNwaW5uZXIgPSBjaGlsZChwYXJlbnQsIFwiLlwiICsgY2xhc3NOYW1lKSB8fCBjcmVhdGUoXCJzcGFuXCIsIGNsYXNzTmFtZSwgcGFyZW50KTtcbiAgICAgICAgICBlbnRyaWVzLnB1c2goW2ltZywgU2xpZGUsIHNwaW5uZXJdKTtcbiAgICAgICAgICBpbWcuc3JjIHx8IGRpc3BsYXkoaW1nLCBcIm5vbmVcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgZW50cmllcyA9IGVudHJpZXMuZmlsdGVyKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICB2YXIgZGlzdGFuY2UgPSBvcHRpb25zLnBlclBhZ2UgKiAoKG9wdGlvbnMucHJlbG9hZFBhZ2VzIHx8IDEpICsgMSkgLSAxO1xuICAgICAgcmV0dXJuIGRhdGFbMV0uaXNXaXRoaW4oU3BsaWRlMi5pbmRleCwgZGlzdGFuY2UpID8gbG9hZChkYXRhKSA6IHRydWU7XG4gICAgfSk7XG4gICAgZW50cmllcy5sZW5ndGggfHwgb2ZmKGV2ZW50cyk7XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkKGRhdGEpIHtcbiAgICB2YXIgaW1nID0gZGF0YVswXTtcbiAgICBhZGRDbGFzcyhkYXRhWzFdLnNsaWRlLCBDTEFTU19MT0FESU5HKTtcbiAgICBiaW5kKGltZywgXCJsb2FkIGVycm9yXCIsIGFwcGx5KG9uTG9hZCwgZGF0YSkpO1xuICAgIHNldEF0dHJpYnV0ZShpbWcsIFwic3JjXCIsIGdldEF0dHJpYnV0ZShpbWcsIFNSQ19EQVRBX0FUVFJJQlVURSkpO1xuICAgIHNldEF0dHJpYnV0ZShpbWcsIFwic3Jjc2V0XCIsIGdldEF0dHJpYnV0ZShpbWcsIFNSQ1NFVF9EQVRBX0FUVFJJQlVURSkpO1xuICAgIHJlbW92ZUF0dHJpYnV0ZShpbWcsIFNSQ19EQVRBX0FUVFJJQlVURSk7XG4gICAgcmVtb3ZlQXR0cmlidXRlKGltZywgU1JDU0VUX0RBVEFfQVRUUklCVVRFKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTG9hZChkYXRhLCBlKSB7XG4gICAgdmFyIGltZyA9IGRhdGFbMF0sXG4gICAgICAgIFNsaWRlID0gZGF0YVsxXTtcbiAgICByZW1vdmVDbGFzcyhTbGlkZS5zbGlkZSwgQ0xBU1NfTE9BRElORyk7XG5cbiAgICBpZiAoZS50eXBlICE9PSBcImVycm9yXCIpIHtcbiAgICAgIHJlbW92ZShkYXRhWzJdKTtcbiAgICAgIGRpc3BsYXkoaW1nLCBcIlwiKTtcbiAgICAgIGVtaXQoRVZFTlRfTEFaWUxPQURfTE9BREVELCBpbWcsIFNsaWRlKTtcbiAgICAgIGVtaXQoRVZFTlRfUkVTSVpFKTtcbiAgICB9XG5cbiAgICBpc1NlcXVlbnRpYWwgJiYgbG9hZE5leHQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWROZXh0KCkge1xuICAgIGVudHJpZXMubGVuZ3RoICYmIGxvYWQoZW50cmllcy5zaGlmdCgpKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGFwcGx5KGVtcHR5LCBlbnRyaWVzKSxcbiAgICBjaGVjazogY2hlY2tcbiAgfTtcbn1cblxuZnVuY3Rpb24gUGFnaW5hdGlvbihTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgZXZlbnQgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKTtcbiAgdmFyIG9uID0gZXZlbnQub24sXG4gICAgICBlbWl0ID0gZXZlbnQuZW1pdCxcbiAgICAgIGJpbmQgPSBldmVudC5iaW5kO1xuICB2YXIgU2xpZGVzID0gQ29tcG9uZW50czIuU2xpZGVzLFxuICAgICAgRWxlbWVudHMgPSBDb21wb25lbnRzMi5FbGVtZW50cyxcbiAgICAgIENvbnRyb2xsZXIgPSBDb21wb25lbnRzMi5Db250cm9sbGVyO1xuICB2YXIgaGFzRm9jdXMgPSBDb250cm9sbGVyLmhhc0ZvY3VzLFxuICAgICAgZ2V0SW5kZXggPSBDb250cm9sbGVyLmdldEluZGV4LFxuICAgICAgZ28gPSBDb250cm9sbGVyLmdvO1xuICB2YXIgcmVzb2x2ZSA9IENvbXBvbmVudHMyLkRpcmVjdGlvbi5yZXNvbHZlO1xuICB2YXIgcGxhY2Vob2xkZXIgPSBFbGVtZW50cy5wYWdpbmF0aW9uO1xuICB2YXIgaXRlbXMgPSBbXTtcbiAgdmFyIGxpc3Q7XG4gIHZhciBwYWdpbmF0aW9uQ2xhc3NlcztcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBkZXN0cm95KCk7XG4gICAgb24oW0VWRU5UX1VQREFURUQsIEVWRU5UX1JFRlJFU0gsIEVWRU5UX0VORF9JTkRFWF9DSEFOR0VEXSwgbW91bnQpO1xuICAgIHZhciBlbmFibGVkID0gb3B0aW9ucy5wYWdpbmF0aW9uO1xuICAgIHBsYWNlaG9sZGVyICYmIGRpc3BsYXkocGxhY2Vob2xkZXIsIGVuYWJsZWQgPyBcIlwiIDogXCJub25lXCIpO1xuXG4gICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgIG9uKFtFVkVOVF9NT1ZFLCBFVkVOVF9TQ1JPTEwsIEVWRU5UX1NDUk9MTEVEXSwgdXBkYXRlKTtcbiAgICAgIGNyZWF0ZVBhZ2luYXRpb24oKTtcbiAgICAgIHVwZGF0ZSgpO1xuICAgICAgZW1pdChFVkVOVF9QQUdJTkFUSU9OX01PVU5URUQsIHtcbiAgICAgICAgbGlzdDogbGlzdCxcbiAgICAgICAgaXRlbXM6IGl0ZW1zXG4gICAgICB9LCBnZXRBdChTcGxpZGUyLmluZGV4KSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBpZiAobGlzdCkge1xuICAgICAgcmVtb3ZlKHBsYWNlaG9sZGVyID8gc2xpY2UobGlzdC5jaGlsZHJlbikgOiBsaXN0KTtcbiAgICAgIHJlbW92ZUNsYXNzKGxpc3QsIHBhZ2luYXRpb25DbGFzc2VzKTtcbiAgICAgIGVtcHR5KGl0ZW1zKTtcbiAgICAgIGxpc3QgPSBudWxsO1xuICAgIH1cblxuICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVBhZ2luYXRpb24oKSB7XG4gICAgdmFyIGxlbmd0aCA9IFNwbGlkZTIubGVuZ3RoO1xuICAgIHZhciBjbGFzc2VzID0gb3B0aW9ucy5jbGFzc2VzLFxuICAgICAgICBpMThuID0gb3B0aW9ucy5pMThuLFxuICAgICAgICBwZXJQYWdlID0gb3B0aW9ucy5wZXJQYWdlO1xuICAgIHZhciBtYXggPSBoYXNGb2N1cygpID8gQ29udHJvbGxlci5nZXRFbmQoKSArIDEgOiBjZWlsKGxlbmd0aCAvIHBlclBhZ2UpO1xuICAgIGxpc3QgPSBwbGFjZWhvbGRlciB8fCBjcmVhdGUoXCJ1bFwiLCBjbGFzc2VzLnBhZ2luYXRpb24sIEVsZW1lbnRzLnRyYWNrLnBhcmVudEVsZW1lbnQpO1xuICAgIGFkZENsYXNzKGxpc3QsIHBhZ2luYXRpb25DbGFzc2VzID0gQ0xBU1NfUEFHSU5BVElPTiArIFwiLS1cIiArIGdldERpcmVjdGlvbigpKTtcbiAgICBzZXRBdHRyaWJ1dGUobGlzdCwgUk9MRSwgXCJ0YWJsaXN0XCIpO1xuICAgIHNldEF0dHJpYnV0ZShsaXN0LCBBUklBX0xBQkVMLCBpMThuLnNlbGVjdCk7XG4gICAgc2V0QXR0cmlidXRlKGxpc3QsIEFSSUFfT1JJRU5UQVRJT04sIGdldERpcmVjdGlvbigpID09PSBUVEIgPyBcInZlcnRpY2FsXCIgOiBcIlwiKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgIHZhciBsaSA9IGNyZWF0ZShcImxpXCIsIG51bGwsIGxpc3QpO1xuICAgICAgdmFyIGJ1dHRvbiA9IGNyZWF0ZShcImJ1dHRvblwiLCB7XG4gICAgICAgIGNsYXNzOiBjbGFzc2VzLnBhZ2UsXG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCJcbiAgICAgIH0sIGxpKTtcbiAgICAgIHZhciBjb250cm9scyA9IFNsaWRlcy5nZXRJbihpKS5tYXAoZnVuY3Rpb24gKFNsaWRlKSB7XG4gICAgICAgIHJldHVybiBTbGlkZS5zbGlkZS5pZDtcbiAgICAgIH0pO1xuICAgICAgdmFyIHRleHQgPSAhaGFzRm9jdXMoKSAmJiBwZXJQYWdlID4gMSA/IGkxOG4ucGFnZVggOiBpMThuLnNsaWRlWDtcbiAgICAgIGJpbmQoYnV0dG9uLCBcImNsaWNrXCIsIGFwcGx5KG9uQ2xpY2ssIGkpKTtcblxuICAgICAgaWYgKG9wdGlvbnMucGFnaW5hdGlvbktleWJvYXJkKSB7XG4gICAgICAgIGJpbmQoYnV0dG9uLCBcImtleWRvd25cIiwgYXBwbHkob25LZXlkb3duLCBpKSk7XG4gICAgICB9XG5cbiAgICAgIHNldEF0dHJpYnV0ZShsaSwgUk9MRSwgXCJwcmVzZW50YXRpb25cIik7XG4gICAgICBzZXRBdHRyaWJ1dGUoYnV0dG9uLCBST0xFLCBcInRhYlwiKTtcbiAgICAgIHNldEF0dHJpYnV0ZShidXR0b24sIEFSSUFfQ09OVFJPTFMsIGNvbnRyb2xzLmpvaW4oXCIgXCIpKTtcbiAgICAgIHNldEF0dHJpYnV0ZShidXR0b24sIEFSSUFfTEFCRUwsIGZvcm1hdCh0ZXh0LCBpICsgMSkpO1xuICAgICAgc2V0QXR0cmlidXRlKGJ1dHRvbiwgVEFCX0lOREVYLCAtMSk7XG4gICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgbGk6IGxpLFxuICAgICAgICBidXR0b246IGJ1dHRvbixcbiAgICAgICAgcGFnZTogaVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25DbGljayhwYWdlKSB7XG4gICAgZ28oXCI+XCIgKyBwYWdlLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5ZG93bihwYWdlLCBlKSB7XG4gICAgdmFyIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDtcbiAgICB2YXIga2V5ID0gbm9ybWFsaXplS2V5KGUpO1xuICAgIHZhciBkaXIgPSBnZXREaXJlY3Rpb24oKTtcbiAgICB2YXIgbmV4dFBhZ2UgPSAtMTtcblxuICAgIGlmIChrZXkgPT09IHJlc29sdmUoQVJST1dfUklHSFQsIGZhbHNlLCBkaXIpKSB7XG4gICAgICBuZXh0UGFnZSA9ICsrcGFnZSAlIGxlbmd0aDtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gcmVzb2x2ZShBUlJPV19MRUZULCBmYWxzZSwgZGlyKSkge1xuICAgICAgbmV4dFBhZ2UgPSAoLS1wYWdlICsgbGVuZ3RoKSAlIGxlbmd0aDtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJIb21lXCIpIHtcbiAgICAgIG5leHRQYWdlID0gMDtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJFbmRcIikge1xuICAgICAgbmV4dFBhZ2UgPSBsZW5ndGggLSAxO1xuICAgIH1cblxuICAgIHZhciBpdGVtID0gaXRlbXNbbmV4dFBhZ2VdO1xuXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGZvY3VzKGl0ZW0uYnV0dG9uKTtcbiAgICAgIGdvKFwiPlwiICsgbmV4dFBhZ2UpO1xuICAgICAgcHJldmVudChlLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXREaXJlY3Rpb24oKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMucGFnaW5hdGlvbkRpcmVjdGlvbiB8fCBvcHRpb25zLmRpcmVjdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEF0KGluZGV4KSB7XG4gICAgcmV0dXJuIGl0ZW1zW0NvbnRyb2xsZXIudG9QYWdlKGluZGV4KV07XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgdmFyIHByZXYgPSBnZXRBdChnZXRJbmRleCh0cnVlKSk7XG4gICAgdmFyIGN1cnIgPSBnZXRBdChnZXRJbmRleCgpKTtcblxuICAgIGlmIChwcmV2KSB7XG4gICAgICB2YXIgYnV0dG9uID0gcHJldi5idXR0b247XG4gICAgICByZW1vdmVDbGFzcyhidXR0b24sIENMQVNTX0FDVElWRSk7XG4gICAgICByZW1vdmVBdHRyaWJ1dGUoYnV0dG9uLCBBUklBX1NFTEVDVEVEKTtcbiAgICAgIHNldEF0dHJpYnV0ZShidXR0b24sIFRBQl9JTkRFWCwgLTEpO1xuICAgIH1cblxuICAgIGlmIChjdXJyKSB7XG4gICAgICB2YXIgX2J1dHRvbiA9IGN1cnIuYnV0dG9uO1xuICAgICAgYWRkQ2xhc3MoX2J1dHRvbiwgQ0xBU1NfQUNUSVZFKTtcbiAgICAgIHNldEF0dHJpYnV0ZShfYnV0dG9uLCBBUklBX1NFTEVDVEVELCB0cnVlKTtcbiAgICAgIHNldEF0dHJpYnV0ZShfYnV0dG9uLCBUQUJfSU5ERVgsIFwiXCIpO1xuICAgIH1cblxuICAgIGVtaXQoRVZFTlRfUEFHSU5BVElPTl9VUERBVEVELCB7XG4gICAgICBsaXN0OiBsaXN0LFxuICAgICAgaXRlbXM6IGl0ZW1zXG4gICAgfSwgcHJldiwgY3Vycik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGl0ZW1zOiBpdGVtcyxcbiAgICBtb3VudDogbW91bnQsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICBnZXRBdDogZ2V0QXQsXG4gICAgdXBkYXRlOiB1cGRhdGVcbiAgfTtcbn1cblxudmFyIFRSSUdHRVJfS0VZUyA9IFtcIiBcIiwgXCJFbnRlclwiXTtcblxuZnVuY3Rpb24gU3luYyhTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgaXNOYXZpZ2F0aW9uID0gb3B0aW9ucy5pc05hdmlnYXRpb24sXG4gICAgICBzbGlkZUZvY3VzID0gb3B0aW9ucy5zbGlkZUZvY3VzO1xuICB2YXIgZXZlbnRzID0gW107XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgU3BsaWRlMi5zcGxpZGVzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgaWYgKCF0YXJnZXQuaXNQYXJlbnQpIHtcbiAgICAgICAgc3luYyhTcGxpZGUyLCB0YXJnZXQuc3BsaWRlKTtcbiAgICAgICAgc3luYyh0YXJnZXQuc3BsaWRlLCBTcGxpZGUyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChpc05hdmlnYXRpb24pIHtcbiAgICAgIG5hdmlnYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LmRlc3Ryb3koKTtcbiAgICB9KTtcbiAgICBlbXB0eShldmVudHMpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3VudCgpIHtcbiAgICBkZXN0cm95KCk7XG4gICAgbW91bnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN5bmMoc3BsaWRlLCB0YXJnZXQpIHtcbiAgICB2YXIgZXZlbnQgPSBFdmVudEludGVyZmFjZShzcGxpZGUpO1xuICAgIGV2ZW50Lm9uKEVWRU5UX01PVkUsIGZ1bmN0aW9uIChpbmRleCwgcHJldiwgZGVzdCkge1xuICAgICAgdGFyZ2V0LmdvKHRhcmdldC5pcyhMT09QKSA/IGRlc3QgOiBpbmRleCk7XG4gICAgfSk7XG4gICAgZXZlbnRzLnB1c2goZXZlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gbmF2aWdhdGUoKSB7XG4gICAgdmFyIGV2ZW50ID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMik7XG4gICAgdmFyIG9uID0gZXZlbnQub247XG4gICAgb24oRVZFTlRfQ0xJQ0ssIG9uQ2xpY2spO1xuICAgIG9uKEVWRU5UX1NMSURFX0tFWURPV04sIG9uS2V5ZG93bik7XG4gICAgb24oW0VWRU5UX01PVU5URUQsIEVWRU5UX1VQREFURURdLCB1cGRhdGUpO1xuICAgIGV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgICBldmVudC5lbWl0KEVWRU5UX05BVklHQVRJT05fTU9VTlRFRCwgU3BsaWRlMi5zcGxpZGVzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBzZXRBdHRyaWJ1dGUoQ29tcG9uZW50czIuRWxlbWVudHMubGlzdCwgQVJJQV9PUklFTlRBVElPTiwgb3B0aW9ucy5kaXJlY3Rpb24gPT09IFRUQiA/IFwidmVydGljYWxcIiA6IFwiXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25DbGljayhTbGlkZSkge1xuICAgIFNwbGlkZTIuZ28oU2xpZGUuaW5kZXgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlkb3duKFNsaWRlLCBlKSB7XG4gICAgaWYgKGluY2x1ZGVzKFRSSUdHRVJfS0VZUywgbm9ybWFsaXplS2V5KGUpKSkge1xuICAgICAgb25DbGljayhTbGlkZSk7XG4gICAgICBwcmV2ZW50KGUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc2V0dXA6IGFwcGx5KENvbXBvbmVudHMyLk1lZGlhLnNldCwge1xuICAgICAgc2xpZGVGb2N1czogaXNVbmRlZmluZWQoc2xpZGVGb2N1cykgPyBpc05hdmlnYXRpb24gOiBzbGlkZUZvY3VzXG4gICAgfSwgdHJ1ZSksXG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgcmVtb3VudDogcmVtb3VudFxuICB9O1xufVxuXG5mdW5jdGlvbiBXaGVlbChTcGxpZGUyLCBDb21wb25lbnRzMiwgb3B0aW9ucykge1xuICB2YXIgX0V2ZW50SW50ZXJmYWNlMTIgPSBFdmVudEludGVyZmFjZShTcGxpZGUyKSxcbiAgICAgIGJpbmQgPSBfRXZlbnRJbnRlcmZhY2UxMi5iaW5kO1xuXG4gIHZhciBsYXN0VGltZSA9IDA7XG5cbiAgZnVuY3Rpb24gbW91bnQoKSB7XG4gICAgaWYgKG9wdGlvbnMud2hlZWwpIHtcbiAgICAgIGJpbmQoQ29tcG9uZW50czIuRWxlbWVudHMudHJhY2ssIFwid2hlZWxcIiwgb25XaGVlbCwgU0NST0xMX0xJU1RFTkVSX09QVElPTlMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uV2hlZWwoZSkge1xuICAgIGlmIChlLmNhbmNlbGFibGUpIHtcbiAgICAgIHZhciBkZWx0YVkgPSBlLmRlbHRhWTtcbiAgICAgIHZhciBiYWNrd2FyZHMgPSBkZWx0YVkgPCAwO1xuICAgICAgdmFyIHRpbWVTdGFtcCA9IHRpbWVPZihlKTtcblxuICAgICAgdmFyIF9taW4gPSBvcHRpb25zLndoZWVsTWluVGhyZXNob2xkIHx8IDA7XG5cbiAgICAgIHZhciBzbGVlcCA9IG9wdGlvbnMud2hlZWxTbGVlcCB8fCAwO1xuXG4gICAgICBpZiAoYWJzKGRlbHRhWSkgPiBfbWluICYmIHRpbWVTdGFtcCAtIGxhc3RUaW1lID4gc2xlZXApIHtcbiAgICAgICAgU3BsaWRlMi5nbyhiYWNrd2FyZHMgPyBcIjxcIiA6IFwiPlwiKTtcbiAgICAgICAgbGFzdFRpbWUgPSB0aW1lU3RhbXA7XG4gICAgICB9XG5cbiAgICAgIHNob3VsZFByZXZlbnQoYmFja3dhcmRzKSAmJiBwcmV2ZW50KGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZFByZXZlbnQoYmFja3dhcmRzKSB7XG4gICAgcmV0dXJuICFvcHRpb25zLnJlbGVhc2VXaGVlbCB8fCBTcGxpZGUyLnN0YXRlLmlzKE1PVklORykgfHwgQ29tcG9uZW50czIuQ29udHJvbGxlci5nZXRBZGphY2VudChiYWNrd2FyZHMpICE9PSAtMTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50XG4gIH07XG59XG5cbnZhciBTUl9SRU1PVkFMX0RFTEFZID0gOTA7XG5cbmZ1bmN0aW9uIExpdmUoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIF9FdmVudEludGVyZmFjZTEzID0gRXZlbnRJbnRlcmZhY2UoU3BsaWRlMiksXG4gICAgICBvbiA9IF9FdmVudEludGVyZmFjZTEzLm9uO1xuXG4gIHZhciB0cmFjayA9IENvbXBvbmVudHMyLkVsZW1lbnRzLnRyYWNrO1xuICB2YXIgZW5hYmxlZCA9IG9wdGlvbnMubGl2ZSAmJiAhb3B0aW9ucy5pc05hdmlnYXRpb247XG4gIHZhciBzciA9IGNyZWF0ZShcInNwYW5cIiwgQ0xBU1NfU1IpO1xuICB2YXIgaW50ZXJ2YWwgPSBSZXF1ZXN0SW50ZXJ2YWwoU1JfUkVNT1ZBTF9ERUxBWSwgYXBwbHkodG9nZ2xlLCBmYWxzZSkpO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIGlmIChlbmFibGVkKSB7XG4gICAgICBkaXNhYmxlKCFDb21wb25lbnRzMi5BdXRvcGxheS5pc1BhdXNlZCgpKTtcbiAgICAgIHNldEF0dHJpYnV0ZSh0cmFjaywgQVJJQV9BVE9NSUMsIHRydWUpO1xuICAgICAgc3IudGV4dENvbnRlbnQgPSBcIlxcdTIwMjZcIjtcbiAgICAgIG9uKEVWRU5UX0FVVE9QTEFZX1BMQVksIGFwcGx5KGRpc2FibGUsIHRydWUpKTtcbiAgICAgIG9uKEVWRU5UX0FVVE9QTEFZX1BBVVNFLCBhcHBseShkaXNhYmxlLCBmYWxzZSkpO1xuICAgICAgb24oW0VWRU5UX01PVkVELCBFVkVOVF9TQ1JPTExFRF0sIGFwcGx5KHRvZ2dsZSwgdHJ1ZSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZShhY3RpdmUpIHtcbiAgICBzZXRBdHRyaWJ1dGUodHJhY2ssIEFSSUFfQlVTWSwgYWN0aXZlKTtcblxuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIGFwcGVuZCh0cmFjaywgc3IpO1xuICAgICAgaW50ZXJ2YWwuc3RhcnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKHNyKTtcbiAgICAgIGludGVydmFsLmNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgcmVtb3ZlQXR0cmlidXRlKHRyYWNrLCBbQVJJQV9MSVZFLCBBUklBX0FUT01JQywgQVJJQV9CVVNZXSk7XG4gICAgcmVtb3ZlKHNyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGUoZGlzYWJsZWQpIHtcbiAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgc2V0QXR0cmlidXRlKHRyYWNrLCBBUklBX0xJVkUsIGRpc2FibGVkID8gXCJvZmZcIiA6IFwicG9saXRlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbW91bnQ6IG1vdW50LFxuICAgIGRpc2FibGU6IGRpc2FibGUsXG4gICAgZGVzdHJveTogZGVzdHJveVxuICB9O1xufVxuXG52YXIgQ29tcG9uZW50Q29uc3RydWN0b3JzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIE1lZGlhOiBNZWRpYSxcbiAgRGlyZWN0aW9uOiBEaXJlY3Rpb24sXG4gIEVsZW1lbnRzOiBFbGVtZW50cyxcbiAgU2xpZGVzOiBTbGlkZXMsXG4gIExheW91dDogTGF5b3V0LFxuICBDbG9uZXM6IENsb25lcyxcbiAgTW92ZTogTW92ZSxcbiAgQ29udHJvbGxlcjogQ29udHJvbGxlcixcbiAgQXJyb3dzOiBBcnJvd3MsXG4gIEF1dG9wbGF5OiBBdXRvcGxheSxcbiAgQ292ZXI6IENvdmVyLFxuICBTY3JvbGw6IFNjcm9sbCxcbiAgRHJhZzogRHJhZyxcbiAgS2V5Ym9hcmQ6IEtleWJvYXJkLFxuICBMYXp5TG9hZDogTGF6eUxvYWQsXG4gIFBhZ2luYXRpb246IFBhZ2luYXRpb24sXG4gIFN5bmM6IFN5bmMsXG4gIFdoZWVsOiBXaGVlbCxcbiAgTGl2ZTogTGl2ZVxufSk7XG52YXIgSTE4TiA9IHtcbiAgcHJldjogXCJQcmV2aW91cyBzbGlkZVwiLFxuICBuZXh0OiBcIk5leHQgc2xpZGVcIixcbiAgZmlyc3Q6IFwiR28gdG8gZmlyc3Qgc2xpZGVcIixcbiAgbGFzdDogXCJHbyB0byBsYXN0IHNsaWRlXCIsXG4gIHNsaWRlWDogXCJHbyB0byBzbGlkZSAlc1wiLFxuICBwYWdlWDogXCJHbyB0byBwYWdlICVzXCIsXG4gIHBsYXk6IFwiU3RhcnQgYXV0b3BsYXlcIixcbiAgcGF1c2U6IFwiUGF1c2UgYXV0b3BsYXlcIixcbiAgY2Fyb3VzZWw6IFwiY2Fyb3VzZWxcIixcbiAgc2xpZGU6IFwic2xpZGVcIixcbiAgc2VsZWN0OiBcIlNlbGVjdCBhIHNsaWRlIHRvIHNob3dcIixcbiAgc2xpZGVMYWJlbDogXCIlcyBvZiAlc1wiXG59O1xudmFyIERFRkFVTFRTID0ge1xuICB0eXBlOiBcInNsaWRlXCIsXG4gIHJvbGU6IFwicmVnaW9uXCIsXG4gIHNwZWVkOiA0MDAsXG4gIHBlclBhZ2U6IDEsXG4gIGNsb25lU3RhdHVzOiB0cnVlLFxuICBhcnJvd3M6IHRydWUsXG4gIHBhZ2luYXRpb246IHRydWUsXG4gIHBhZ2luYXRpb25LZXlib2FyZDogdHJ1ZSxcbiAgaW50ZXJ2YWw6IDVlMyxcbiAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICBwYXVzZU9uRm9jdXM6IHRydWUsXG4gIHJlc2V0UHJvZ3Jlc3M6IHRydWUsXG4gIGVhc2luZzogXCJjdWJpYy1iZXppZXIoMC4yNSwgMSwgMC41LCAxKVwiLFxuICBkcmFnOiB0cnVlLFxuICBkaXJlY3Rpb246IFwibHRyXCIsXG4gIHRyaW1TcGFjZTogdHJ1ZSxcbiAgZm9jdXNhYmxlTm9kZXM6IFwiYSwgYnV0dG9uLCB0ZXh0YXJlYSwgaW5wdXQsIHNlbGVjdCwgaWZyYW1lXCIsXG4gIGxpdmU6IHRydWUsXG4gIGNsYXNzZXM6IENMQVNTRVMsXG4gIGkxOG46IEkxOE4sXG4gIHJlZHVjZWRNb3Rpb246IHtcbiAgICBzcGVlZDogMCxcbiAgICByZXdpbmRTcGVlZDogMCxcbiAgICBhdXRvcGxheTogXCJwYXVzZVwiXG4gIH1cbn07XG5cbmZ1bmN0aW9uIEZhZGUoU3BsaWRlMiwgQ29tcG9uZW50czIsIG9wdGlvbnMpIHtcbiAgdmFyIFNsaWRlcyA9IENvbXBvbmVudHMyLlNsaWRlcztcblxuICBmdW5jdGlvbiBtb3VudCgpIHtcbiAgICBFdmVudEludGVyZmFjZShTcGxpZGUyKS5vbihbRVZFTlRfTU9VTlRFRCwgRVZFTlRfUkVGUkVTSF0sIGluaXQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBTbGlkZXMuZm9yRWFjaChmdW5jdGlvbiAoU2xpZGUpIHtcbiAgICAgIFNsaWRlLnN0eWxlKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlWCgtXCIgKyAxMDAgKiBTbGlkZS5pbmRleCArIFwiJSlcIik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydChpbmRleCwgZG9uZSkge1xuICAgIFNsaWRlcy5zdHlsZShcInRyYW5zaXRpb25cIiwgXCJvcGFjaXR5IFwiICsgb3B0aW9ucy5zcGVlZCArIFwibXMgXCIgKyBvcHRpb25zLmVhc2luZyk7XG4gICAgbmV4dFRpY2soZG9uZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBzdGFydDogc3RhcnQsXG4gICAgY2FuY2VsOiBub29wXG4gIH07XG59XG5cbmZ1bmN0aW9uIFNsaWRlKFNwbGlkZTIsIENvbXBvbmVudHMyLCBvcHRpb25zKSB7XG4gIHZhciBNb3ZlID0gQ29tcG9uZW50czIuTW92ZSxcbiAgICAgIENvbnRyb2xsZXIgPSBDb21wb25lbnRzMi5Db250cm9sbGVyLFxuICAgICAgU2Nyb2xsID0gQ29tcG9uZW50czIuU2Nyb2xsO1xuICB2YXIgbGlzdCA9IENvbXBvbmVudHMyLkVsZW1lbnRzLmxpc3Q7XG4gIHZhciB0cmFuc2l0aW9uID0gYXBwbHkoc3R5bGUsIGxpc3QsIFwidHJhbnNpdGlvblwiKTtcbiAgdmFyIGVuZENhbGxiYWNrO1xuXG4gIGZ1bmN0aW9uIG1vdW50KCkge1xuICAgIEV2ZW50SW50ZXJmYWNlKFNwbGlkZTIpLmJpbmQobGlzdCwgXCJ0cmFuc2l0aW9uZW5kXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQgPT09IGxpc3QgJiYgZW5kQ2FsbGJhY2spIHtcbiAgICAgICAgY2FuY2VsKCk7XG4gICAgICAgIGVuZENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydChpbmRleCwgZG9uZSkge1xuICAgIHZhciBkZXN0aW5hdGlvbiA9IE1vdmUudG9Qb3NpdGlvbihpbmRleCwgdHJ1ZSk7XG4gICAgdmFyIHBvc2l0aW9uID0gTW92ZS5nZXRQb3NpdGlvbigpO1xuICAgIHZhciBzcGVlZCA9IGdldFNwZWVkKGluZGV4KTtcblxuICAgIGlmIChhYnMoZGVzdGluYXRpb24gLSBwb3NpdGlvbikgPj0gMSAmJiBzcGVlZCA+PSAxKSB7XG4gICAgICBpZiAob3B0aW9ucy51c2VTY3JvbGwpIHtcbiAgICAgICAgU2Nyb2xsLnNjcm9sbChkZXN0aW5hdGlvbiwgc3BlZWQsIGZhbHNlLCBkb25lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYW5zaXRpb24oXCJ0cmFuc2Zvcm0gXCIgKyBzcGVlZCArIFwibXMgXCIgKyBvcHRpb25zLmVhc2luZyk7XG4gICAgICAgIE1vdmUudHJhbnNsYXRlKGRlc3RpbmF0aW9uLCB0cnVlKTtcbiAgICAgICAgZW5kQ2FsbGJhY2sgPSBkb25lO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBNb3ZlLmp1bXAoaW5kZXgpO1xuICAgICAgZG9uZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICB0cmFuc2l0aW9uKFwiXCIpO1xuICAgIFNjcm9sbC5jYW5jZWwoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNwZWVkKGluZGV4KSB7XG4gICAgdmFyIHJld2luZFNwZWVkID0gb3B0aW9ucy5yZXdpbmRTcGVlZDtcblxuICAgIGlmIChTcGxpZGUyLmlzKFNMSURFKSAmJiByZXdpbmRTcGVlZCkge1xuICAgICAgdmFyIHByZXYgPSBDb250cm9sbGVyLmdldEluZGV4KHRydWUpO1xuICAgICAgdmFyIGVuZCA9IENvbnRyb2xsZXIuZ2V0RW5kKCk7XG5cbiAgICAgIGlmIChwcmV2ID09PSAwICYmIGluZGV4ID49IGVuZCB8fCBwcmV2ID49IGVuZCAmJiBpbmRleCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmV3aW5kU3BlZWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbnMuc3BlZWQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1vdW50OiBtb3VudCxcbiAgICBzdGFydDogc3RhcnQsXG4gICAgY2FuY2VsOiBjYW5jZWxcbiAgfTtcbn1cblxudmFyIF9TcGxpZGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBfU3BsaWRlKHRhcmdldCwgb3B0aW9ucykge1xuICAgIHRoaXMuZXZlbnQgPSBFdmVudEludGVyZmFjZSgpO1xuICAgIHRoaXMuQ29tcG9uZW50cyA9IHt9O1xuICAgIHRoaXMuc3RhdGUgPSBTdGF0ZShDUkVBVEVEKTtcbiAgICB0aGlzLnNwbGlkZXMgPSBbXTtcbiAgICB0aGlzLl9vID0ge307XG4gICAgdGhpcy5fRSA9IHt9O1xuICAgIHZhciByb290ID0gaXNTdHJpbmcodGFyZ2V0KSA/IHF1ZXJ5KGRvY3VtZW50LCB0YXJnZXQpIDogdGFyZ2V0O1xuICAgIGFzc2VydChyb290LCByb290ICsgXCIgaXMgaW52YWxpZC5cIik7XG4gICAgdGhpcy5yb290ID0gcm9vdDtcbiAgICBvcHRpb25zID0gbWVyZ2Uoe1xuICAgICAgbGFiZWw6IGdldEF0dHJpYnV0ZShyb290LCBBUklBX0xBQkVMKSB8fCBcIlwiLFxuICAgICAgbGFiZWxsZWRieTogZ2V0QXR0cmlidXRlKHJvb3QsIEFSSUFfTEFCRUxMRURCWSkgfHwgXCJcIlxuICAgIH0sIERFRkFVTFRTLCBfU3BsaWRlLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRyeSB7XG4gICAgICBtZXJnZShvcHRpb25zLCBKU09OLnBhcnNlKGdldEF0dHJpYnV0ZShyb290LCBEQVRBX0FUVFJJQlVURSkpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBhc3NlcnQoZmFsc2UsIFwiSW52YWxpZCBKU09OXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX28gPSBPYmplY3QuY3JlYXRlKG1lcmdlKHt9LCBvcHRpb25zKSk7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gX1NwbGlkZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLm1vdW50ID0gZnVuY3Rpb24gbW91bnQoRXh0ZW5zaW9ucywgVHJhbnNpdGlvbikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICBDb21wb25lbnRzMiA9IHRoaXMuQ29tcG9uZW50cztcbiAgICBhc3NlcnQoc3RhdGUuaXMoW0NSRUFURUQsIERFU1RST1lFRF0pLCBcIkFscmVhZHkgbW91bnRlZCFcIik7XG4gICAgc3RhdGUuc2V0KENSRUFURUQpO1xuICAgIHRoaXMuX0MgPSBDb21wb25lbnRzMjtcbiAgICB0aGlzLl9UID0gVHJhbnNpdGlvbiB8fCB0aGlzLl9UIHx8ICh0aGlzLmlzKEZBREUpID8gRmFkZSA6IFNsaWRlKTtcbiAgICB0aGlzLl9FID0gRXh0ZW5zaW9ucyB8fCB0aGlzLl9FO1xuICAgIHZhciBDb25zdHJ1Y3RvcnMgPSBhc3NpZ24oe30sIENvbXBvbmVudENvbnN0cnVjdG9ycywgdGhpcy5fRSwge1xuICAgICAgVHJhbnNpdGlvbjogdGhpcy5fVFxuICAgIH0pO1xuICAgIGZvck93bihDb25zdHJ1Y3RvcnMsIGZ1bmN0aW9uIChDb21wb25lbnQsIGtleSkge1xuICAgICAgdmFyIGNvbXBvbmVudCA9IENvbXBvbmVudChfdGhpcywgQ29tcG9uZW50czIsIF90aGlzLl9vKTtcbiAgICAgIENvbXBvbmVudHMyW2tleV0gPSBjb21wb25lbnQ7XG4gICAgICBjb21wb25lbnQuc2V0dXAgJiYgY29tcG9uZW50LnNldHVwKCk7XG4gICAgfSk7XG4gICAgZm9yT3duKENvbXBvbmVudHMyLCBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICBjb21wb25lbnQubW91bnQgJiYgY29tcG9uZW50Lm1vdW50KCk7XG4gICAgfSk7XG4gICAgdGhpcy5lbWl0KEVWRU5UX01PVU5URUQpO1xuICAgIGFkZENsYXNzKHRoaXMucm9vdCwgQ0xBU1NfSU5JVElBTElaRUQpO1xuICAgIHN0YXRlLnNldChJRExFKTtcbiAgICB0aGlzLmVtaXQoRVZFTlRfUkVBRFkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5zeW5jID0gZnVuY3Rpb24gc3luYyhzcGxpZGUpIHtcbiAgICB0aGlzLnNwbGlkZXMucHVzaCh7XG4gICAgICBzcGxpZGU6IHNwbGlkZVxuICAgIH0pO1xuICAgIHNwbGlkZS5zcGxpZGVzLnB1c2goe1xuICAgICAgc3BsaWRlOiB0aGlzLFxuICAgICAgaXNQYXJlbnQ6IHRydWVcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnN0YXRlLmlzKElETEUpKSB7XG4gICAgICB0aGlzLl9DLlN5bmMucmVtb3VudCgpO1xuXG4gICAgICBzcGxpZGUuQ29tcG9uZW50cy5TeW5jLnJlbW91bnQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8uZ28gPSBmdW5jdGlvbiBnbyhjb250cm9sKSB7XG4gICAgdGhpcy5fQy5Db250cm9sbGVyLmdvKGNvbnRyb2wpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLm9uID0gZnVuY3Rpb24gb24oZXZlbnRzLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZXZlbnQub24oZXZlbnRzLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLm9mZiA9IGZ1bmN0aW9uIG9mZihldmVudHMpIHtcbiAgICB0aGlzLmV2ZW50Lm9mZihldmVudHMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudCkge1xuICAgIHZhciBfdGhpcyRldmVudDtcblxuICAgIChfdGhpcyRldmVudCA9IHRoaXMuZXZlbnQpLmVtaXQuYXBwbHkoX3RoaXMkZXZlbnQsIFtldmVudF0uY29uY2F0KHNsaWNlKGFyZ3VtZW50cywgMSkpKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5hZGQgPSBmdW5jdGlvbiBhZGQoc2xpZGVzLCBpbmRleCkge1xuICAgIHRoaXMuX0MuU2xpZGVzLmFkZChzbGlkZXMsIGluZGV4KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobWF0Y2hlcikge1xuICAgIHRoaXMuX0MuU2xpZGVzLnJlbW92ZShtYXRjaGVyKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5pcyA9IGZ1bmN0aW9uIGlzKHR5cGUpIHtcbiAgICByZXR1cm4gdGhpcy5fby50eXBlID09PSB0eXBlO1xuICB9O1xuXG4gIF9wcm90by5yZWZyZXNoID0gZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICB0aGlzLmVtaXQoRVZFTlRfUkVGUkVTSCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX3Byb3RvLmRlc3Ryb3kgPSBmdW5jdGlvbiBkZXN0cm95KGNvbXBsZXRlbHkpIHtcbiAgICBpZiAoY29tcGxldGVseSA9PT0gdm9pZCAwKSB7XG4gICAgICBjb21wbGV0ZWx5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgZXZlbnQgPSB0aGlzLmV2ZW50LFxuICAgICAgICBzdGF0ZSA9IHRoaXMuc3RhdGU7XG5cbiAgICBpZiAoc3RhdGUuaXMoQ1JFQVRFRCkpIHtcbiAgICAgIEV2ZW50SW50ZXJmYWNlKHRoaXMpLm9uKEVWRU5UX1JFQURZLCB0aGlzLmRlc3Ryb3kuYmluZCh0aGlzLCBjb21wbGV0ZWx5KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvck93bih0aGlzLl9DLCBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIGNvbXBvbmVudC5kZXN0cm95ICYmIGNvbXBvbmVudC5kZXN0cm95KGNvbXBsZXRlbHkpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgICBldmVudC5lbWl0KEVWRU5UX0RFU1RST1kpO1xuICAgICAgZXZlbnQuZGVzdHJveSgpO1xuICAgICAgY29tcGxldGVseSAmJiBlbXB0eSh0aGlzLnNwbGlkZXMpO1xuICAgICAgc3RhdGUuc2V0KERFU1RST1lFRCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKF9TcGxpZGUsIFt7XG4gICAga2V5OiBcIm9wdGlvbnNcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9vO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQob3B0aW9ucykge1xuICAgICAgdGhpcy5fQy5NZWRpYS5zZXQob3B0aW9ucywgdHJ1ZSwgdHJ1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImxlbmd0aFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX0MuU2xpZGVzLmdldExlbmd0aCh0cnVlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5kZXhcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9DLkNvbnRyb2xsZXIuZ2V0SW5kZXgoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gX1NwbGlkZTtcbn0oKTtcblxudmFyIFNwbGlkZSA9IF9TcGxpZGU7XG5TcGxpZGUuZGVmYXVsdHMgPSB7fTtcblNwbGlkZS5TVEFURVMgPSBTVEFURVM7XG52YXIgQ0xBU1NfUkVOREVSRUQgPSBcImlzLXJlbmRlcmVkXCI7XG52YXIgUkVOREVSRVJfREVGQVVMVF9DT05GSUcgPSB7XG4gIGxpc3RUYWc6IFwidWxcIixcbiAgc2xpZGVUYWc6IFwibGlcIlxufTtcblxudmFyIFN0eWxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3R5bGUoaWQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnN0eWxlcyA9IHt9O1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgdmFyIF9wcm90bzIgPSBTdHlsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvMi5ydWxlID0gZnVuY3Rpb24gcnVsZShzZWxlY3RvciwgcHJvcCwgdmFsdWUsIGJyZWFrcG9pbnQpIHtcbiAgICBicmVha3BvaW50ID0gYnJlYWtwb2ludCB8fCBcImRlZmF1bHRcIjtcbiAgICB2YXIgc2VsZWN0b3JzID0gdGhpcy5zdHlsZXNbYnJlYWtwb2ludF0gPSB0aGlzLnN0eWxlc1ticmVha3BvaW50XSB8fCB7fTtcbiAgICB2YXIgc3R5bGVzID0gc2VsZWN0b3JzW3NlbGVjdG9yXSA9IHNlbGVjdG9yc1tzZWxlY3Rvcl0gfHwge307XG4gICAgc3R5bGVzW3Byb3BdID0gdmFsdWU7XG4gIH07XG5cbiAgX3Byb3RvMi5idWlsZCA9IGZ1bmN0aW9uIGJ1aWxkKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIGNzcyA9IFwiXCI7XG5cbiAgICBpZiAodGhpcy5zdHlsZXMuZGVmYXVsdCkge1xuICAgICAgY3NzICs9IHRoaXMuYnVpbGRTZWxlY3RvcnModGhpcy5zdHlsZXMuZGVmYXVsdCk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmtleXModGhpcy5zdHlsZXMpLnNvcnQoZnVuY3Rpb24gKG4sIG0pIHtcbiAgICAgIHJldHVybiBfdGhpczIub3B0aW9ucy5tZWRpYVF1ZXJ5ID09PSBcIm1pblwiID8gK24gLSArbSA6ICttIC0gK247XG4gICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoYnJlYWtwb2ludCkge1xuICAgICAgaWYgKGJyZWFrcG9pbnQgIT09IFwiZGVmYXVsdFwiKSB7XG4gICAgICAgIGNzcyArPSBcIkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IFwiICsgYnJlYWtwb2ludCArIFwicHgpIHtcIjtcbiAgICAgICAgY3NzICs9IF90aGlzMi5idWlsZFNlbGVjdG9ycyhfdGhpczIuc3R5bGVzW2JyZWFrcG9pbnRdKTtcbiAgICAgICAgY3NzICs9IFwifVwiO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjc3M7XG4gIH07XG5cbiAgX3Byb3RvMi5idWlsZFNlbGVjdG9ycyA9IGZ1bmN0aW9uIGJ1aWxkU2VsZWN0b3JzKHNlbGVjdG9ycykge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIGNzcyA9IFwiXCI7XG4gICAgZm9yT3duKHNlbGVjdG9ycywgZnVuY3Rpb24gKHN0eWxlcywgc2VsZWN0b3IpIHtcbiAgICAgIHNlbGVjdG9yID0gKFwiI1wiICsgX3RoaXMzLmlkICsgXCIgXCIgKyBzZWxlY3RvcikudHJpbSgpO1xuICAgICAgY3NzICs9IHNlbGVjdG9yICsgXCIge1wiO1xuICAgICAgZm9yT3duKHN0eWxlcywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7XG4gICAgICAgIGlmICh2YWx1ZSB8fCB2YWx1ZSA9PT0gMCkge1xuICAgICAgICAgIGNzcyArPSBwcm9wICsgXCI6IFwiICsgdmFsdWUgKyBcIjtcIjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjc3MgKz0gXCJ9XCI7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNzcztcbiAgfTtcblxuICByZXR1cm4gU3R5bGU7XG59KCk7XG5cbnZhciBTcGxpZGVSZW5kZXJlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNwbGlkZVJlbmRlcmVyKGNvbnRlbnRzLCBvcHRpb25zLCBjb25maWcsIGRlZmF1bHRzKSB7XG4gICAgdGhpcy5zbGlkZXMgPSBbXTtcbiAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICB0aGlzLmJyZWFrcG9pbnRzID0gW107XG4gICAgbWVyZ2UoREVGQVVMVFMsIGRlZmF1bHRzIHx8IHt9KTtcbiAgICBtZXJnZShtZXJnZSh0aGlzLm9wdGlvbnMsIERFRkFVTFRTKSwgb3B0aW9ucyB8fCB7fSk7XG4gICAgdGhpcy5jb250ZW50cyA9IGNvbnRlbnRzO1xuICAgIHRoaXMuY29uZmlnID0gYXNzaWduKHt9LCBSRU5ERVJFUl9ERUZBVUxUX0NPTkZJRywgY29uZmlnIHx8IHt9KTtcbiAgICB0aGlzLmlkID0gdGhpcy5jb25maWcuaWQgfHwgdW5pcXVlSWQoXCJzcGxpZGVcIik7XG4gICAgdGhpcy5TdHlsZSA9IG5ldyBTdHlsZSh0aGlzLmlkLCB0aGlzLm9wdGlvbnMpO1xuICAgIHRoaXMuRGlyZWN0aW9uID0gRGlyZWN0aW9uKG51bGwsIG51bGwsIHRoaXMub3B0aW9ucyk7XG4gICAgYXNzZXJ0KHRoaXMuY29udGVudHMubGVuZ3RoLCBcIlByb3ZpZGUgYXQgbGVhc3QgMSBjb250ZW50LlwiKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIFNwbGlkZVJlbmRlcmVyLmNsZWFuID0gZnVuY3Rpb24gY2xlYW4oc3BsaWRlKSB7XG4gICAgdmFyIF9FdmVudEludGVyZmFjZTE0ID0gRXZlbnRJbnRlcmZhY2Uoc3BsaWRlKSxcbiAgICAgICAgb24gPSBfRXZlbnRJbnRlcmZhY2UxNC5vbjtcblxuICAgIHZhciByb290ID0gc3BsaWRlLnJvb3Q7XG4gICAgdmFyIGNsb25lcyA9IHF1ZXJ5QWxsKHJvb3QsIFwiLlwiICsgQ0xBU1NfQ0xPTkUpO1xuICAgIG9uKEVWRU5UX01PVU5URUQsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZShjaGlsZChyb290LCBcInN0eWxlXCIpKTtcbiAgICB9KTtcbiAgICByZW1vdmUoY2xvbmVzKTtcbiAgfTtcblxuICB2YXIgX3Byb3RvMyA9IFNwbGlkZVJlbmRlcmVyLnByb3RvdHlwZTtcblxuICBfcHJvdG8zLmluaXQgPSBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMucGFyc2VCcmVha3BvaW50cygpO1xuICAgIHRoaXMuaW5pdFNsaWRlcygpO1xuICAgIHRoaXMucmVnaXN0ZXJSb290U3R5bGVzKCk7XG4gICAgdGhpcy5yZWdpc3RlclRyYWNrU3R5bGVzKCk7XG4gICAgdGhpcy5yZWdpc3RlclNsaWRlU3R5bGVzKCk7XG4gICAgdGhpcy5yZWdpc3Rlckxpc3RTdHlsZXMoKTtcbiAgfTtcblxuICBfcHJvdG8zLmluaXRTbGlkZXMgPSBmdW5jdGlvbiBpbml0U2xpZGVzKCkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgcHVzaCh0aGlzLnNsaWRlcywgdGhpcy5jb250ZW50cy5tYXAoZnVuY3Rpb24gKGNvbnRlbnQsIGluZGV4KSB7XG4gICAgICBjb250ZW50ID0gaXNTdHJpbmcoY29udGVudCkgPyB7XG4gICAgICAgIGh0bWw6IGNvbnRlbnRcbiAgICAgIH0gOiBjb250ZW50O1xuICAgICAgY29udGVudC5zdHlsZXMgPSBjb250ZW50LnN0eWxlcyB8fCB7fTtcbiAgICAgIGNvbnRlbnQuYXR0cnMgPSBjb250ZW50LmF0dHJzIHx8IHt9O1xuXG4gICAgICBfdGhpczQuY292ZXIoY29udGVudCk7XG5cbiAgICAgIHZhciBjbGFzc2VzID0gX3RoaXM0Lm9wdGlvbnMuY2xhc3Nlcy5zbGlkZSArIFwiIFwiICsgKGluZGV4ID09PSAwID8gQ0xBU1NfQUNUSVZFIDogXCJcIik7XG4gICAgICBhc3NpZ24oY29udGVudC5hdHRycywge1xuICAgICAgICBjbGFzczogKGNsYXNzZXMgKyBcIiBcIiArIChjb250ZW50LmF0dHJzLmNsYXNzIHx8IFwiXCIpKS50cmltKCksXG4gICAgICAgIHN0eWxlOiBfdGhpczQuYnVpbGRTdHlsZXMoY29udGVudC5zdHlsZXMpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pKTtcblxuICAgIGlmICh0aGlzLmlzTG9vcCgpKSB7XG4gICAgICB0aGlzLmdlbmVyYXRlQ2xvbmVzKHRoaXMuc2xpZGVzKTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvMy5yZWdpc3RlclJvb3RTdHlsZXMgPSBmdW5jdGlvbiByZWdpc3RlclJvb3RTdHlsZXMoKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICB0aGlzLmJyZWFrcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgICB2YXIgd2lkdGggPSBfcmVmMlswXSxcbiAgICAgICAgICBvcHRpb25zID0gX3JlZjJbMV07XG5cbiAgICAgIF90aGlzNS5TdHlsZS5ydWxlKFwiIFwiLCBcIm1heC13aWR0aFwiLCB1bml0KG9wdGlvbnMud2lkdGgpLCB3aWR0aCk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5yZWdpc3RlclRyYWNrU3R5bGVzID0gZnVuY3Rpb24gcmVnaXN0ZXJUcmFja1N0eWxlcygpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIHZhciBTdHlsZTIgPSB0aGlzLlN0eWxlO1xuICAgIHZhciBzZWxlY3RvciA9IFwiLlwiICsgQ0xBU1NfVFJBQ0s7XG4gICAgdGhpcy5icmVha3BvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgdmFyIHdpZHRoID0gX3JlZjNbMF0sXG4gICAgICAgICAgb3B0aW9ucyA9IF9yZWYzWzFdO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIF90aGlzNi5yZXNvbHZlKFwicGFkZGluZ0xlZnRcIiksIF90aGlzNi5jc3NQYWRkaW5nKG9wdGlvbnMsIGZhbHNlKSwgd2lkdGgpO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIF90aGlzNi5yZXNvbHZlKFwicGFkZGluZ1JpZ2h0XCIpLCBfdGhpczYuY3NzUGFkZGluZyhvcHRpb25zLCB0cnVlKSwgd2lkdGgpO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIFwiaGVpZ2h0XCIsIF90aGlzNi5jc3NUcmFja0hlaWdodChvcHRpb25zKSwgd2lkdGgpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMucmVnaXN0ZXJMaXN0U3R5bGVzID0gZnVuY3Rpb24gcmVnaXN0ZXJMaXN0U3R5bGVzKCkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgdmFyIFN0eWxlMiA9IHRoaXMuU3R5bGU7XG4gICAgdmFyIHNlbGVjdG9yID0gXCIuXCIgKyBDTEFTU19MSVNUO1xuICAgIHRoaXMuYnJlYWtwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjQpIHtcbiAgICAgIHZhciB3aWR0aCA9IF9yZWY0WzBdLFxuICAgICAgICAgIG9wdGlvbnMgPSBfcmVmNFsxXTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBcInRyYW5zZm9ybVwiLCBfdGhpczcuYnVpbGRUcmFuc2xhdGUob3B0aW9ucyksIHdpZHRoKTtcblxuICAgICAgaWYgKCFfdGhpczcuY3NzU2xpZGVIZWlnaHQob3B0aW9ucykpIHtcbiAgICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IsIFwiYXNwZWN0LXJhdGlvXCIsIF90aGlzNy5jc3NBc3BlY3RSYXRpbyhvcHRpb25zKSwgd2lkdGgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMucmVnaXN0ZXJTbGlkZVN0eWxlcyA9IGZ1bmN0aW9uIHJlZ2lzdGVyU2xpZGVTdHlsZXMoKSB7XG4gICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICB2YXIgU3R5bGUyID0gdGhpcy5TdHlsZTtcbiAgICB2YXIgc2VsZWN0b3IgPSBcIi5cIiArIENMQVNTX1NMSURFO1xuICAgIHRoaXMuYnJlYWtwb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjUpIHtcbiAgICAgIHZhciB3aWR0aCA9IF9yZWY1WzBdLFxuICAgICAgICAgIG9wdGlvbnMgPSBfcmVmNVsxXTtcbiAgICAgIFN0eWxlMi5ydWxlKHNlbGVjdG9yLCBcIndpZHRoXCIsIF90aGlzOC5jc3NTbGlkZVdpZHRoKG9wdGlvbnMpLCB3aWR0aCk7XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgXCJoZWlnaHRcIiwgX3RoaXM4LmNzc1NsaWRlSGVpZ2h0KG9wdGlvbnMpIHx8IFwiMTAwJVwiLCB3aWR0aCk7XG4gICAgICBTdHlsZTIucnVsZShzZWxlY3RvciwgX3RoaXM4LnJlc29sdmUoXCJtYXJnaW5SaWdodFwiKSwgdW5pdChvcHRpb25zLmdhcCkgfHwgXCIwcHhcIiwgd2lkdGgpO1xuICAgICAgU3R5bGUyLnJ1bGUoc2VsZWN0b3IgKyBcIiA+IGltZ1wiLCBcImRpc3BsYXlcIiwgb3B0aW9ucy5jb3ZlciA/IFwibm9uZVwiIDogXCJpbmxpbmVcIiwgd2lkdGgpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMuYnVpbGRUcmFuc2xhdGUgPSBmdW5jdGlvbiBidWlsZFRyYW5zbGF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzJERpcmVjdGlvbiA9IHRoaXMuRGlyZWN0aW9uLFxuICAgICAgICByZXNvbHZlID0gX3RoaXMkRGlyZWN0aW9uLnJlc29sdmUsXG4gICAgICAgIG9yaWVudCA9IF90aGlzJERpcmVjdGlvbi5vcmllbnQ7XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHZhbHVlcy5wdXNoKHRoaXMuY3NzT2Zmc2V0Q2xvbmVzKG9wdGlvbnMpKTtcbiAgICB2YWx1ZXMucHVzaCh0aGlzLmNzc09mZnNldEdhcHMob3B0aW9ucykpO1xuXG4gICAgaWYgKHRoaXMuaXNDZW50ZXIob3B0aW9ucykpIHtcbiAgICAgIHZhbHVlcy5wdXNoKHRoaXMuYnVpbGRDc3NWYWx1ZShvcmllbnQoLTUwKSwgXCIlXCIpKTtcbiAgICAgIHZhbHVlcy5wdXNoLmFwcGx5KHZhbHVlcywgdGhpcy5jc3NPZmZzZXRDZW50ZXIob3B0aW9ucykpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZXMuZmlsdGVyKEJvb2xlYW4pLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBcInRyYW5zbGF0ZVwiICsgcmVzb2x2ZShcIlhcIikgKyBcIihcIiArIHZhbHVlICsgXCIpXCI7XG4gICAgfSkuam9pbihcIiBcIik7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NPZmZzZXRDbG9uZXMgPSBmdW5jdGlvbiBjc3NPZmZzZXRDbG9uZXMob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyREaXJlY3Rpb24yID0gdGhpcy5EaXJlY3Rpb24sXG4gICAgICAgIHJlc29sdmUgPSBfdGhpcyREaXJlY3Rpb24yLnJlc29sdmUsXG4gICAgICAgIG9yaWVudCA9IF90aGlzJERpcmVjdGlvbjIub3JpZW50O1xuICAgIHZhciBjbG9uZUNvdW50ID0gdGhpcy5nZXRDbG9uZUNvdW50KCk7XG5cbiAgICBpZiAodGhpcy5pc0ZpeGVkV2lkdGgob3B0aW9ucykpIHtcbiAgICAgIHZhciBfdGhpcyRwYXJzZUNzc1ZhbHVlID0gdGhpcy5wYXJzZUNzc1ZhbHVlKG9wdGlvbnNbcmVzb2x2ZShcImZpeGVkV2lkdGhcIildKSxcbiAgICAgICAgICB2YWx1ZSA9IF90aGlzJHBhcnNlQ3NzVmFsdWUudmFsdWUsXG4gICAgICAgICAgdW5pdDIgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlLnVuaXQ7XG5cbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KHZhbHVlKSAqIGNsb25lQ291bnQsIHVuaXQyKTtcbiAgICB9XG5cbiAgICB2YXIgcGVyY2VudCA9IDEwMCAqIGNsb25lQ291bnQgLyBvcHRpb25zLnBlclBhZ2U7XG4gICAgcmV0dXJuIG9yaWVudChwZXJjZW50KSArIFwiJVwiO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzT2Zmc2V0Q2VudGVyID0gZnVuY3Rpb24gY3NzT2Zmc2V0Q2VudGVyKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMkRGlyZWN0aW9uMyA9IHRoaXMuRGlyZWN0aW9uLFxuICAgICAgICByZXNvbHZlID0gX3RoaXMkRGlyZWN0aW9uMy5yZXNvbHZlLFxuICAgICAgICBvcmllbnQgPSBfdGhpcyREaXJlY3Rpb24zLm9yaWVudDtcblxuICAgIGlmICh0aGlzLmlzRml4ZWRXaWR0aChvcHRpb25zKSkge1xuICAgICAgdmFyIF90aGlzJHBhcnNlQ3NzVmFsdWUyID0gdGhpcy5wYXJzZUNzc1ZhbHVlKG9wdGlvbnNbcmVzb2x2ZShcImZpeGVkV2lkdGhcIildKSxcbiAgICAgICAgICB2YWx1ZSA9IF90aGlzJHBhcnNlQ3NzVmFsdWUyLnZhbHVlLFxuICAgICAgICAgIHVuaXQyID0gX3RoaXMkcGFyc2VDc3NWYWx1ZTIudW5pdDtcblxuICAgICAgcmV0dXJuIFt0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KHZhbHVlIC8gMiksIHVuaXQyKV07XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHZhciBwZXJQYWdlID0gb3B0aW9ucy5wZXJQYWdlLFxuICAgICAgICBnYXAgPSBvcHRpb25zLmdhcDtcbiAgICB2YWx1ZXMucHVzaChvcmllbnQoNTAgLyBwZXJQYWdlKSArIFwiJVwiKTtcblxuICAgIGlmIChnYXApIHtcbiAgICAgIHZhciBfdGhpcyRwYXJzZUNzc1ZhbHVlMyA9IHRoaXMucGFyc2VDc3NWYWx1ZShnYXApLFxuICAgICAgICAgIF92YWx1ZSA9IF90aGlzJHBhcnNlQ3NzVmFsdWUzLnZhbHVlLFxuICAgICAgICAgIF91bml0ID0gX3RoaXMkcGFyc2VDc3NWYWx1ZTMudW5pdDtcblxuICAgICAgdmFyIGdhcE9mZnNldCA9IChfdmFsdWUgLyBwZXJQYWdlIC0gX3ZhbHVlKSAvIDI7XG4gICAgICB2YWx1ZXMucHVzaCh0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KGdhcE9mZnNldCksIF91bml0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuICBfcHJvdG8zLmNzc09mZnNldEdhcHMgPSBmdW5jdGlvbiBjc3NPZmZzZXRHYXBzKG9wdGlvbnMpIHtcbiAgICB2YXIgY2xvbmVDb3VudCA9IHRoaXMuZ2V0Q2xvbmVDb3VudCgpO1xuXG4gICAgaWYgKGNsb25lQ291bnQgJiYgb3B0aW9ucy5nYXApIHtcbiAgICAgIHZhciBvcmllbnQgPSB0aGlzLkRpcmVjdGlvbi5vcmllbnQ7XG5cbiAgICAgIHZhciBfdGhpcyRwYXJzZUNzc1ZhbHVlNCA9IHRoaXMucGFyc2VDc3NWYWx1ZShvcHRpb25zLmdhcCksXG4gICAgICAgICAgdmFsdWUgPSBfdGhpcyRwYXJzZUNzc1ZhbHVlNC52YWx1ZSxcbiAgICAgICAgICB1bml0MiA9IF90aGlzJHBhcnNlQ3NzVmFsdWU0LnVuaXQ7XG5cbiAgICAgIGlmICh0aGlzLmlzRml4ZWRXaWR0aChvcHRpb25zKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWlsZENzc1ZhbHVlKG9yaWVudCh2YWx1ZSAqIGNsb25lQ291bnQpLCB1bml0Mik7XG4gICAgICB9XG5cbiAgICAgIHZhciBwZXJQYWdlID0gb3B0aW9ucy5wZXJQYWdlO1xuICAgICAgdmFyIGdhcHMgPSBjbG9uZUNvdW50IC8gcGVyUGFnZTtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkQ3NzVmFsdWUob3JpZW50KGdhcHMgKiB2YWx1ZSksIHVuaXQyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gXCJcIjtcbiAgfTtcblxuICBfcHJvdG8zLnJlc29sdmUgPSBmdW5jdGlvbiByZXNvbHZlKHByb3ApIHtcbiAgICByZXR1cm4gY2FtZWxUb0tlYmFiKHRoaXMuRGlyZWN0aW9uLnJlc29sdmUocHJvcCkpO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzUGFkZGluZyA9IGZ1bmN0aW9uIGNzc1BhZGRpbmcob3B0aW9ucywgcmlnaHQpIHtcbiAgICB2YXIgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZztcbiAgICB2YXIgcHJvcCA9IHRoaXMuRGlyZWN0aW9uLnJlc29sdmUocmlnaHQgPyBcInJpZ2h0XCIgOiBcImxlZnRcIiwgdHJ1ZSk7XG4gICAgcmV0dXJuIHBhZGRpbmcgJiYgdW5pdChwYWRkaW5nW3Byb3BdIHx8IChpc09iamVjdChwYWRkaW5nKSA/IDAgOiBwYWRkaW5nKSkgfHwgXCIwcHhcIjtcbiAgfTtcblxuICBfcHJvdG8zLmNzc1RyYWNrSGVpZ2h0ID0gZnVuY3Rpb24gY3NzVHJhY2tIZWlnaHQob3B0aW9ucykge1xuICAgIHZhciBoZWlnaHQgPSBcIlwiO1xuXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCgpKSB7XG4gICAgICBoZWlnaHQgPSB0aGlzLmNzc0hlaWdodChvcHRpb25zKTtcbiAgICAgIGFzc2VydChoZWlnaHQsICdcImhlaWdodFwiIGlzIG1pc3NpbmcuJyk7XG4gICAgICBoZWlnaHQgPSBcImNhbGMoXCIgKyBoZWlnaHQgKyBcIiAtIFwiICsgdGhpcy5jc3NQYWRkaW5nKG9wdGlvbnMsIGZhbHNlKSArIFwiIC0gXCIgKyB0aGlzLmNzc1BhZGRpbmcob3B0aW9ucywgdHJ1ZSkgKyBcIilcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gaGVpZ2h0O1xuICB9O1xuXG4gIF9wcm90bzMuY3NzSGVpZ2h0ID0gZnVuY3Rpb24gY3NzSGVpZ2h0KG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdW5pdChvcHRpb25zLmhlaWdodCk7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NTbGlkZVdpZHRoID0gZnVuY3Rpb24gY3NzU2xpZGVXaWR0aChvcHRpb25zKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuYXV0b1dpZHRoID8gXCJcIiA6IHVuaXQob3B0aW9ucy5maXhlZFdpZHRoKSB8fCAodGhpcy5pc1ZlcnRpY2FsKCkgPyBcIlwiIDogdGhpcy5jc3NTbGlkZVNpemUob3B0aW9ucykpO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzU2xpZGVIZWlnaHQgPSBmdW5jdGlvbiBjc3NTbGlkZUhlaWdodChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHVuaXQob3B0aW9ucy5maXhlZEhlaWdodCkgfHwgKHRoaXMuaXNWZXJ0aWNhbCgpID8gb3B0aW9ucy5hdXRvSGVpZ2h0ID8gXCJcIiA6IHRoaXMuY3NzU2xpZGVTaXplKG9wdGlvbnMpIDogdGhpcy5jc3NIZWlnaHQob3B0aW9ucykpO1xuICB9O1xuXG4gIF9wcm90bzMuY3NzU2xpZGVTaXplID0gZnVuY3Rpb24gY3NzU2xpZGVTaXplKG9wdGlvbnMpIHtcbiAgICB2YXIgZ2FwID0gdW5pdChvcHRpb25zLmdhcCk7XG4gICAgcmV0dXJuIFwiY2FsYygoMTAwJVwiICsgKGdhcCAmJiBcIiArIFwiICsgZ2FwKSArIFwiKS9cIiArIChvcHRpb25zLnBlclBhZ2UgfHwgMSkgKyAoZ2FwICYmIFwiIC0gXCIgKyBnYXApICsgXCIpXCI7XG4gIH07XG5cbiAgX3Byb3RvMy5jc3NBc3BlY3RSYXRpbyA9IGZ1bmN0aW9uIGNzc0FzcGVjdFJhdGlvKG9wdGlvbnMpIHtcbiAgICB2YXIgaGVpZ2h0UmF0aW8gPSBvcHRpb25zLmhlaWdodFJhdGlvO1xuICAgIHJldHVybiBoZWlnaHRSYXRpbyA/IFwiXCIgKyAxIC8gaGVpZ2h0UmF0aW8gOiBcIlwiO1xuICB9O1xuXG4gIF9wcm90bzMuYnVpbGRDc3NWYWx1ZSA9IGZ1bmN0aW9uIGJ1aWxkQ3NzVmFsdWUodmFsdWUsIHVuaXQyKSB7XG4gICAgcmV0dXJuIFwiXCIgKyB2YWx1ZSArIHVuaXQyO1xuICB9O1xuXG4gIF9wcm90bzMucGFyc2VDc3NWYWx1ZSA9IGZ1bmN0aW9uIHBhcnNlQ3NzVmFsdWUodmFsdWUpIHtcbiAgICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICB2YXIgbnVtYmVyID0gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcbiAgICAgIHZhciB1bml0MiA9IHZhbHVlLnJlcGxhY2UoL1xcZCooXFwuXFxkKik/LywgXCJcIikgfHwgXCJweFwiO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IG51bWJlcixcbiAgICAgICAgdW5pdDogdW5pdDJcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHVuaXQ6IFwicHhcIlxuICAgIH07XG4gIH07XG5cbiAgX3Byb3RvMy5wYXJzZUJyZWFrcG9pbnRzID0gZnVuY3Rpb24gcGFyc2VCcmVha3BvaW50cygpIHtcbiAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgIHZhciBicmVha3BvaW50cyA9IHRoaXMub3B0aW9ucy5icmVha3BvaW50cztcbiAgICB0aGlzLmJyZWFrcG9pbnRzLnB1c2goW1wiZGVmYXVsdFwiLCB0aGlzLm9wdGlvbnNdKTtcblxuICAgIGlmIChicmVha3BvaW50cykge1xuICAgICAgZm9yT3duKGJyZWFrcG9pbnRzLCBmdW5jdGlvbiAob3B0aW9ucywgd2lkdGgpIHtcbiAgICAgICAgX3RoaXM5LmJyZWFrcG9pbnRzLnB1c2goW3dpZHRoLCBtZXJnZShtZXJnZSh7fSwgX3RoaXM5Lm9wdGlvbnMpLCBvcHRpb25zKV0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90bzMuaXNGaXhlZFdpZHRoID0gZnVuY3Rpb24gaXNGaXhlZFdpZHRoKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gISFvcHRpb25zW3RoaXMuRGlyZWN0aW9uLnJlc29sdmUoXCJmaXhlZFdpZHRoXCIpXTtcbiAgfTtcblxuICBfcHJvdG8zLmlzTG9vcCA9IGZ1bmN0aW9uIGlzTG9vcCgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnR5cGUgPT09IExPT1A7XG4gIH07XG5cbiAgX3Byb3RvMy5pc0NlbnRlciA9IGZ1bmN0aW9uIGlzQ2VudGVyKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5mb2N1cyA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgaWYgKHRoaXMuaXNMb29wKCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudHlwZSA9PT0gU0xJREUpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLm9wdGlvbnMudHJpbVNwYWNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBfcHJvdG8zLmlzVmVydGljYWwgPSBmdW5jdGlvbiBpc1ZlcnRpY2FsKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uID09PSBUVEI7XG4gIH07XG5cbiAgX3Byb3RvMy5idWlsZENsYXNzZXMgPSBmdW5jdGlvbiBidWlsZENsYXNzZXMoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgcmV0dXJuIFtDTEFTU19ST09ULCBDTEFTU19ST09UICsgXCItLVwiICsgb3B0aW9ucy50eXBlLCBDTEFTU19ST09UICsgXCItLVwiICsgb3B0aW9ucy5kaXJlY3Rpb24sIG9wdGlvbnMuZHJhZyAmJiBDTEFTU19ST09UICsgXCItLWRyYWdnYWJsZVwiLCBvcHRpb25zLmlzTmF2aWdhdGlvbiAmJiBDTEFTU19ST09UICsgXCItLW5hdlwiLCBDTEFTU19BQ1RJVkUsICF0aGlzLmNvbmZpZy5oaWRkZW4gJiYgQ0xBU1NfUkVOREVSRURdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbiAgfTtcblxuICBfcHJvdG8zLmJ1aWxkQXR0cnMgPSBmdW5jdGlvbiBidWlsZEF0dHJzKGF0dHJzKSB7XG4gICAgdmFyIGF0dHIgPSBcIlwiO1xuICAgIGZvck93bihhdHRycywgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgIGF0dHIgKz0gdmFsdWUgPyBcIiBcIiArIGNhbWVsVG9LZWJhYihrZXkpICsgXCI9XFxcIlwiICsgdmFsdWUgKyBcIlxcXCJcIiA6IFwiXCI7XG4gICAgfSk7XG4gICAgcmV0dXJuIGF0dHIudHJpbSgpO1xuICB9O1xuXG4gIF9wcm90bzMuYnVpbGRTdHlsZXMgPSBmdW5jdGlvbiBidWlsZFN0eWxlcyhzdHlsZXMpIHtcbiAgICB2YXIgc3R5bGUgPSBcIlwiO1xuICAgIGZvck93bihzdHlsZXMsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICBzdHlsZSArPSBcIiBcIiArIGNhbWVsVG9LZWJhYihrZXkpICsgXCI6XCIgKyB2YWx1ZSArIFwiO1wiO1xuICAgIH0pO1xuICAgIHJldHVybiBzdHlsZS50cmltKCk7XG4gIH07XG5cbiAgX3Byb3RvMy5yZW5kZXJTbGlkZXMgPSBmdW5jdGlvbiByZW5kZXJTbGlkZXMoKSB7XG4gICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgdmFyIHRhZyA9IHRoaXMuY29uZmlnLnNsaWRlVGFnO1xuICAgIHJldHVybiB0aGlzLnNsaWRlcy5tYXAoZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgIHJldHVybiBcIjxcIiArIHRhZyArIFwiIFwiICsgX3RoaXMxMC5idWlsZEF0dHJzKGNvbnRlbnQuYXR0cnMpICsgXCI+XCIgKyAoY29udGVudC5odG1sIHx8IFwiXCIpICsgXCI8L1wiICsgdGFnICsgXCI+XCI7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTtcblxuICBfcHJvdG8zLmNvdmVyID0gZnVuY3Rpb24gY292ZXIoY29udGVudCkge1xuICAgIHZhciBzdHlsZXMgPSBjb250ZW50LnN0eWxlcyxcbiAgICAgICAgX2NvbnRlbnQkaHRtbCA9IGNvbnRlbnQuaHRtbCxcbiAgICAgICAgaHRtbCA9IF9jb250ZW50JGh0bWwgPT09IHZvaWQgMCA/IFwiXCIgOiBfY29udGVudCRodG1sO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb3ZlciAmJiAhdGhpcy5vcHRpb25zLmxhenlMb2FkKSB7XG4gICAgICB2YXIgc3JjID0gaHRtbC5tYXRjaCgvPGltZy4qP3NyY1xccyo9XFxzKihbJ1wiXSkoLis/KVxcMS4qPz4vKTtcblxuICAgICAgaWYgKHNyYyAmJiBzcmNbMl0pIHtcbiAgICAgICAgc3R5bGVzLmJhY2tncm91bmQgPSBcImNlbnRlci9jb3ZlciBuby1yZXBlYXQgdXJsKCdcIiArIHNyY1syXSArIFwiJylcIjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvMy5nZW5lcmF0ZUNsb25lcyA9IGZ1bmN0aW9uIGdlbmVyYXRlQ2xvbmVzKGNvbnRlbnRzKSB7XG4gICAgdmFyIGNsYXNzZXMgPSB0aGlzLm9wdGlvbnMuY2xhc3NlcztcbiAgICB2YXIgY291bnQgPSB0aGlzLmdldENsb25lQ291bnQoKTtcbiAgICB2YXIgc2xpZGVzID0gY29udGVudHMuc2xpY2UoKTtcblxuICAgIHdoaWxlIChzbGlkZXMubGVuZ3RoIDwgY291bnQpIHtcbiAgICAgIHB1c2goc2xpZGVzLCBzbGlkZXMpO1xuICAgIH1cblxuICAgIHB1c2goc2xpZGVzLnNsaWNlKC1jb3VudCkucmV2ZXJzZSgpLCBzbGlkZXMuc2xpY2UoMCwgY291bnQpKS5mb3JFYWNoKGZ1bmN0aW9uIChjb250ZW50LCBpbmRleCkge1xuICAgICAgdmFyIGF0dHJzID0gYXNzaWduKHt9LCBjb250ZW50LmF0dHJzLCB7XG4gICAgICAgIGNsYXNzOiBjb250ZW50LmF0dHJzLmNsYXNzICsgXCIgXCIgKyBjbGFzc2VzLmNsb25lXG4gICAgICB9KTtcbiAgICAgIHZhciBjbG9uZSA9IGFzc2lnbih7fSwgY29udGVudCwge1xuICAgICAgICBhdHRyczogYXR0cnNcbiAgICAgIH0pO1xuICAgICAgaW5kZXggPCBjb3VudCA/IGNvbnRlbnRzLnVuc2hpZnQoY2xvbmUpIDogY29udGVudHMucHVzaChjbG9uZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5nZXRDbG9uZUNvdW50ID0gZnVuY3Rpb24gZ2V0Q2xvbmVDb3VudCgpIHtcbiAgICBpZiAodGhpcy5pc0xvb3AoKSkge1xuICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAgIGlmIChvcHRpb25zLmNsb25lcykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5jbG9uZXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBwZXJQYWdlID0gbWF4LmFwcGx5KHZvaWQgMCwgdGhpcy5icmVha3BvaW50cy5tYXAoZnVuY3Rpb24gKF9yZWY2KSB7XG4gICAgICAgIHZhciBvcHRpb25zMiA9IF9yZWY2WzFdO1xuICAgICAgICByZXR1cm4gb3B0aW9uczIucGVyUGFnZTtcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBwZXJQYWdlICogKChvcHRpb25zLmZsaWNrTWF4UGFnZXMgfHwgMSkgKyAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICBfcHJvdG8zLnJlbmRlckFycm93cyA9IGZ1bmN0aW9uIHJlbmRlckFycm93cygpIHtcbiAgICB2YXIgaHRtbCA9IFwiXCI7XG4gICAgaHRtbCArPSBcIjxkaXYgY2xhc3M9XFxcIlwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMuYXJyb3dzICsgXCJcXFwiPlwiO1xuICAgIGh0bWwgKz0gdGhpcy5yZW5kZXJBcnJvdyh0cnVlKTtcbiAgICBodG1sICs9IHRoaXMucmVuZGVyQXJyb3coZmFsc2UpO1xuICAgIGh0bWwgKz0gXCI8L2Rpdj5cIjtcbiAgICByZXR1cm4gaHRtbDtcbiAgfTtcblxuICBfcHJvdG8zLnJlbmRlckFycm93ID0gZnVuY3Rpb24gcmVuZGVyQXJyb3cocHJldikge1xuICAgIHZhciBfdGhpcyRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBjbGFzc2VzID0gX3RoaXMkb3B0aW9ucy5jbGFzc2VzLFxuICAgICAgICBpMThuID0gX3RoaXMkb3B0aW9ucy5pMThuO1xuICAgIHZhciBhdHRycyA9IHtcbiAgICAgIGNsYXNzOiBjbGFzc2VzLmFycm93ICsgXCIgXCIgKyAocHJldiA/IGNsYXNzZXMucHJldiA6IGNsYXNzZXMubmV4dCksXG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgYXJpYUxhYmVsOiBwcmV2ID8gaTE4bi5wcmV2IDogaTE4bi5uZXh0XG4gICAgfTtcbiAgICByZXR1cm4gXCI8YnV0dG9uIFwiICsgdGhpcy5idWlsZEF0dHJzKGF0dHJzKSArIFwiPjxzdmcgeG1sbnM9XFxcIlwiICsgWE1MX05BTUVfU1BBQ0UgKyBcIlxcXCIgdmlld0JveD1cXFwiMCAwIFwiICsgU0laRSArIFwiIFwiICsgU0laRSArIFwiXFxcIiB3aWR0aD1cXFwiXCIgKyBTSVpFICsgXCJcXFwiIGhlaWdodD1cXFwiXCIgKyBTSVpFICsgXCJcXFwiPjxwYXRoIGQ9XFxcIlwiICsgKHRoaXMub3B0aW9ucy5hcnJvd1BhdGggfHwgUEFUSCkgKyBcIlxcXCIgLz48L3N2Zz48L2J1dHRvbj5cIjtcbiAgfTtcblxuICBfcHJvdG8zLmh0bWwgPSBmdW5jdGlvbiBodG1sKCkge1xuICAgIHZhciBfdGhpcyRjb25maWcgPSB0aGlzLmNvbmZpZyxcbiAgICAgICAgcm9vdENsYXNzID0gX3RoaXMkY29uZmlnLnJvb3RDbGFzcyxcbiAgICAgICAgbGlzdFRhZyA9IF90aGlzJGNvbmZpZy5saXN0VGFnLFxuICAgICAgICBhcnJvd3MgPSBfdGhpcyRjb25maWcuYXJyb3dzLFxuICAgICAgICBiZWZvcmVUcmFjayA9IF90aGlzJGNvbmZpZy5iZWZvcmVUcmFjayxcbiAgICAgICAgYWZ0ZXJUcmFjayA9IF90aGlzJGNvbmZpZy5hZnRlclRyYWNrLFxuICAgICAgICBzbGlkZXIgPSBfdGhpcyRjb25maWcuc2xpZGVyLFxuICAgICAgICBiZWZvcmVTbGlkZXIgPSBfdGhpcyRjb25maWcuYmVmb3JlU2xpZGVyLFxuICAgICAgICBhZnRlclNsaWRlciA9IF90aGlzJGNvbmZpZy5hZnRlclNsaWRlcjtcbiAgICB2YXIgaHRtbCA9IFwiXCI7XG4gICAgaHRtbCArPSBcIjxkaXYgaWQ9XFxcIlwiICsgdGhpcy5pZCArIFwiXFxcIiBjbGFzcz1cXFwiXCIgKyB0aGlzLmJ1aWxkQ2xhc3NlcygpICsgXCIgXCIgKyAocm9vdENsYXNzIHx8IFwiXCIpICsgXCJcXFwiPlwiO1xuICAgIGh0bWwgKz0gXCI8c3R5bGU+XCIgKyB0aGlzLlN0eWxlLmJ1aWxkKCkgKyBcIjwvc3R5bGU+XCI7XG5cbiAgICBpZiAoc2xpZGVyKSB7XG4gICAgICBodG1sICs9IGJlZm9yZVNsaWRlciB8fCBcIlwiO1xuICAgICAgaHRtbCArPSBcIjxkaXYgY2xhc3M9XFxcInNwbGlkZV9fc2xpZGVyXFxcIj5cIjtcbiAgICB9XG5cbiAgICBodG1sICs9IGJlZm9yZVRyYWNrIHx8IFwiXCI7XG5cbiAgICBpZiAoYXJyb3dzKSB7XG4gICAgICBodG1sICs9IHRoaXMucmVuZGVyQXJyb3dzKCk7XG4gICAgfVxuXG4gICAgaHRtbCArPSBcIjxkaXYgY2xhc3M9XFxcInNwbGlkZV9fdHJhY2tcXFwiPlwiO1xuICAgIGh0bWwgKz0gXCI8XCIgKyBsaXN0VGFnICsgXCIgY2xhc3M9XFxcInNwbGlkZV9fbGlzdFxcXCI+XCI7XG4gICAgaHRtbCArPSB0aGlzLnJlbmRlclNsaWRlcygpO1xuICAgIGh0bWwgKz0gXCI8L1wiICsgbGlzdFRhZyArIFwiPlwiO1xuICAgIGh0bWwgKz0gXCI8L2Rpdj5cIjtcbiAgICBodG1sICs9IGFmdGVyVHJhY2sgfHwgXCJcIjtcblxuICAgIGlmIChzbGlkZXIpIHtcbiAgICAgIGh0bWwgKz0gXCI8L2Rpdj5cIjtcbiAgICAgIGh0bWwgKz0gYWZ0ZXJTbGlkZXIgfHwgXCJcIjtcbiAgICB9XG5cbiAgICBodG1sICs9IFwiPC9kaXY+XCI7XG4gICAgcmV0dXJuIGh0bWw7XG4gIH07XG5cbiAgcmV0dXJuIFNwbGlkZVJlbmRlcmVyO1xufSgpO1xuXG5leHBvcnQgeyBDTEFTU0VTLCBDTEFTU19BQ1RJVkUsIENMQVNTX0FSUk9XLCBDTEFTU19BUlJPV1MsIENMQVNTX0FSUk9XX05FWFQsIENMQVNTX0FSUk9XX1BSRVYsIENMQVNTX0NMT05FLCBDTEFTU19DT05UQUlORVIsIENMQVNTX0ZPQ1VTX0lOLCBDTEFTU19JTklUSUFMSVpFRCwgQ0xBU1NfTElTVCwgQ0xBU1NfTE9BRElORywgQ0xBU1NfTkVYVCwgQ0xBU1NfT1ZFUkZMT1csIENMQVNTX1BBR0lOQVRJT04sIENMQVNTX1BBR0lOQVRJT05fUEFHRSwgQ0xBU1NfUFJFViwgQ0xBU1NfUFJPR1JFU1MsIENMQVNTX1BST0dSRVNTX0JBUiwgQ0xBU1NfUk9PVCwgQ0xBU1NfU0xJREUsIENMQVNTX1NQSU5ORVIsIENMQVNTX1NSLCBDTEFTU19UT0dHTEUsIENMQVNTX1RPR0dMRV9QQVVTRSwgQ0xBU1NfVE9HR0xFX1BMQVksIENMQVNTX1RSQUNLLCBDTEFTU19WSVNJQkxFLCBERUZBVUxUUywgRVZFTlRfQUNUSVZFLCBFVkVOVF9BUlJPV1NfTU9VTlRFRCwgRVZFTlRfQVJST1dTX1VQREFURUQsIEVWRU5UX0FVVE9QTEFZX1BBVVNFLCBFVkVOVF9BVVRPUExBWV9QTEFZLCBFVkVOVF9BVVRPUExBWV9QTEFZSU5HLCBFVkVOVF9DTElDSywgRVZFTlRfREVTVFJPWSwgRVZFTlRfRFJBRywgRVZFTlRfRFJBR0dFRCwgRVZFTlRfRFJBR0dJTkcsIEVWRU5UX0VORF9JTkRFWF9DSEFOR0VELCBFVkVOVF9ISURERU4sIEVWRU5UX0lOQUNUSVZFLCBFVkVOVF9MQVpZTE9BRF9MT0FERUQsIEVWRU5UX01PVU5URUQsIEVWRU5UX01PVkUsIEVWRU5UX01PVkVELCBFVkVOVF9OQVZJR0FUSU9OX01PVU5URUQsIEVWRU5UX09WRVJGTE9XLCBFVkVOVF9QQUdJTkFUSU9OX01PVU5URUQsIEVWRU5UX1BBR0lOQVRJT05fVVBEQVRFRCwgRVZFTlRfUkVBRFksIEVWRU5UX1JFRlJFU0gsIEVWRU5UX1JFU0laRSwgRVZFTlRfUkVTSVpFRCwgRVZFTlRfU0NST0xMLCBFVkVOVF9TQ1JPTExFRCwgRVZFTlRfU0hJRlRFRCwgRVZFTlRfU0xJREVfS0VZRE9XTiwgRVZFTlRfVVBEQVRFRCwgRVZFTlRfVklTSUJMRSwgRXZlbnRCaW5kZXIsIEV2ZW50SW50ZXJmYWNlLCBGQURFLCBMT09QLCBMVFIsIFJUTCwgUmVxdWVzdEludGVydmFsLCBTTElERSwgU1RBVFVTX0NMQVNTRVMsIFNwbGlkZSwgU3BsaWRlUmVuZGVyZXIsIFN0YXRlLCBUVEIsIFRocm90dGxlLCBTcGxpZGUgYXMgZGVmYXVsdCB9O1xuIiwiLy8gQ2xhc3MgdGhhdCBoYW5kbGVzIHRoZSBwbGF5YmFjayBvZiB0aGUgd2hvbGUgYm9va1xyXG5pbXBvcnQge1xyXG4gICAgQm9vayxcclxuICAgIEJvb2tUeXBlLFxyXG4gICAgUGFnZSxcclxuICAgIFRleHRFbGVtZW50LFxyXG4gICAgSW1hZ2VFbGVtZW50LFxyXG4gICAgQXVkaW9FbGVtZW50LFxyXG4gICAgQXVkaW9UaW1lc3RhbXBzLFxyXG4gICAgV29yZFRpbWVzdGFtcEVsZW1lbnQsXHJcbn0gZnJvbSBcIi4uL01vZGVscy9Nb2RlbHNcIjtcclxuaW1wb3J0IHsgRVZFTlRfQUNUSVZFLCBTcGxpZGUgfSBmcm9tIFwiQHNwbGlkZWpzL3NwbGlkZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXlCYWNrRW5naW5lIHtcclxuICAgIGN1cnJlbnRQYWdlOiBudW1iZXI7XHJcbiAgICBudW1iZXJPZlBhZ2VzOiBudW1iZXI7XHJcbiAgICB0cmFuc2l0aW9uaW5nVG9QYWdlOiBib29sZWFuO1xyXG5cclxuICAgIGltYWdlc1BhdGg6IHN0cmluZztcclxuICAgIGF1ZGlvUGF0aDogc3RyaW5nO1xyXG5cclxuICAgIGVtcHR5R2xvd0ltYWdlVGFnOiBzdHJpbmcgPSBcImVtcHR5X2dsb3dfaW1hZ2VcIjtcclxuXHJcbiAgICBzcGxpZGVIYW5kbGU6IFNwbGlkZTtcclxuXHJcbiAgICBjdXJyZW50Qm9va1R5cGU6IEJvb2tUeXBlO1xyXG5cclxuICAgIGJvb2s6IEJvb2s7XHJcblxyXG4gICAgY3VycmVudFBhZ2VBdXRvUGxheWVySW50ZXJ2YWw6IGFueTtcclxuXHJcbiAgICBjdXJyZW50bHlQbGF5aW5nQXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY3VycmVudFdvcmRQbGF5aW5nVGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XHJcblxyXG4gICAgY3VycmVudEdsb3dJbWFnZVRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xyXG5cclxuICAgIGN1cnJlbnRseUFjdGl2ZUdsb3dJbWFnZXM6IEhUTUxEaXZFbGVtZW50W10gPSBbXTtcclxuXHJcbiAgICBjdXJyZW50bHlBY3RpdmVXb3JkOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGltYWdlc1BhdGg6IHN0cmluZywgYXVkaW9QYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmltYWdlc1BhdGggPSBpbWFnZXNQYXRoO1xyXG4gICAgICAgIHRoaXMuYXVkaW9QYXRoID0gYXVkaW9QYXRoO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAwO1xyXG4gICAgICAgIHRoaXMuc3BsaWRlSGFuZGxlID0gbmV3IFNwbGlkZShcIi5zcGxpZGVcIiwge1xyXG4gICAgICAgICAgICBmaXhlZEhlaWdodDogd2luZG93LmlubmVySGVpZ2h0IC0gMjAsXHJcbiAgICAgICAgfSkubW91bnQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUub24oXCJtb3ZlXCIsIChuZXdJbmRleCwgb2xkSW5kZXgsIGRlc3RJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSAhPT0gbmV3SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbmluZ1RvUGFnZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3BQYWdlQXVkaW8odGhpcy5ib29rLnBhZ2VzW29sZEluZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUub24oXCJtb3ZlZFwiLCAoY3VycmVudEluZGV4LCBwcmV2SW5kZXgsIGRlc3RJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSAhPT0gY3VycmVudEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gY3VycmVudEluZGV4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nVG9QYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlQYWdlQXVkaW8odGhpcy5ib29rLnBhZ2VzW2N1cnJlbnRJbmRleF0sIGN1cnJlbnRJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRQYWdlUmVzaXplTGlzdGVuZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wUGFnZUF1ZGlvKHBhZ2U6IFBhZ2UpIHtcclxuICAgICAgICAvLyBsb29wIHRocm91Z2ggcGFnZSdzIHZpc3VhbCBlbGVtZW50cywgaWYgd2UgZmluZCBhbiBhdWRpbyBvYmplY3QgZ2V0IGl0IGJ5IGlkIGFuZCBzdG9wIGl0XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gcGFnZS52aXN1YWxFbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgbGV0IGF1ZGlvRWxlbWVudERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGF1ZGlvRWxlbWVudC5kb21JRCkgYXMgSFRNTEF1ZGlvRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudERvbS5wYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50RG9tLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jdXJyZW50UGFnZUF1dG9QbGF5ZXJJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3b3JkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGF1ZGlvRWxlbWVudC5kb21JRCArIFwiX3dvcmRfXCIgKyBqKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY3ItY2xpY2thYmxlLXdvcmQtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBsYXlQYWdlQXVkaW8ocGFnZTogUGFnZSwgcGFnZUluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICAvLyBsb29wIHRocm91Z2ggcGFnZSdzIHZpc3VhbCBlbGVtZW50cywgaWYgd2UgZmluZCBhbiBhdWRpbyBvYmplY3QgZ2V0IGl0IGJ5IGlkIGFuZCBwbGF5IGl0XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gcGFnZS52aXN1YWxFbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgbGV0IGF1ZGlvRWxlbWVudERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGF1ZGlvRWxlbWVudC5kb21JRCkgYXMgSFRNTEF1ZGlvRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudERvbS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQgPSBhdWRpb0VsZW1lbnREb207XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGxhc3RXb3JkSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZUF1dG9QbGF5ZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50VGltZSA9IGF1ZGlvRWxlbWVudERvbS5jdXJyZW50VGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGltZSA+PSBhdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHNbal0uc3RhcnRUaW1lc3RhbXAgJiYgY3VycmVudFRpbWUgPD0gYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzW2pdLmVuZFRpbWVzdGFtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEICsgXCJfd29yZF9cIiArIGN1cnJlbnRJbmRleCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVXb3JkID0gd29yZEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5zdHlsZS5jb2xvciA9IGF1ZGlvRWxlbWVudC5nbG93Q29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVDb25uZWN0ZWRHcmFwaGljSGlnaGxpZ2h0aW5nKHBhZ2VJbmRleCwgY3VycmVudEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFdvcmRJbmRleCA8IGN1cnJlbnRJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQ3VycmVudCBpbmRleDogXCIgKyBjdXJyZW50SW5kZXggKyBcIiBsYXN0IGluZGV4OiBcIiArIGxhc3RXb3JkSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3b3JkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGF1ZGlvRWxlbWVudC5kb21JRCArIFwiX3dvcmRfXCIgKyBsYXN0V29yZEluZGV4KSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY3ItY2xpY2thYmxlLXdvcmQtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRFbGVtZW50LnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RXb3JkSW5kZXggPSBjdXJyZW50SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID49IGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wc1thdWRpb0VsZW1lbnQuYXVkaW9UaW1lc3RhbXBzLnRpbWVzdGFtcHMubGVuZ3RoIC0gMV0uZW5kVGltZXN0YW1wIC0gMC4xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkZpbmlzaGVkIEhpZ2hsaWdodGluZyEgQ3VycmVudCBpbmRleDogXCIgKyBjdXJyZW50SW5kZXggKyBcIiBsYXN0IGluZGV4OiBcIiArIGxhc3RXb3JkSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEICsgXCJfd29yZF9cIiArIGN1cnJlbnRJbmRleCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY3ItY2xpY2thYmxlLXdvcmQtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmN1cnJlbnRQYWdlQXV0b1BsYXllckludGVydmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDYwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRQYWdlUmVzaXplTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGlkZUhhbmRsZS5vcHRpb25zLmZpeGVkSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gMjA7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsaWRlSGFuZGxlLnJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQm9vayhib29rOiBCb29rKSB7XHJcbiAgICAgICAgdGhpcy5ib29rID0gYm9vaztcclxuICAgICAgICB0aGlzLmN1cnJlbnRCb29rVHlwZSA9IGJvb2suYm9va1R5cGU7XHJcbiAgICAgICAgdGhpcy5udW1iZXJPZlBhZ2VzID0gYm9vay5wYWdlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCb29rVHlwZSA9PT0gQm9va1R5cGUuQ3VyaW91c1JlYWRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDdXJpb3VzUmVhZGVyQm9vayhib29rKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudEJvb2tUeXBlID09PSBCb29rVHlwZS5HREwpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR0RMQm9vayhib29rKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUN1cmlvdXNSZWFkZXJCb29rKGJvb2s6IEJvb2spIHtcclxuICAgICAgICB0aGlzLm51bWJlck9mUGFnZXMgPSBib29rLnBhZ2VzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib29rLnBhZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlTGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IHNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlTGkuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBzbGlkZUxpLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgc2xpZGVMaS5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xyXG4gICAgICAgICAgICBzbGlkZS5zdHlsZS53aWR0aCA9IFwiODAlXCI7XHJcbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLmhlaWdodCA9IFwiODAlXCI7XHJcblxyXG4gICAgICAgICAgICBzbGlkZUxpLmFwcGVuZENoaWxkKHNsaWRlKTtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlTGkuY2xhc3NMaXN0LmFkZChcInNwbGlkZV9fc2xpZGVcIik7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2VudGVuY2VJbml0aWFsaXplZEJ5QXVkaW8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZpcnN0IHdlIGFyZSBhZGRpbmcgdGhlIGltYWdlIGFuZCBhdWRpbyBlbGVtZW50cyBhbmQgdGhlIHRleHQgYWZ0ZXJcclxuICAgICAgICAgICAgLy8gdGhlIHJlYXNvbmluZyBiZWhpbmQgdGhpcyBpcyB0aGF0IGlmIHRoZSBwYWdlIGNvbnRhaW5zIGFuIGF1ZGlvXHJcbiAgICAgICAgICAgIC8vIGVsZW1lbnQgaW4gdGhhdCBjYXNlIHdlIHNob3VsZCBpbml0aWFsaXplIHRleHQgZnJvbSB0aGUgYXVkaW9cclxuICAgICAgICAgICAgLy8gdGltZXN0YW1wcyB0aGF0IHdlIGdldCBmcm9tIHRoZSBjb250ZW50IGZpbGVcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmlzdWFsRWxlbWVudCA9IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHNbal07XHJcbiAgICAgICAgICAgICAgICBpZiAodmlzdWFsRWxlbWVudC50eXBlID09IFwiaW1hZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnQ6IEltYWdlRWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2VJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVJbWFnZUNvbnRhaW5lcihwYWdlSW5kZXgsIGltYWdlRWxlbWVudCwgaikpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VudGVuY2VJbml0aWFsaXplZEJ5QXVkaW8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhdWRpb0VsZW1lbnQ6IEF1ZGlvRWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnQgPSBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlzdWFsRWxlbWVudC50eXBlID09IFwidGV4dFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhdWRpb0FuZFRleHREaXZzID0gdGhpcy5jcmVhdGVBdWRpb0FuZFRleHRDb250YWluZXJzKGksIGF1ZGlvRWxlbWVudCwgdGV4dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZChhdWRpb0FuZFRleHREaXZzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQoYXVkaW9BbmRUZXh0RGl2c1sxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVBdWRpb0NvbnRhaW5lcihhdWRpb0VsZW1lbnQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUuYWRkKHNsaWRlTGkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgc2VudGVuY2Ugd2Fzbid0IG5vdCBpbml0aWFsaXplZCBieSB0aGUgYXVkaW8gb2JqZWN0XHJcbiAgICAgICAgICAgIC8vIHRoZW4gd2UgYWRkIGl0IGhlcmVcclxuICAgICAgICAgICAgaWYgKCFzZW50ZW5jZUluaXRpYWxpemVkQnlBdWRpbykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZpc3VhbEVsZW1lbnQgPSBib29rLnBhZ2VzW2ldLnZpc3VhbEVsZW1lbnRzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJ0ZXh0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHRFbGVtZW50OiBUZXh0RWxlbWVudCA9IHZpc3VhbEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRleHRDb250YWluZXIodGV4dEVsZW1lbnQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlVGV4dENvbnRhaW5lcih0ZXh0RWxlbWVudDogVGV4dEVsZW1lbnQpOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICAgICAgbGV0IHRleHRFbGVtZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuaWQgPSBcImNyLXRleHRcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5jbGFzc0xpc3QuYWRkKFwiY3ItdGV4dFwiKTtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS53ZWJraXRUZXh0U3Ryb2tlID0gXCIxcHggIzMwMzAzMFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmNvbG9yID0gXCIjRkZGRkZGXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUudGV4dFNoYWRvdyA9IFwiMC4xcmVtIDAuMTVyZW0gMC4xcmVtICMzMDMwMzBcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5mb250RmFtaWx5ID0gXCJRdWlja3NhbmRcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5mb250V2VpZ2h0ID0gXCI4MDBcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5mb250U2l6ZSA9IFwiaW5oZXJpdFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLnRvcCA9IHRleHRFbGVtZW50LnBvc2l0aW9uWSArIFwiJVwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmxlZnQgPSB0ZXh0RWxlbWVudC5wb3NpdGlvblggKyBcIiVcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS53aWR0aCA9IHRleHRFbGVtZW50LndpZHRoICsgXCIlXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuaGVpZ2h0ID0gdGV4dEVsZW1lbnQuaGVpZ2h0ICsgXCIlXCI7XHJcbiAgICAgICAgLy8gdGV4dEVsZW1lbnREaXYuaW5uZXJIVE1MID0gdGV4dEVsZW1lbnQudGV4dENvbnRlbnRBc0hUTUwucmVwbGFjZShcIjIuMjVlbVwiLCBcIlwiKTtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5pbm5lckhUTUwgPSB0ZXh0RWxlbWVudC50ZXh0Q29udGVudEFzSFRNTC5yZXBsYWNlKC9mb250LXNpemU6W147XSs7L2csIFwiXCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGV4dEVsZW1lbnREaXY7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlSW1hZ2VDb250YWluZXIocGFnZUluZGV4OiBudW1iZXIsIGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50LCBlbGVtZW50SW5kZXg6IG51bWJlcik6IEhUTUxEaXZFbGVtZW50IHtcclxuICAgICAgICBsZXQgaW1hZ2VFbGVtZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIGltYWdlRWxlbWVudERpdi5zdHlsZS50b3AgPSBpbWFnZUVsZW1lbnQucG9zaXRpb25ZICsgXCIlXCI7XHJcbiAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLmxlZnQgPSBpbWFnZUVsZW1lbnQucG9zaXRpb25YICsgXCIlXCI7XHJcbiAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gaW1hZ2VFbGVtZW50LndpZHRoICsgXCIlXCI7XHJcbiAgICAgICAgaW1hZ2VFbGVtZW50RGl2LnN0eWxlLmhlaWdodCA9IGltYWdlRWxlbWVudC5oZWlnaHQgKyBcIiVcIjtcclxuXHJcbiAgICAgICAgaWYgKGltYWdlRWxlbWVudC5pbWFnZVNvdXJjZSA9PT0gdGhpcy5lbXB0eUdsb3dJbWFnZVRhZykge1xyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImNyLWltYWdlLWVtcHR5LWdsb3dcIik7XHJcbiAgICAgICAgICAgIC8vIFVzaW5nIGNsYXNzZXMgaGVyZSBpbnN0ZWFkIG9mIGlkIGFzc2lnbm1lbnQsIGJlY2F1c2Ugd2UgY291bGQgaGF2ZSBtdWx0aXBsZSBnbG93aW5nIGRpdnNcclxuICAgICAgICAgICAgLy8gYXR0YWNoZWQgdG8gb25lIHdvcmQgaW4gdGhlIHNlbnRlbmNlIGFuZCBoYXZpbmcgbXVsdGlwbGUgZWxlbWVudHMgd2l0aCB0aGUgc2FtZSBpZCBpcyBub3RcclxuICAgICAgICAgICAgLy8gYWxsb3dlZCBpbiBIVE1MXHJcbiAgICAgICAgICAgIGlmIChpbWFnZUVsZW1lbnQuZG9tSUQgPT09IHVuZGVmaW5lZCB8fCBpbWFnZUVsZW1lbnQuZG9tSUQgPT09IG51bGwgfHwgaW1hZ2VFbGVtZW50LmRvbUlEID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IFwiaW1nXCIgKyBwYWdlSW5kZXggKyBcIl9cIiArIGVsZW1lbnRJbmRleDtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5pZCA9IGlkO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IHRoZSBnbG93aW5nIG9iamVjdCBpc24ndCBjb25uZWN0ZWQgdG8gYW55IHdvcmQgaW4gdGhlIHNlbnRlbmNlLCBpdCBzaG91bGQgc3RpbGwgaGF2ZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZ2xvdyBlZmZlY3QgdGhvdWdoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTdGFuZGFsb25lR2xvd0ltYWdlQ2xpY2socGFnZUluZGV4LCBpZCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5jbGFzc0xpc3QuYWRkKGltYWdlRWxlbWVudC5kb21JRCk7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnREaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUdsb3dJbWFnZUNsaWNrKHBhZ2VJbmRleCwgaW1hZ2VFbGVtZW50LmRvbUlELnNwbGl0KFwiX1wiKVsxXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5pZCA9IGltYWdlRWxlbWVudC5kb21JRDtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJjci1pbWFnZVwiKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnRJbWcuc3JjID1cclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzUGF0aCArIGltYWdlRWxlbWVudC5pbWFnZVNvdXJjZS5yZXBsYWNlKFwiaW1hZ2VzL1wiLCBcIlwiKTtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudEltZy5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmFwcGVuZENoaWxkKGltYWdlRWxlbWVudEltZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW1hZ2VFbGVtZW50RGl2O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUF1ZGlvQ29udGFpbmVyKGF1ZGlvRWxlbWVudDogQXVkaW9FbGVtZW50KTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgICAgIGxldCBhdWRpb0VsZW1lbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICBhdWRpb0VsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImNyLWF1ZGlvXCIpO1xyXG4gICAgICAgIGF1ZGlvRWxlbWVudERpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuXHJcbiAgICAgICAgbGV0IHBhZ2VBdWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKTtcclxuICAgICAgICBwYWdlQXVkaW8uaWQgPSBhdWRpb0VsZW1lbnQuZG9tSUQ7XHJcbiAgICAgICAgcGFnZUF1ZGlvLnNyYyA9IHRoaXMuYXVkaW9QYXRoICsgYXVkaW9FbGVtZW50LmF1ZGlvU3JjLnJlcGxhY2UoXCJhdWRpb3MvXCIsIFwiXCIpO1xyXG4gICAgICAgIHBhZ2VBdWRpby5jb250cm9scyA9IGZhbHNlO1xyXG4gICAgICAgIGF1ZGlvRWxlbWVudERpdi5hcHBlbmRDaGlsZChwYWdlQXVkaW8pO1xyXG5cclxuICAgICAgICBpZiAoYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgd29yZFRpbWVzdGFtcEVsZW1lbnQ6IFdvcmRUaW1lc3RhbXBFbGVtZW50ID0gYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdvcmRBdWRpb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XHJcbiAgICAgICAgICAgICAgICB3b3JkQXVkaW9FbGVtZW50LmlkID0gd29yZFRpbWVzdGFtcEVsZW1lbnQuZG9tSUQ7XHJcbiAgICAgICAgICAgICAgICB3b3JkQXVkaW9FbGVtZW50LnNyYyA9IHRoaXMuYXVkaW9QYXRoICsgd29yZFRpbWVzdGFtcEVsZW1lbnQuYXVkaW9TcmMucmVwbGFjZShcImF1ZGlvcy9cIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB3b3JkQXVkaW9FbGVtZW50LmNvbnRyb2xzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnREaXYuYXBwZW5kQ2hpbGQod29yZEF1ZGlvRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhdWRpb0VsZW1lbnREaXY7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQXVkaW9BbmRUZXh0Q29udGFpbmVycyhwYWdlSW5kZXg6IG51bWJlciwgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQsIHRleHRFbGVtZW50OiBUZXh0RWxlbWVudCk6IEhUTUxEaXZFbGVtZW50W10ge1xyXG4gICAgICAgIGxldCBhdWRpb0FuZFRleHRBcnJheTogSFRNTERpdkVsZW1lbnRbXSA9IEFycmF5KCk7XHJcblxyXG4gICAgICAgIGxldCBhdWRpb0VsZW1lbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICBhdWRpb0VsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImNyLWF1ZGlvXCIpO1xyXG4gICAgICAgIGF1ZGlvRWxlbWVudERpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuXHJcbiAgICAgICAgbGV0IHBhZ2VBdWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKTtcclxuICAgICAgICBwYWdlQXVkaW8uaWQgPSBhdWRpb0VsZW1lbnQuZG9tSUQ7XHJcbiAgICAgICAgcGFnZUF1ZGlvLnNyYyA9IHRoaXMuYXVkaW9QYXRoICsgYXVkaW9FbGVtZW50LmF1ZGlvU3JjLnJlcGxhY2UoXCJhdWRpb3MvXCIsIFwiXCIpO1xyXG4gICAgICAgIHBhZ2VBdWRpby5jb250cm9scyA9IGZhbHNlO1xyXG4gICAgICAgIGF1ZGlvRWxlbWVudERpdi5hcHBlbmRDaGlsZChwYWdlQXVkaW8pO1xyXG5cclxuICAgICAgICBsZXQgc2VudGVuY2VBcnJheVRyaW1tZWQ6IHN0cmluZ1tdID0gQXJyYXkoKTtcclxuXHJcbiAgICAgICAgaWYgKGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdvcmRUaW1lc3RhbXBFbGVtZW50OiBXb3JkVGltZXN0YW1wRWxlbWVudCA9IGF1ZGlvRWxlbWVudC5hdWRpb1RpbWVzdGFtcHMudGltZXN0YW1wc1tpXTtcclxuICAgICAgICAgICAgICAgIGxldCB3b3JkQXVkaW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpO1xyXG4gICAgICAgICAgICAgICAgd29yZEF1ZGlvRWxlbWVudC5pZCA9IHdvcmRUaW1lc3RhbXBFbGVtZW50LmRvbUlEO1xyXG4gICAgICAgICAgICAgICAgd29yZEF1ZGlvRWxlbWVudC5zcmMgPSB0aGlzLmF1ZGlvUGF0aCArIHdvcmRUaW1lc3RhbXBFbGVtZW50LmF1ZGlvU3JjLnJlcGxhY2UoXCJhdWRpb3MvXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgd29yZEF1ZGlvRWxlbWVudC5jb250cm9scyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc2VudGVuY2VBcnJheVRyaW1tZWQucHVzaCh3b3JkVGltZXN0YW1wRWxlbWVudC53b3JkLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnREaXYuYXBwZW5kQ2hpbGQod29yZEF1ZGlvRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF1ZGlvQW5kVGV4dEFycmF5LnB1c2goYXVkaW9FbGVtZW50RGl2KTtcclxuXHJcbiAgICAgICAgbGV0IGF1ZGlvQ29udGVudERPTUlkID0gYXVkaW9FbGVtZW50LmRvbUlEO1xyXG5cclxuICAgICAgICBsZXQgdGV4dEVsZW1lbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5pZCA9IFwiY3ItdGV4dFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJjci10ZXh0XCIpO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUud2Via2l0VGV4dFN0cm9rZSA9IFwiMXB4ICMzMDMwMzBcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5jb2xvciA9IFwiI0ZGRkZGRlwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLnRleHRTaGFkb3cgPSBcIjAuMXJlbSAwLjE1cmVtIDAuMXJlbSAjMzAzMDMwXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuZm9udEZhbWlseSA9IFwiUXVpY2tzYW5kXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuZm9udFdlaWdodCA9IFwiODAwXCI7XHJcbiAgICAgICAgLy8gdGV4dEVsZW1lbnREaXYuc3R5bGUuZm9udFNpemUgPSBcIjJyZW1cIjtcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS50b3AgPSB0ZXh0RWxlbWVudC5wb3NpdGlvblkgKyBcIiVcIjtcclxuICAgICAgICBcclxuICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5oZWlnaHQgPSB0ZXh0RWxlbWVudC5oZWlnaHQgKyBcIiVcIjtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGV4dEVsZW1lbnQucG9zaXRpb25YID4gNTAuNSkge1xyXG4gICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS5sZWZ0ID0gdGV4dEVsZW1lbnQucG9zaXRpb25YICsgXCIlXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0ZXh0RWxlbWVudC5wb3NpdGlvblggPCAxNSAmJiB0ZXh0RWxlbWVudC53aWR0aCA8IDkwKSB7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmxlZnQgPSB0ZXh0RWxlbWVudC5wb3NpdGlvblggKyBcIiVcIjtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUud2lkdGggPSB0ZXh0RWxlbWVudC53aWR0aCArIFwiJVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2VudGVuY2VQYXJhZ3JhcGg6IEhUTUxQYXJhZ3JhcGhFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAvLyBzZW50ZW5jZVBhcmFncmFwaC5zdHlsZS5mb250U2l6ZSA9IFwiMnJlbVwiO1xyXG4gICAgICAgIHNlbnRlbmNlUGFyYWdyYXBoLnN0eWxlLm1hcmdpbiA9IFwiMHB4XCI7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VudGVuY2VBcnJheVRyaW1tZWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGNsaWNrYWJsZVdvcmRFbGVtZW50OiBIVE1MU3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBjbGlja2FibGVXb3JkRWxlbWVudC5pZCA9IGF1ZGlvQ29udGVudERPTUlkICsgXCJfd29yZF9cIiArIGk7XHJcbiAgICAgICAgICAgIGNsaWNrYWJsZVdvcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjci1jbGlja2FibGUtd29yZFwiKTtcclxuICAgICAgICAgICAgY2xpY2thYmxlV29yZEVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9IFwiMTBweFwiO1xyXG4gICAgICAgICAgICBjbGlja2FibGVXb3JkRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiMTBweFwiO1xyXG4gICAgICAgICAgICBjbGlja2FibGVXb3JkRWxlbWVudC5pbm5lclRleHQgPSBzZW50ZW5jZUFycmF5VHJpbW1lZFtpXTtcclxuICAgICAgICAgICAgY2xpY2thYmxlV29yZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVJbnRlcmFjdGl2ZVdvcmRDbGljayhwYWdlSW5kZXgsIGkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VudGVuY2VQYXJhZ3JhcGguYXBwZW5kQ2hpbGQoY2xpY2thYmxlV29yZEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGV4dEVsZW1lbnREaXYuYXBwZW5kQ2hpbGQoc2VudGVuY2VQYXJhZ3JhcGgpO1xyXG5cclxuICAgICAgICBhdWRpb0FuZFRleHRBcnJheS5wdXNoKHRleHRFbGVtZW50RGl2KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF1ZGlvQW5kVGV4dEFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVN0YW5kYWxvbmVHbG93SW1hZ2VDbGljayhwYWdlSW5kZXg6IG51bWJlciwgaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlQbGF5aW5nQXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jdXJyZW50UGFnZUF1dG9QbGF5ZXJJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmN1cnJlbnRXb3JkUGxheWluZ1RpbWVvdXQpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJyZW50R2xvd0ltYWdlVGltZW91dCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzW2ldLnN0eWxlLmJveFNoYWRvdyA9IFwidHJhbnNwYXJlbnQgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzID0gQXJyYXkoKTtcclxuXHJcbiAgICAgICAgbGV0IGdsb3dEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudGx5QWN0aXZlR2xvd0ltYWdlcy5wdXNoKGdsb3dEaXYpO1xyXG4gICAgICAgIGdsb3dEaXYuc3R5bGUuYm94U2hhZG93ID0gXCJvcmFuZ2UgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50R2xvd0ltYWdlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZ2xvd0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgZ2xvd0Rpdi5zdHlsZS5ib3hTaGFkb3cgPSBcInRyYW5zcGFyZW50IDBweCAwcHggMjBweCAyMHB4XCI7XHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVHbG93SW1hZ2VDbGljayhwYWdlSW5kZXg6IG51bWJlciwgd29yZEluZGV4OiBzdHJpbmcpIHtcclxuICAgICAgICAvLyBQYXJzZSB0aGUgbnVtYmVyIGZyb20gdGhlIHdvcmRJbmRleFxyXG4gICAgICAgIGxldCB3b3JkSW5kZXhOdW1iZXIgPSBwYXJzZUludCh3b3JkSW5kZXgpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlSW50ZXJhY3RpdmVXb3JkQ2xpY2socGFnZUluZGV4LCB3b3JkSW5kZXhOdW1iZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZUNvbm5lY3RlZEdyYXBoaWNIaWdobGlnaHRpbmcocGFnZUluZGV4OiBudW1iZXIsIHdvcmRJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVJbnRlcmFjdGl2ZVdvcmRDbGljayhwYWdlSW5kZXgsIHdvcmRJbmRleCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlSW50ZXJhY3RpdmVXb3JkQ2xpY2socGFnZUluZGV4OiBudW1iZXIsIHdvcmRJbmRleDogbnVtYmVyLCBnbG93SW1hZ2VPbmx5OiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlQbGF5aW5nQXVkaW9FbGVtZW50ICE9PSBudWxsICYmICFnbG93SW1hZ2VPbmx5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudC5wYXVzZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRseVBsYXlpbmdBdWRpb0VsZW1lbnQuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY3VycmVudFBhZ2VBdXRvUGxheWVySW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJyZW50V29yZFBsYXlpbmdUaW1lb3V0KTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY3VycmVudEdsb3dJbWFnZVRpbWVvdXQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlBY3RpdmVXb3JkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZVdvcmQuY2xhc3NMaXN0LnJlbW92ZShcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5QWN0aXZlV29yZC5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVHbG93SW1hZ2VzW2ldLnN0eWxlLmJveFNoYWRvdyA9IFwidHJhbnNwYXJlbnQgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZUdsb3dJbWFnZXMgPSBBcnJheSgpO1xyXG4gICAgICAgIGxldCBwYWdlID0gdGhpcy5ib29rLnBhZ2VzW3BhZ2VJbmRleF07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWdlLnZpc3VhbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gcGFnZS52aXN1YWxFbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgaWYgKHZpc3VhbEVsZW1lbnQudHlwZSA9PT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXVkaW9FbGVtZW50OiBBdWRpb0VsZW1lbnQgPSB2aXN1YWxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB3b3JkQXVkaW9FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmF1ZGlvVGltZXN0YW1wcy50aW1lc3RhbXBzW3dvcmRJbmRleF0uZG9tSUQpIGFzIEhUTUxBdWRpb0VsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFnbG93SW1hZ2VPbmx5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSGlnaGxpZ2h0IHRoZSB3b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9FbGVtZW50LmRvbUlEICsgXCJfd29yZF9cIiArIHdvcmRJbmRleCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlBY3RpdmVXb3JkID0gd29yZEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB3b3JkRWxlbWVudC5zdHlsZS5jb2xvciA9IGF1ZGlvRWxlbWVudC5nbG93Q29sb3I7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRXb3JkUGxheWluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNyLWNsaWNrYWJsZS13b3JkLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZEVsZW1lbnQuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBIaWdobGlnaHQgdGhlIGNvbm5lY3RlZCBnbG93IGltYWdlc1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RlZEdsb3dJbWFnZUNsYXNzID0gXCJpbWdcIiArIGF1ZGlvRWxlbWVudC5kb21JRCArIFwiX1wiICsgd29yZEluZGV4O1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RlZEdsb3dJbWFnZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNvbm5lY3RlZEdsb3dJbWFnZUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29ubmVjdGVkR2xvd0ltYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnbG93RGl2ID0gY29ubmVjdGVkR2xvd0ltYWdlc1tpXSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRseUFjdGl2ZUdsb3dJbWFnZXMucHVzaChnbG93RGl2KTtcclxuICAgICAgICAgICAgICAgICAgICBnbG93RGl2LnN0eWxlLmJveFNoYWRvdyA9IGF1ZGlvRWxlbWVudC5nbG93Q29sb3IgKyBcIiAwcHggMHB4IDIwcHggMjBweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEdsb3dJbWFnZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbm5lY3RlZEdsb3dJbWFnZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdsb3dEaXYgPSBjb25uZWN0ZWRHbG93SW1hZ2VzW2ldIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbG93RGl2LnN0eWxlLmJveFNoYWRvdyA9IFwidHJhbnNwYXJlbnQgMHB4IDBweCAyMHB4IDIwcHhcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZ2xvd0ltYWdlT25seSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudGx5UGxheWluZ0F1ZGlvRWxlbWVudCA9IHdvcmRBdWRpb0VsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgd29yZEF1ZGlvRWxlbWVudC5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUdETEJvb2soYm9vazogQm9vaykge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9vay5wYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzbGlkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZChcInNwbGlkZV9fc2xpZGVcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgYSBmbGV4Ym94IGNvbnRhaW5lciB0byB0aGUgc2xpZGUgd2l0aCBhIGNvbHVtbiBsYXlvdXRcclxuICAgICAgICAgICAgbGV0IGZsZXhDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJnZGwtZmxleC1jb250YWluZXJcIik7XHJcbiAgICAgICAgICAgIGZsZXhDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xyXG4gICAgICAgICAgICBmbGV4Q29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgZmxleENvbnRhaW5lci5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZChmbGV4Q29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGZvcmVhY2ggdmlzdWFsZWxlbWVudCBpbiBwYWdlIGFkZCB0byBzbGlkZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvb2sucGFnZXNbaV0udmlzdWFsRWxlbWVudHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB2aXN1YWxFbGVtZW50ID0gYm9vay5wYWdlc1tpXS52aXN1YWxFbGVtZW50c1tqXTtcclxuICAgICAgICAgICAgICAgIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJ0ZXh0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnQ6IFRleHRFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dEVsZW1lbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndpZHRoID0gXCI2MCVcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuY2xhc3NMaXN0LmFkZChcImdkbC10ZXh0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLndlYmtpdFRleHRTdHJva2UgPSBcIjFweCAjMzAzMDMwXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW1lbnREaXYuc3R5bGUuY29sb3IgPSBcIiNGRkZGRkZcIjtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudERpdi5zdHlsZS50ZXh0U2hhZG93ID0gXCIwLjFyZW0gMC4xNXJlbSAwLjFyZW0gIzMwMzAzMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRGYW1pbHkgPSBcIlF1aWNrc2FuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRXZWlnaHQgPSBcIjgwMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LnN0eWxlLmZvbnRTaXplID0gXCIxLjdlbVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRFbGVtZW50RGl2LmlubmVySFRNTCA9IHRleHRFbGVtZW50LnRleHRDb250ZW50QXNIVE1MLnJlcGxhY2UoXCIyLjI1ZW1cIiwgXCIyOHB4XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsZXhDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dEVsZW1lbnREaXYpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aXN1YWxFbGVtZW50LnR5cGUgPT0gXCJpbWFnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudDogSW1hZ2VFbGVtZW50ID0gdmlzdWFsRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50RGl2LmNsYXNzTGlzdC5hZGQoXCJnZGwtaW1hZ2VcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWFnZUVsZW1lbnRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudEltZy5zcmMgPSB0aGlzLmltYWdlc1BhdGggKyBpbWFnZUVsZW1lbnQuaW1hZ2VTb3VyY2UucmVwbGFjZShcImltYWdlcy9cIiwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50SW1nLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudERpdi5hcHBlbmRDaGlsZChpbWFnZUVsZW1lbnRJbWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsZXhDb250YWluZXIuYXBwZW5kQ2hpbGQoaW1hZ2VFbGVtZW50RGl2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zcGxpZGVIYW5kbGUuYWRkKHNsaWRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ29Ub05leHRQYWdlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8IHRoaXMubnVtYmVyT2ZQYWdlcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJhbnNpdGlvblRvUGFnZSh0aGlzLmN1cnJlbnRQYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBnb1RvUHJldmlvdXNQYWdlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZS0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25Ub1BhZ2UodGhpcy5jdXJyZW50UGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNpdGlvblRvUGFnZShwYWdlTnVtYmVyOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25pbmdUb1BhZ2UgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsInRyeXtzZWxmW1wid29ya2JveDp3aW5kb3c6Ni41LjNcIl0mJl8oKX1jYXRjaChuKXt9ZnVuY3Rpb24gbihuLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocil7dmFyIGU9bmV3IE1lc3NhZ2VDaGFubmVsO2UucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKG4pe3Iobi5kYXRhKX0sbi5wb3N0TWVzc2FnZSh0LFtlLnBvcnQyXSl9KSl9ZnVuY3Rpb24gdChuLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgZT10W3JdO2UuZW51bWVyYWJsZT1lLmVudW1lcmFibGV8fCExLGUuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGUmJihlLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixlLmtleSxlKX19ZnVuY3Rpb24gcihuLHQpeyhudWxsPT10fHx0Pm4ubGVuZ3RoKSYmKHQ9bi5sZW5ndGgpO2Zvcih2YXIgcj0wLGU9bmV3IEFycmF5KHQpO3I8dDtyKyspZVtyXT1uW3JdO3JldHVybiBlfWZ1bmN0aW9uIGUobix0KXt2YXIgZTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHxudWxsPT1uW1N5bWJvbC5pdGVyYXRvcl0pe2lmKEFycmF5LmlzQXJyYXkobil8fChlPWZ1bmN0aW9uKG4sdCl7aWYobil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pcmV0dXJuIHIobix0KTt2YXIgZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobikuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PWUmJm4uY29uc3RydWN0b3ImJihlPW4uY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PWV8fFwiU2V0XCI9PT1lP0FycmF5LmZyb20obik6XCJBcmd1bWVudHNcIj09PWV8fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KGUpP3Iobix0KTp2b2lkIDB9fShuKSl8fHQmJm4mJlwibnVtYmVyXCI9PXR5cGVvZiBuLmxlbmd0aCl7ZSYmKG49ZSk7dmFyIGk9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gaT49bi5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOm5baSsrXX19fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX1yZXR1cm4oZT1uW1N5bWJvbC5pdGVyYXRvcl0oKSkubmV4dC5iaW5kKGUpfXRyeXtzZWxmW1wid29ya2JveDpjb3JlOjYuNS4zXCJdJiZfKCl9Y2F0Y2gobil7fXZhciBpPWZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQscil7bi5yZXNvbHZlPXQsbi5yZWplY3Q9cn0pKX07ZnVuY3Rpb24gbyhuLHQpe3ZhciByPWxvY2F0aW9uLmhyZWY7cmV0dXJuIG5ldyBVUkwobixyKS5ocmVmPT09bmV3IFVSTCh0LHIpLmhyZWZ9dmFyIHU9ZnVuY3Rpb24obix0KXt0aGlzLnR5cGU9bixPYmplY3QuYXNzaWduKHRoaXMsdCl9O2Z1bmN0aW9uIGEobix0LHIpe3JldHVybiByP3Q/dChuKTpuOihuJiZuLnRoZW58fChuPVByb21pc2UucmVzb2x2ZShuKSksdD9uLnRoZW4odCk6bil9ZnVuY3Rpb24gYygpe312YXIgZj17dHlwZTpcIlNLSVBfV0FJVElOR1wifTtmdW5jdGlvbiBzKG4sdCl7aWYoIXQpcmV0dXJuIG4mJm4udGhlbj9uLnRoZW4oYyk6UHJvbWlzZS5yZXNvbHZlKCl9dmFyIHY9ZnVuY3Rpb24ocil7dmFyIGUsYztmdW5jdGlvbiB2KG4sdCl7dmFyIGUsYztyZXR1cm4gdm9pZCAwPT09dCYmKHQ9e30pLChlPXIuY2FsbCh0aGlzKXx8dGhpcykubm49e30sZS50bj0wLGUucm49bmV3IGksZS5lbj1uZXcgaSxlLm9uPW5ldyBpLGUudW49MCxlLmFuPW5ldyBTZXQsZS5jbj1mdW5jdGlvbigpe3ZhciBuPWUuZm4sdD1uLmluc3RhbGxpbmc7ZS50bj4wfHwhbyh0LnNjcmlwdFVSTCxlLnNuLnRvU3RyaW5nKCkpfHxwZXJmb3JtYW5jZS5ub3coKT5lLnVuKzZlND8oZS52bj10LG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbikpOihlLmhuPXQsZS5hbi5hZGQodCksZS5ybi5yZXNvbHZlKHQpKSwrK2UudG4sdC5hZGRFdmVudExpc3RlbmVyKFwic3RhdGVjaGFuZ2VcIixlLmxuKX0sZS5sbj1mdW5jdGlvbihuKXt2YXIgdD1lLmZuLHI9bi50YXJnZXQsaT1yLnN0YXRlLG89cj09PWUudm4sYT17c3c6cixpc0V4dGVybmFsOm8sb3JpZ2luYWxFdmVudDpufTshbyYmZS5tbiYmKGEuaXNVcGRhdGU9ITApLGUuZGlzcGF0Y2hFdmVudChuZXcgdShpLGEpKSxcImluc3RhbGxlZFwiPT09aT9lLnduPXNlbGYuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcImluc3RhbGxlZFwiPT09aSYmdC53YWl0aW5nPT09ciYmZS5kaXNwYXRjaEV2ZW50KG5ldyB1KFwid2FpdGluZ1wiLGEpKX0pLDIwMCk6XCJhY3RpdmF0aW5nXCI9PT1pJiYoY2xlYXJUaW1lb3V0KGUud24pLG98fGUuZW4ucmVzb2x2ZShyKSl9LGUuZG49ZnVuY3Rpb24obil7dmFyIHQ9ZS5obixyPXQhPT1uYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyO2UuZGlzcGF0Y2hFdmVudChuZXcgdShcImNvbnRyb2xsaW5nXCIse2lzRXh0ZXJuYWw6cixvcmlnaW5hbEV2ZW50Om4sc3c6dCxpc1VwZGF0ZTplLm1ufSkpLHJ8fGUub24ucmVzb2x2ZSh0KX0sZS5nbj0oYz1mdW5jdGlvbihuKXt2YXIgdD1uLmRhdGEscj1uLnBvcnRzLGk9bi5zb3VyY2U7cmV0dXJuIGEoZS5nZXRTVygpLChmdW5jdGlvbigpe2UuYW4uaGFzKGkpJiZlLmRpc3BhdGNoRXZlbnQobmV3IHUoXCJtZXNzYWdlXCIse2RhdGE6dCxvcmlnaW5hbEV2ZW50Om4scG9ydHM6cixzdzppfSkpfSkpfSxmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyluW3RdPWFyZ3VtZW50c1t0XTt0cnl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjLmFwcGx5KHRoaXMsbikpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19KSxlLnNuPW4sZS5ubj10LG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZS5nbiksZX1jPXIsKGU9dikucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5fX3Byb3RvX189Yzt2YXIgaCxsLG0sdz12LnByb3RvdHlwZTtyZXR1cm4gdy5yZWdpc3Rlcj1mdW5jdGlvbihuKXt2YXIgdD0odm9pZCAwPT09bj97fTpuKS5pbW1lZGlhdGUscj12b2lkIDAhPT10JiZ0O3RyeXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3ZhciByPW4oKTtpZihyJiZyLnRoZW4pcmV0dXJuIHIudGhlbih0KTtyZXR1cm4gdChyKX0oKGZ1bmN0aW9uKCl7aWYoIXImJlwiY29tcGxldGVcIiE9PWRvY3VtZW50LnJlYWR5U3RhdGUpcmV0dXJuIHMobmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3JldHVybiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixuKX0pKSl9KSwoZnVuY3Rpb24oKXtyZXR1cm4gZS5tbj1Cb29sZWFuKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpLGUueW49ZS5wbigpLGEoZS5ibigpLChmdW5jdGlvbihuKXtlLmZuPW4sZS55biYmKGUuaG49ZS55bixlLmVuLnJlc29sdmUoZS55biksZS5vbi5yZXNvbHZlKGUueW4pLGUueW4uYWRkRXZlbnRMaXN0ZW5lcihcInN0YXRlY2hhbmdlXCIsZS5sbix7b25jZTohMH0pKTt2YXIgdD1lLmZuLndhaXRpbmc7cmV0dXJuIHQmJm8odC5zY3JpcHRVUkwsZS5zbi50b1N0cmluZygpKSYmKGUuaG49dCxQcm9taXNlLnJlc29sdmUoKS50aGVuKChmdW5jdGlvbigpe2UuZGlzcGF0Y2hFdmVudChuZXcgdShcIndhaXRpbmdcIix7c3c6dCx3YXNXYWl0aW5nQmVmb3JlUmVnaXN0ZXI6ITB9KSl9KSkudGhlbigoZnVuY3Rpb24oKXt9KSkpLGUuaG4mJihlLnJuLnJlc29sdmUoZS5obiksZS5hbi5hZGQoZS5obikpLGUuZm4uYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbiksbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRyb2xsZXJjaGFuZ2VcIixlLmRuKSxlLmZufSkpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcudXBkYXRlPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmZuP3ModGhpcy5mbi51cGRhdGUoKSk6dm9pZCAwfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcuZ2V0U1c9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5obj9Qcm9taXNlLnJlc29sdmUodGhpcy5obik6dGhpcy5ybi5wcm9taXNlfSx3Lm1lc3NhZ2VTVz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIGEodGhpcy5nZXRTVygpLChmdW5jdGlvbihyKXtyZXR1cm4gbihyLHQpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcubWVzc2FnZVNraXBXYWl0aW5nPWZ1bmN0aW9uKCl7dGhpcy5mbiYmdGhpcy5mbi53YWl0aW5nJiZuKHRoaXMuZm4ud2FpdGluZyxmKX0sdy5wbj1mdW5jdGlvbigpe3ZhciBuPW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXI7cmV0dXJuIG4mJm8obi5zY3JpcHRVUkwsdGhpcy5zbi50b1N0cmluZygpKT9uOnZvaWQgMH0sdy5ibj1mdW5jdGlvbigpe3RyeXt2YXIgbj10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3RyeXt2YXIgcj1uKCl9Y2F0Y2gobil7cmV0dXJuIHQobil9aWYociYmci50aGVuKXJldHVybiByLnRoZW4odm9pZCAwLHQpO3JldHVybiByfSgoZnVuY3Rpb24oKXtyZXR1cm4gYShuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihuLnNuLG4ubm4pLChmdW5jdGlvbih0KXtyZXR1cm4gbi51bj1wZXJmb3JtYW5jZS5ub3coKSx0fSkpfSksKGZ1bmN0aW9uKG4pe3Rocm93IG59KSl9Y2F0Y2gobil7cmV0dXJuIFByb21pc2UucmVqZWN0KG4pfX0saD12LChsPVt7a2V5OlwiYWN0aXZlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW4ucHJvbWlzZX19LHtrZXk6XCJjb250cm9sbGluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uLnByb21pc2V9fV0pJiZ0KGgucHJvdG90eXBlLGwpLG0mJnQoaCxtKSx2fShmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt0aGlzLlBuPW5ldyBNYXB9dmFyIHQ9bi5wcm90b3R5cGU7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihuLHQpe3RoaXMuU24obikuYWRkKHQpfSx0LnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24obix0KXt0aGlzLlNuKG4pLmRlbGV0ZSh0KX0sdC5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKG4pe24udGFyZ2V0PXRoaXM7Zm9yKHZhciB0LHI9ZSh0aGlzLlNuKG4udHlwZSkpOyEodD1yKCkpLmRvbmU7KXsoMCx0LnZhbHVlKShuKX19LHQuU249ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuUG4uaGFzKG4pfHx0aGlzLlBuLnNldChuLG5ldyBTZXQpLHRoaXMuUG4uZ2V0KG4pfSxufSgpKTtleHBvcnR7diBhcyBXb3JrYm94LHUgYXMgV29ya2JveEV2ZW50LG4gYXMgbWVzc2FnZVNXfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtib3gtd2luZG93LnByb2QuZXM1Lm1qcy5tYXBcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBBbiBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBkZWNvZGluZyBiYXNlNjQgc3RyaW5nLlxyXG4gKi9cclxuY2xhc3MgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcic7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuLyoqXHJcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cclxuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfXyBvciBhIEpTT04gZmlsZSB3aG9zZSBwYXRoIGlzIGluXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX1BBVEhfX1xyXG4gKiBUaGUgZG90cyBhcmUgaW4gcGFyZW5zIGJlY2F1c2UgY2VydGFpbiBjb21waWxlcnMgKFZpdGU/KSBjYW5ub3RcclxuICogaGFuZGxlIHNlZWluZyB0aGF0IHZhcmlhYmxlIGluIGNvbW1lbnRzLlxyXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjgzOFxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWZhdWx0c0pzb25TdHJpbmcgPSBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcclxuICAgICAgICAvLyBgZG9jdW1lbnRgIG9iamVjdCBidXQgZXJyb3Igb24gYWNjZXNzaW5nIGBkb2N1bWVudC5jb29raWVgLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZWQgPSBtYXRjaCAmJiBiYXNlNjREZWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcclxufTtcclxuLyoqXHJcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxyXG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXHJcbiAqICgyKSBpZiBzdWNoIGFuIG9iamVjdCB3YXMgcHJvdmlkZWQgb24gYSBzaGVsbCBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKGdldERlZmF1bHRzRnJvbUdsb2JhbCgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tQ29va2llKCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXRjaC1hbGwgZm9yIGJlaW5nIHVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZVxyXG4gICAgICAgICAqIHRvIGFueSBlbnZpcm9ubWVudCBjYXNlIHdlIGhhdmUgbm90IGFjY291bnRlZCBmb3IuIExvZyB0b1xyXG4gICAgICAgICAqIGluZm8gaW5zdGVhZCBvZiBzd2FsbG93aW5nIHNvIHdlIGNhbiBmaW5kIHRoZXNlIHVua25vd24gY2FzZXNcclxuICAgICAgICAgKiBhbmQgYWRkIHBhdGhzIGZvciB0aGVtIGlmIG5lZWRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zb2xlLmluZm8oYFVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZSB0bzogJHtlfWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIFVSTCBob3N0IGZvcm1hdHRlZCBsaWtlIGAxMjcuMC4wLjE6OTk5OWAgb3IgYFs6OjFdOjQwMDBgIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0ID0gKHByb2R1Y3ROYW1lKSA9PiB7IHZhciBfYSwgX2I7IHJldHVybiAoX2IgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW11bGF0b3JIb3N0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW3Byb2R1Y3ROYW1lXTsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdG5hbWUgYW5kIHBvcnQgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBwYWlyIG9mIGhvc3RuYW1lIGFuZCBwb3J0IGxpa2UgYFtcIjo6MVwiLCA0MDAwXWAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCA9IChwcm9kdWN0TmFtZSkgPT4ge1xyXG4gICAgY29uc3QgaG9zdCA9IGdldERlZmF1bHRFbXVsYXRvckhvc3QocHJvZHVjdE5hbWUpO1xyXG4gICAgaWYgKCFob3N0KSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gaG9zdC5sYXN0SW5kZXhPZignOicpOyAvLyBGaW5kaW5nIHRoZSBsYXN0IHNpbmNlIElQdjYgYWRkciBhbHNvIGhhcyBjb2xvbnMuXHJcbiAgICBpZiAoc2VwYXJhdG9ySW5kZXggPD0gMCB8fCBzZXBhcmF0b3JJbmRleCArIDEgPT09IGhvc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhvc3QgJHtob3N0fSB3aXRoIG5vIHNlcGFyYXRlIGhvc3RuYW1lIGFuZCBwb3J0IWApO1xyXG4gICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xyXG4gICAgY29uc3QgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSksIDEwKTtcclxuICAgIGlmIChob3N0WzBdID09PSAnWycpIHtcclxuICAgICAgICAvLyBCcmFja2V0LXF1b3RlZCBgW2lwdjZhZGRyXTpwb3J0YCA9PiByZXR1cm4gXCJpcHY2YWRkclwiICh3aXRob3V0IGJyYWNrZXRzKS5cclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDEsIHNlcGFyYXRvckluZGV4IC0gMSksIHBvcnRdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCksIHBvcnRdO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBGaXJlYmFzZSBhcHAgY29uZmlnIHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEFwcENvbmZpZyA9ICgpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbmZpZzsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gZXhwZXJpbWVudGFsIHNldHRpbmcgb24gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QgKHByb3BlcnRpZXNcclxuICogcHJlZml4ZWQgYnkgXCJfXCIpXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldEV4cGVyaW1lbnRhbFNldHRpbmcgPSAobmFtZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbYF8ke25hbWV9YF07IH07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZCBvciBzcGVjaWZpZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZm9yY2VFbnZpcm9ubWVudCA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JjZUVudmlyb25tZW50O1xyXG4gICAgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdub2RlJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ2Jyb3dzZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgICEhbmF2aWdhdG9yLnVzZXJBZ2VudCAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIvc3cgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICpcclxuICogQHRocm93cyBleGNlcHRpb24gaWYgY3VycmVudCBicm93c2VyL3N3IGNvbnRleHQgY2FuJ3QgcnVuIGlkYi5vcGVuIChleDogU2FmYXJpIGlmcmFtZSwgRmlyZWZveFxyXG4gKiBwcml2YXRlIGJyb3dzaW5nKVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHByZUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjb2RlLCBtZXNzYWdlLCBcclxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmViYXNlRXJyb3JzLiAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlamVjdHMgaWYgdGhlIGdpdmVuIHByb21pc2UgZG9lc24ndCByZXNvbHZlIGluIHRpbWVJbk1TIG1pbGxpc2Vjb25kcy5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9taXNlV2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZUluTVMgPSAyMDAwKSB7XHJcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gZGVmZXJyZWRQcm9taXNlLnJlamVjdCgndGltZW91dCEnKSwgdGltZUluTVMpO1xyXG4gICAgcHJvbWlzZS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLCBkZWZlcnJlZFByb21pc2UucmVqZWN0KTtcclxuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvcGllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyB1dWlkLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCB1dWlkdjQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcclxuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldERlZmF1bHRBcHBDb25maWcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0RGVmYXVsdHMsIGdldEV4cGVyaW1lbnRhbFNldHRpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcHJvbWlzZVdpdGhUaW1lb3V0LCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdXVpZHY0LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbmNvbnN0IGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICovXHJcbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XHJcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcclxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxyXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsb2dUeXBlLCAuLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0xldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgIH1cclxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgXCIke3ZhbH1cIiBhc3NpZ25lZCB0byBcXGBsb2dMZXZlbFxcYGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIGRlYnVnKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpbmZvKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xyXG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUxvZ0xldmVsID0gbGV2ZWxTdHJpbmdUb0VudW1bb3B0aW9ucy5sZXZlbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbGV2ZWwsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImNvbnN0IGluc3RhbmNlT2ZBbnkgPSAob2JqZWN0LCBjb25zdHJ1Y3RvcnMpID0+IGNvbnN0cnVjdG9ycy5zb21lKChjKSA9PiBvYmplY3QgaW5zdGFuY2VvZiBjKTtcblxubGV0IGlkYlByb3h5YWJsZVR5cGVzO1xubGV0IGN1cnNvckFkdmFuY2VNZXRob2RzO1xuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRJZGJQcm94eWFibGVUeXBlcygpIHtcbiAgICByZXR1cm4gKGlkYlByb3h5YWJsZVR5cGVzIHx8XG4gICAgICAgIChpZGJQcm94eWFibGVUeXBlcyA9IFtcbiAgICAgICAgICAgIElEQkRhdGFiYXNlLFxuICAgICAgICAgICAgSURCT2JqZWN0U3RvcmUsXG4gICAgICAgICAgICBJREJJbmRleCxcbiAgICAgICAgICAgIElEQkN1cnNvcixcbiAgICAgICAgICAgIElEQlRyYW5zYWN0aW9uLFxuICAgICAgICBdKSk7XG59XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkge1xuICAgIHJldHVybiAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgfHxcbiAgICAgICAgKGN1cnNvckFkdmFuY2VNZXRob2RzID0gW1xuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5hZHZhbmNlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWVQcmltYXJ5S2V5LFxuICAgICAgICBdKSk7XG59XG5jb25zdCBjdXJzb3JSZXF1ZXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uRG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSh3cmFwKHJlcXVlc3QucmVzdWx0KSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHByb21pc2VcbiAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIFNpbmNlIGN1cnNvcmluZyByZXVzZXMgdGhlIElEQlJlcXVlc3QgKCpzaWdoKiksIHdlIGNhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWxcbiAgICAgICAgLy8gKHNlZSB3cmFwRnVuY3Rpb24pLlxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJDdXJzb3IpIHtcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3RNYXAuc2V0KHZhbHVlLCByZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYXRjaGluZyB0byBhdm9pZCBcIlVuY2F1Z2h0IFByb21pc2UgZXhjZXB0aW9uc1wiXG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgLy8gVGhpcyBtYXBwaW5nIGV4aXN0cyBpbiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYnV0IGRvZXNuJ3QgZG9lc24ndCBleGlzdCBpbiB0cmFuc2Zvcm1DYWNoZS4gVGhpc1xuICAgIC8vIGlzIGJlY2F1c2Ugd2UgY3JlYXRlIG1hbnkgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0LlxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJvbWlzZSwgcmVxdWVzdCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odHgpIHtcbiAgICAvLyBFYXJseSBiYWlsIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCBhIGRvbmUgcHJvbWlzZSBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICBpZiAodHJhbnNhY3Rpb25Eb25lTWFwLmhhcyh0eCkpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBkb25lID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh0eC5lcnJvciB8fCBuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydEVycm9yJywgJ0Fib3J0RXJyb3InKSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIC8vIENhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWwuXG4gICAgdHJhbnNhY3Rpb25Eb25lTWFwLnNldCh0eCwgZG9uZSk7XG59XG5sZXQgaWRiUHJveHlUcmFwcyA9IHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyYW5zYWN0aW9uLmRvbmUuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RvbmUnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkRvbmVNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICAvLyBQb2x5ZmlsbCBmb3Igb2JqZWN0U3RvcmVOYW1lcyBiZWNhdXNlIG9mIEVkZ2UuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ29iamVjdFN0b3JlTmFtZXMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5vYmplY3RTdG9yZU5hbWVzIHx8IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1ha2UgdHguc3RvcmUgcmV0dXJuIHRoZSBvbmx5IHN0b3JlIGluIHRoZSB0cmFuc2FjdGlvbiwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBtYW55LlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdzdG9yZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1sxXVxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IHJlY2VpdmVyLm9iamVjdFN0b3JlKHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgdHJhbnNmb3JtIHdoYXRldmVyIHdlIGdldCBiYWNrLlxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXRbcHJvcF0pO1xuICAgIH0sXG4gICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaGFzKHRhcmdldCwgcHJvcCkge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24gJiZcbiAgICAgICAgICAgIChwcm9wID09PSAnZG9uZScgfHwgcHJvcCA9PT0gJ3N0b3JlJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wIGluIHRhcmdldDtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIHJlcGxhY2VUcmFwcyhjYWxsYmFjaykge1xuICAgIGlkYlByb3h5VHJhcHMgPSBjYWxsYmFjayhpZGJQcm94eVRyYXBzKTtcbn1cbmZ1bmN0aW9uIHdyYXBGdW5jdGlvbihmdW5jKSB7XG4gICAgLy8gRHVlIHRvIGV4cGVjdGVkIG9iamVjdCBlcXVhbGl0eSAod2hpY2ggaXMgZW5mb3JjZWQgYnkgdGhlIGNhY2hpbmcgaW4gYHdyYXBgKSwgd2VcbiAgICAvLyBvbmx5IGNyZWF0ZSBvbmUgbmV3IGZ1bmMgcGVyIGZ1bmMuXG4gICAgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgb2JqZWN0U3RvcmVOYW1lcyAoYm9vbyksIHNvIHdlIHBvbHlmaWxsIGl0IGhlcmUuXG4gICAgaWYgKGZ1bmMgPT09IElEQkRhdGFiYXNlLnByb3RvdHlwZS50cmFuc2FjdGlvbiAmJlxuICAgICAgICAhKCdvYmplY3RTdG9yZU5hbWVzJyBpbiBJREJUcmFuc2FjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RvcmVOYW1lcywgLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3QgdHggPSBmdW5jLmNhbGwodW53cmFwKHRoaXMpLCBzdG9yZU5hbWVzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5zZXQodHgsIHN0b3JlTmFtZXMuc29ydCA/IHN0b3JlTmFtZXMuc29ydCgpIDogW3N0b3JlTmFtZXNdKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKHR4KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ3Vyc29yIG1ldGhvZHMgYXJlIHNwZWNpYWwsIGFzIHRoZSBiZWhhdmlvdXIgaXMgYSBsaXR0bGUgbW9yZSBkaWZmZXJlbnQgdG8gc3RhbmRhcmQgSURCLiBJblxuICAgIC8vIElEQiwgeW91IGFkdmFuY2UgdGhlIGN1cnNvciBhbmQgd2FpdCBmb3IgYSBuZXcgJ3N1Y2Nlc3MnIG9uIHRoZSBJREJSZXF1ZXN0IHRoYXQgZ2F2ZSB5b3UgdGhlXG4gICAgLy8gY3Vyc29yLiBJdCdzIGtpbmRhIGxpa2UgYSBwcm9taXNlIHRoYXQgY2FuIHJlc29sdmUgd2l0aCBtYW55IHZhbHVlcy4gVGhhdCBkb2Vzbid0IG1ha2Ugc2Vuc2VcbiAgICAvLyB3aXRoIHJlYWwgcHJvbWlzZXMsIHNvIGVhY2ggYWR2YW5jZSBtZXRob2RzIHJldHVybnMgYSBuZXcgcHJvbWlzZSBmb3IgdGhlIGN1cnNvciBvYmplY3QsIG9yXG4gICAgLy8gdW5kZWZpbmVkIGlmIHRoZSBlbmQgb2YgdGhlIGN1cnNvciBoYXMgYmVlbiByZWFjaGVkLlxuICAgIGlmIChnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpLmluY2x1ZGVzKGZ1bmMpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKGN1cnNvclJlcXVlc3RNYXAuZ2V0KHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24odmFsdWUpO1xuICAgIC8vIFRoaXMgZG9lc24ndCByZXR1cm4sIGl0IGp1c3QgY3JlYXRlcyBhICdkb25lJyBwcm9taXNlIGZvciB0aGUgdHJhbnNhY3Rpb24sXG4gICAgLy8gd2hpY2ggaXMgbGF0ZXIgcmV0dXJuZWQgZm9yIHRyYW5zYWN0aW9uLmRvbmUgKHNlZSBpZGJPYmplY3RIYW5kbGVyKS5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbilcbiAgICAgICAgY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHZhbHVlKTtcbiAgICBpZiAoaW5zdGFuY2VPZkFueSh2YWx1ZSwgZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSkpXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodmFsdWUsIGlkYlByb3h5VHJhcHMpO1xuICAgIC8vIFJldHVybiB0aGUgc2FtZSB2YWx1ZSBiYWNrIGlmIHdlJ3JlIG5vdCBnb2luZyB0byB0cmFuc2Zvcm0gaXQuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gd3JhcCh2YWx1ZSkge1xuICAgIC8vIFdlIHNvbWV0aW1lcyBnZW5lcmF0ZSBtdWx0aXBsZSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QgKGVnIHdoZW4gY3Vyc29yaW5nKSwgYmVjYXVzZVxuICAgIC8vIElEQiBpcyB3ZWlyZCBhbmQgYSBzaW5nbGUgSURCUmVxdWVzdCBjYW4geWllbGQgbWFueSByZXNwb25zZXMsIHNvIHRoZXNlIGNhbid0IGJlIGNhY2hlZC5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJSZXF1ZXN0KVxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdCh2YWx1ZSk7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSB0cmFuc2Zvcm1lZCB0aGlzIHZhbHVlIGJlZm9yZSwgcmV1c2UgdGhlIHRyYW5zZm9ybWVkIHZhbHVlLlxuICAgIC8vIFRoaXMgaXMgZmFzdGVyLCBidXQgaXQgYWxzbyBwcm92aWRlcyBvYmplY3QgZXF1YWxpdHkuXG4gICAgaWYgKHRyYW5zZm9ybUNhY2hlLmhhcyh2YWx1ZSkpXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSk7XG4gICAgLy8gTm90IGFsbCB0eXBlcyBhcmUgdHJhbnNmb3JtZWQuXG4gICAgLy8gVGhlc2UgbWF5IGJlIHByaW1pdGl2ZSB0eXBlcywgc28gdGhleSBjYW4ndCBiZSBXZWFrTWFwIGtleXMuXG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICB0cmFuc2Zvcm1DYWNoZS5zZXQodmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChuZXdWYWx1ZSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3VmFsdWU7XG59XG5jb25zdCB1bndyYXAgPSAodmFsdWUpID0+IHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuXG5leHBvcnQgeyByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYXMgYSwgaW5zdGFuY2VPZkFueSBhcyBpLCByZXBsYWNlVHJhcHMgYXMgciwgdW53cmFwIGFzIHUsIHdyYXAgYXMgdyB9O1xuIiwiaW1wb3J0IHsgdyBhcyB3cmFwLCByIGFzIHJlcGxhY2VUcmFwcyB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuZXhwb3J0IHsgdSBhcyB1bndyYXAsIHcgYXMgd3JhcCB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuXG4vKipcbiAqIE9wZW4gYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEBwYXJhbSB2ZXJzaW9uIFNjaGVtYSB2ZXJzaW9uLlxuICogQHBhcmFtIGNhbGxiYWNrcyBBZGRpdGlvbmFsIGNhbGxiYWNrcy5cbiAqL1xuZnVuY3Rpb24gb3BlbkRCKG5hbWUsIHZlcnNpb24sIHsgYmxvY2tlZCwgdXBncmFkZSwgYmxvY2tpbmcsIHRlcm1pbmF0ZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xuICAgIGNvbnN0IG9wZW5Qcm9taXNlID0gd3JhcChyZXF1ZXN0KTtcbiAgICBpZiAodXBncmFkZSkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHVwZ3JhZGUod3JhcChyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIHdyYXAocmVxdWVzdC50cmFuc2FjdGlvbiksIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICBvcGVuUHJvbWlzZVxuICAgICAgICAudGhlbigoZGIpID0+IHtcbiAgICAgICAgaWYgKHRlcm1pbmF0ZWQpXG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHRlcm1pbmF0ZWQoKSk7XG4gICAgICAgIGlmIChibG9ja2luZykge1xuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsIChldmVudCkgPT4gYmxvY2tpbmcoZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG5yZXBsYWNlVHJhcHMoKG9sZFRyYXBzKSA9PiAoe1xuICAgIC4uLm9sZFRyYXBzLFxuICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSxcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXG59KSk7XG5cbmV4cG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGdldERlZmF1bHRBcHBDb25maWcsIGRlZXBFcXVhbCwgRmlyZWJhc2VFcnJvciwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBDb21wb25lbnRUeXBlLlZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuOS4yN1wiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIxMC44LjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICBjb25zdCBoZWFydGJlYXRDb250cm9sbGVyID0gYXBwLmNvbnRhaW5lclxyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcclxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0Q29udHJvbGxlcikge1xyXG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIGluaXRpYWxpemVBcHAoKSBmaXJzdCcsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBBcHBFcnJvci5CQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovXTogJ05lZWQgdG8gcHJvdmlkZSBvcHRpb25zLCB3aGVuIG5vdCBiZWluZyBkZXBsb3llZCB0byBob3N0aW5nIHZpYSBzb3VyY2UuJyxcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nLFxyXG4gICAgW1wiaWRiLW9wZW5cIiAvKiBBcHBFcnJvci5JREJfT1BFTiAqL106ICdFcnJvciB0aHJvd24gd2hlbiBvcGVuaW5nIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqL106ICdFcnJvciB0aHJvd24gd2hlbiByZWFkaW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gd3JpdGluZyB0byBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWRlbGV0ZVwiIC8qIEFwcEVycm9yLklEQl9ERUxFVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gZGVsZXRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogQ29tcG9uZW50VHlwZS5QVUJMSUMgKi8pKTtcclxuICAgIH1cclxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBnZXQgY29uZmlnKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRGVsZXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGlzRGVsZXRlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChfb3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGxldCBvcHRpb25zID0gX29wdGlvbnM7XHJcbiAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zdCBuYW1lID0gcmF3Q29uZmlnO1xyXG4gICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZSB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7IG5hbWU6IERFRkFVTFRfRU5UUllfTkFNRSwgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOiBmYWxzZSB9LCByYXdDb25maWcpO1xyXG4gICAgY29uc3QgbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IGdldERlZmF1bHRBcHBDb25maWcoKSk7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBleGlzdGluZyBhcHAgaWYgb3B0aW9ucyBhbmQgY29uZmlnIGRlZXAgZXF1YWwgdGhlIG9uZXMgaW4gdGhlIGV4aXN0aW5nIGFwcC5cclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGRlZXBFcXVhbChjb25maWcsIGV4aXN0aW5nQXBwLmNvbmZpZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZSk7XHJcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xyXG4gICAgX2FwcHMuc2V0KG5hbWUsIG5ld0FwcCk7XHJcbiAgICByZXR1cm4gbmV3QXBwO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcclxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxyXG4gKiBpbml0aWFsaXplZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXHJcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcclxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xyXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXHJcbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmICghYXBwICYmIG5hbWUgPT09IERFRkFVTFRfRU5UUllfTkFNRSAmJiBnZXREZWZhdWx0QXBwQ29uZmlnKCkpIHtcclxuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IFNUT1JFX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaS9pT1MgYnJvd3NlcnMgdGhyb3cgb2NjYXNpb25hbCBleGNlcHRpb25zIG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkYi5jcmVhdGVPYmplY3RTdG9yZSgpIHRoYXQgbWF5IGJlIGEgYnVnLiBBdm9pZCBibG9ja2luZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlc3Qgb2YgdGhlIGFwcCBmdW5jdGlvbmFsaXR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKS5nZXQoY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICAvLyBXZSBhbHJlYWR5IGhhdmUgdGhlIHZhbHVlIGJ1dCB0eC5kb25lIGNhbiB0aHJvdyxcclxuICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIGF3YWl0IGl0IGhlcmUgdG8gY2F0Y2ggZXJyb3JzXHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIoYXBwLCBoZWFydGJlYXRPYmplY3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dChoZWFydGJlYXRPYmplY3QsIGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29tcHV0ZUtleShhcHApIHtcclxuICAgIHJldHVybiBgJHthcHAubmFtZX0hJHthcHAub3B0aW9ucy5hcHBJZH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE1BWF9IRUFERVJfQllURVMgPSAxMDI0O1xyXG4vLyAzMCBkYXlzXHJcbmNvbnN0IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVMgPSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbmNsYXNzIEhlYXJ0YmVhdFNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluLW1lbW9yeSBjYWNoZSBmb3IgaGVhcnRiZWF0cywgdXNlZCBieSBnZXRIZWFydGJlYXRzSGVhZGVyKCkgdG8gZ2VuZXJhdGVcclxuICAgICAgICAgKiB0aGUgaGVhZGVyIHN0cmluZy5cclxuICAgICAgICAgKiBTdG9yZXMgb25lIHJlY29yZCBwZXIgZGF0ZS4gVGhpcyB3aWxsIGJlIGNvbnNvbGlkYXRlZCBpbnRvIHRoZSBzdGFuZGFyZFxyXG4gICAgICAgICAqIGZvcm1hdCBvZiBvbmUgcmVjb3JkIHBlciB1c2VyIGFnZW50IHN0cmluZyBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIGhlYWRlci5cclxuICAgICAgICAgKiBQb3B1bGF0ZWQgZnJvbSBpbmRleGVkREIgd2hlbiB0aGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZFxyXG4gICAgICAgICAqIGJlIGtlcHQgaW4gc3luYyB3aXRoIGluZGV4ZWREQi5cclxuICAgICAgICAgKiBMZWF2ZSBwdWJsaWMgZm9yIGVhc2llciB0ZXN0aW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBuZXcgSGVhcnRiZWF0U3RvcmFnZUltcGwoYXBwKTtcclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlID0gdGhpcy5fc3RvcmFnZS5yZWFkKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB0byByZXBvcnQgYSBoZWFydGJlYXQuIFRoZSBmdW5jdGlvbiB3aWxsIGdlbmVyYXRlXHJcbiAgICAgKiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBvYmplY3QsIHVwZGF0ZSBoZWFydGJlYXRzQ2FjaGUsIGFuZCBwZXJzaXN0IGl0XHJcbiAgICAgKiB0byBJbmRleGVkREIuXHJcbiAgICAgKiBOb3RlIHRoYXQgd2Ugb25seSBzdG9yZSBvbmUgaGVhcnRiZWF0IHBlciBkYXkuIFNvIGlmIGEgaGVhcnRiZWF0IGZvciB0b2RheSBpc1xyXG4gICAgICogYWxyZWFkeSBsb2dnZWQsIHN1YnNlcXVlbnQgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbiBpbiB0aGUgc2FtZSBkYXkgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyB0cmlnZ2VySGVhcnRiZWF0KCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSBmYWlsZWQgdG8gY29uc3RydWN0IGEgaGVhcnRiZWF0cyBjYWNoZSwgdGhlbiByZXR1cm4gaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgICAgIGlmICgoKF9iID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvIG5vdCBzdG9yZSBhIGhlYXJ0YmVhdCBpZiBvbmUgaXMgYWxyZWFkeSBzdG9yZWQgZm9yIHRoaXMgZGF5XHJcbiAgICAgICAgLy8gb3IgaWYgYSBoZWFkZXIgaGFzIGFscmVhZHkgYmVlbiBzZW50IHRvZGF5LlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID09PSBkYXRlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnNvbWUoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiBzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUgPT09IGRhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIGRhdGUuIENyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnB1c2goeyBkYXRlLCBhZ2VudCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGVudHJpZXMgb2xkZXIgdGhhbiAzMCBkYXlzLlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuZmlsdGVyKHNpbmdsZURhdGVIZWFydGJlYXQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYlRpbWVzdGFtcCA9IG5ldyBEYXRlKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSkudmFsdWVPZigpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm93IC0gaGJUaW1lc3RhbXAgPD0gU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB3aGljaCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIGhlYXJ0YmVhdC1zcGVjaWZpYyBoZWFkZXIgZGlyZWN0bHkuXHJcbiAgICAgKiBJdCBhbHNvIGNsZWFycyBhbGwgaGVhcnRiZWF0cyBmcm9tIG1lbW9yeSBhcyB3ZWxsIGFzIGluIEluZGV4ZWREQi5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDb25zdW1pbmcgcHJvZHVjdCBTREtzIHNob3VsZCBub3Qgc2VuZCB0aGUgaGVhZGVyIGlmIHRoaXMgbWV0aG9kXHJcbiAgICAgKiByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oZWFydGJlYXRzKSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgLy8gRXh0cmFjdCBhcyBtYW55IGhlYXJ0YmVhdHMgZnJvbSB0aGUgY2FjaGUgYXMgd2lsbCBmaXQgdW5kZXIgdGhlIHNpemUgbGltaXQuXHJcbiAgICAgICAgY29uc3QgeyBoZWFydGJlYXRzVG9TZW5kLCB1bnNlbnRFbnRyaWVzIH0gPSBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcih0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyU3RyaW5nID0gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzVG9TZW5kIH0pKTtcclxuICAgICAgICAvLyBTdG9yZSBsYXN0IHNlbnQgZGF0ZSB0byBwcmV2ZW50IGFub3RoZXIgYmVpbmcgbG9nZ2VkL3NlbnQgZm9yIHRoZSBzYW1lIGRheS5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID0gZGF0ZTtcclxuICAgICAgICBpZiAodW5zZW50RW50cmllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGFueSB1bnNlbnQgZW50cmllcyBpZiB0aGV5IGV4aXN0LlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHVuc2VudEVudHJpZXM7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgbW9yZSBsaWtlbHkgdGhhbiBlbXB0eWluZyB0aGUgYXJyYXkgKGJlbG93KSB0byBsZWFkIHRvIHNvbWUgb2RkIHN0YXRlXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBjYWNoZSBpc24ndCBlbXB0eSBhbmQgdGhpcyB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBvbiB0aGUgbmV4dCByZXF1ZXN0LFxyXG4gICAgICAgICAgICAvLyBhbmQgaXMgcHJvYmFibHkgc2FmZXN0IGlmIHdlIGF3YWl0IGl0LlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHdhaXQgZm9yIHRoaXMsIHRvIHJlZHVjZSBsYXRlbmN5LlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJTdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0VVRDRGF0ZVN0cmluZygpIHtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIC8vIFJldHVybnMgZGF0ZSBmb3JtYXQgJ1lZWVktTU0tREQnXHJcbiAgICByZXR1cm4gdG9kYXkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKGhlYXJ0YmVhdHNDYWNoZSwgbWF4U2l6ZSA9IE1BWF9IRUFERVJfQllURVMpIHtcclxuICAgIC8vIEhlYXJ0YmVhdHMgZ3JvdXBlZCBieSB1c2VyIGFnZW50IGluIHRoZSBzdGFuZGFyZCBmb3JtYXQgdG8gYmUgc2VudCBpblxyXG4gICAgLy8gdGhlIGhlYWRlci5cclxuICAgIGNvbnN0IGhlYXJ0YmVhdHNUb1NlbmQgPSBbXTtcclxuICAgIC8vIFNpbmdsZSBkYXRlIGZvcm1hdCBoZWFydGJlYXRzIHRoYXQgYXJlIG5vdCBzZW50LlxyXG4gICAgbGV0IHVuc2VudEVudHJpZXMgPSBoZWFydGJlYXRzQ2FjaGUuc2xpY2UoKTtcclxuICAgIGZvciAoY29uc3Qgc2luZ2xlRGF0ZUhlYXJ0YmVhdCBvZiBoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgICAgICAvLyBMb29rIGZvciBhbiBleGlzdGluZyBlbnRyeSB3aXRoIHRoZSBzYW1lIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RW50cnkgPSBoZWFydGJlYXRzVG9TZW5kLmZpbmQoaGIgPT4gaGIuYWdlbnQgPT09IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQpO1xyXG4gICAgICAgIGlmICghaGVhcnRiZWF0RW50cnkpIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gZW50cnkgZm9yIHRoaXMgdXNlciBhZ2VudCBleGlzdHMsIGNyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBhZ2VudDogc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCxcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBoZWFydGJlYXRcclxuICAgICAgICAgICAgICAgIC8vIGVudHJ5IGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wdXNoKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGRhdGVcclxuICAgICAgICAgICAgLy8gYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3AgdW5zZW50IGVudHJ5IGZyb20gcXVldWUuIChTa2lwcGVkIGlmIGFkZGluZyB0aGUgZW50cnkgZXhjZWVkZWRcclxuICAgICAgICAvLyBxdW90YSBhbmQgdGhlIGxvb3AgYnJlYWtzIGVhcmx5LilcclxuICAgICAgICB1bnNlbnRFbnRyaWVzID0gdW5zZW50RW50cmllcy5zbGljZSgxKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhcnRiZWF0c1RvU2VuZCxcclxuICAgICAgICB1bnNlbnRFbnRyaWVzXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIEhlYXJ0YmVhdFN0b3JhZ2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2UgPSB0aGlzLnJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKSB7XHJcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVhZCBhbGwgaGVhcnRiZWF0cy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVhZCgpIHtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJIZWFydGJlYXRPYmplY3QgPSBhd2FpdCByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIodGhpcy5hcHApO1xyXG4gICAgICAgICAgICBpZiAoaWRiSGVhcnRiZWF0T2JqZWN0ID09PSBudWxsIHx8IGlkYkhlYXJ0YmVhdE9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRiSGVhcnRiZWF0T2JqZWN0LmhlYXJ0YmVhdHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiMTAuOC4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgeyBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuNi41XCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBFTkRJTkdfVElNRU9VVF9NUyA9IDEwMDAwO1xyXG5jb25zdCBQQUNLQUdFX1ZFUlNJT04gPSBgdzoke3ZlcnNpb259YDtcclxuY29uc3QgSU5URVJOQUxfQVVUSF9WRVJTSU9OID0gJ0ZJU192Mic7XHJcbmNvbnN0IElOU1RBTExBVElPTlNfQVBJX1VSTCA9ICdodHRwczovL2ZpcmViYXNlaW5zdGFsbGF0aW9ucy5nb29nbGVhcGlzLmNvbS92MSc7XHJcbmNvbnN0IFRPS0VOX0VYUElSQVRJT05fQlVGRkVSID0gNjAgKiA2MCAqIDEwMDA7IC8vIE9uZSBob3VyXHJcbmNvbnN0IFNFUlZJQ0UgPSAnaW5zdGFsbGF0aW9ucyc7XHJcbmNvbnN0IFNFUlZJQ0VfTkFNRSA9ICdJbnN0YWxsYXRpb25zJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JfREVTQ1JJUFRJT05fTUFQID0ge1xyXG4gICAgW1wibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIEVycm9yQ29kZS5NSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTICovXTogJ01pc3NpbmcgQXBwIGNvbmZpZ3VyYXRpb24gdmFsdWU6IFwieyR2YWx1ZU5hbWV9XCInLFxyXG4gICAgW1wibm90LXJlZ2lzdGVyZWRcIiAvKiBFcnJvckNvZGUuTk9UX1JFR0lTVEVSRUQgKi9dOiAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLicsXHJcbiAgICBbXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogRXJyb3JDb2RlLklOU1RBTExBVElPTl9OT1RfRk9VTkQgKi9dOiAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIG5vdCBmb3VuZC4nLFxyXG4gICAgW1wicmVxdWVzdC1mYWlsZWRcIiAvKiBFcnJvckNvZGUuUkVRVUVTVF9GQUlMRUQgKi9dOiAneyRyZXF1ZXN0TmFtZX0gcmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBcInskc2VydmVyQ29kZX0geyRzZXJ2ZXJTdGF0dXN9OiB7JHNlcnZlck1lc3NhZ2V9XCInLFxyXG4gICAgW1wiYXBwLW9mZmxpbmVcIiAvKiBFcnJvckNvZGUuQVBQX09GRkxJTkUgKi9dOiAnQ291bGQgbm90IHByb2Nlc3MgcmVxdWVzdC4gQXBwbGljYXRpb24gb2ZmbGluZS4nLFxyXG4gICAgW1wiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogRXJyb3JDb2RlLkRFTEVURV9QRU5ESU5HX1JFR0lTVFJBVElPTiAqL106IFwiQ2FuJ3QgZGVsZXRlIGluc3RhbGxhdGlvbiB3aGlsZSB0aGVyZSBpcyBhIHBlbmRpbmcgcmVnaXN0cmF0aW9uIHJlcXVlc3QuXCJcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoU0VSVklDRSwgU0VSVklDRV9OQU1FLCBFUlJPUl9ERVNDUklQVElPTl9NQVApO1xyXG4vKiogUmV0dXJucyB0cnVlIGlmIGVycm9yIGlzIGEgRmlyZWJhc2VFcnJvciB0aGF0IGlzIGJhc2VkIG9uIGFuIGVycm9yIGZyb20gdGhlIHNlcnZlci4gKi9cclxuZnVuY3Rpb24gaXNTZXJ2ZXJFcnJvcihlcnJvcikge1xyXG4gICAgcmV0dXJuIChlcnJvciBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgJiZcclxuICAgICAgICBlcnJvci5jb2RlLmluY2x1ZGVzKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBFcnJvckNvZGUuUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoeyBwcm9qZWN0SWQgfSkge1xyXG4gICAgcmV0dXJuIGAke0lOU1RBTExBVElPTlNfQVBJX1VSTH0vcHJvamVjdHMvJHtwcm9qZWN0SWR9L2luc3RhbGxhdGlvbnNgO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRva2VuOiByZXNwb25zZS50b2tlbixcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAyIC8qIFJlcXVlc3RTdGF0dXMuQ09NUExFVEVEICovLFxyXG4gICAgICAgIGV4cGlyZXNJbjogZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlLmV4cGlyZXNJbiksXHJcbiAgICAgICAgY3JlYXRpb25UaW1lOiBEYXRlLm5vdygpXHJcbiAgICB9O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldEVycm9yRnJvbVJlc3BvbnNlKHJlcXVlc3ROYW1lLCByZXNwb25zZSkge1xyXG4gICAgY29uc3QgcmVzcG9uc2VKc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgY29uc3QgZXJyb3JEYXRhID0gcmVzcG9uc2VKc29uLmVycm9yO1xyXG4gICAgcmV0dXJuIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBFcnJvckNvZGUuUkVRVUVTVF9GQUlMRUQgKi8sIHtcclxuICAgICAgICByZXF1ZXN0TmFtZSxcclxuICAgICAgICBzZXJ2ZXJDb2RlOiBlcnJvckRhdGEuY29kZSxcclxuICAgICAgICBzZXJ2ZXJNZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSxcclxuICAgICAgICBzZXJ2ZXJTdGF0dXM6IGVycm9yRGF0YS5zdGF0dXNcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnMoeyBhcGlLZXkgfSkge1xyXG4gICAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgeyByZWZyZXNoVG9rZW4gfSkge1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgZ2V0QXV0aG9yaXphdGlvbkhlYWRlcihyZWZyZXNoVG9rZW4pKTtcclxuICAgIHJldHVybiBoZWFkZXJzO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxscyB0aGUgcGFzc2VkIGluIGZldGNoIHdyYXBwZXIgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlLlxyXG4gKiBJZiB0aGUgcmV0dXJuZWQgcmVzcG9uc2UgaGFzIGEgc3RhdHVzIG9mIDV4eCwgcmUtcnVucyB0aGUgZnVuY3Rpb24gb25jZSBhbmRcclxuICogcmV0dXJucyB0aGUgcmVzcG9uc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXRyeUlmU2VydmVyRXJyb3IoZm4pIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XHJcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA+PSA1MDAgJiYgcmVzdWx0LnN0YXR1cyA8IDYwMCkge1xyXG4gICAgICAgIC8vIEludGVybmFsIFNlcnZlciBFcnJvci4gUmV0cnkgcmVxdWVzdC5cclxuICAgICAgICByZXR1cm4gZm4oKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlRXhwaXJlc0luKSB7XHJcbiAgICAvLyBUaGlzIHdvcmtzIGJlY2F1c2UgdGhlIHNlcnZlciB3aWxsIG5ldmVyIHJlc3BvbmQgd2l0aCBmcmFjdGlvbnMgb2YgYSBzZWNvbmQuXHJcbiAgICByZXR1cm4gTnVtYmVyKHJlc3BvbnNlRXhwaXJlc0luLnJlcGxhY2UoJ3MnLCAnMDAwJykpO1xyXG59XHJcbmZ1bmN0aW9uIGdldEF1dGhvcml6YXRpb25IZWFkZXIocmVmcmVzaFRva2VuKSB7XHJcbiAgICByZXR1cm4gYCR7SU5URVJOQUxfQVVUSF9WRVJTSU9OfSAke3JlZnJlc2hUb2tlbn1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCB7IGZpZCB9KSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBmaWQsXHJcbiAgICAgICAgYXV0aFZlcnNpb246IElOVEVSTkFMX0FVVEhfVkVSU0lPTixcclxuICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkLFxyXG4gICAgICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IHtcclxuICAgICAgICAgICAgZmlkOiByZXNwb25zZVZhbHVlLmZpZCB8fCBmaWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMiAvKiBSZXF1ZXN0U3RhdHVzLkNPTVBMRVRFRCAqLyxcclxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZVZhbHVlLnJlZnJlc2hUb2tlbixcclxuICAgICAgICAgICAgYXV0aFRva2VuOiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZVZhbHVlLmF1dGhUb2tlbilcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnQ3JlYXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBnaXZlbiB0aW1lIHBhc3Nlcy4gKi9cclxuZnVuY3Rpb24gc2xlZXAobXMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGJ1ZmZlclRvQmFzZTY0VXJsU2FmZShhcnJheSkge1xyXG4gICAgY29uc3QgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmFycmF5KSk7XHJcbiAgICByZXR1cm4gYjY0LnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFZBTElEX0ZJRF9QQVRURVJOID0gL15bY2RlZl1bXFx3LV17MjF9JC87XHJcbmNvbnN0IElOVkFMSURfRklEID0gJyc7XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgRklEIHVzaW5nIHJhbmRvbSB2YWx1ZXMgZnJvbSBXZWIgQ3J5cHRvIEFQSS5cclxuICogUmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgaWYgRklEIGdlbmVyYXRpb24gZmFpbHMgZm9yIGFueSByZWFzb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBnZW5lcmF0ZUZpZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQSB2YWxpZCBGSUQgaGFzIGV4YWN0bHkgMjIgYmFzZTY0IGNoYXJhY3RlcnMsIHdoaWNoIGlzIDEzMiBiaXRzLCBvciAxNi41XHJcbiAgICAgICAgLy8gYnl0ZXMuIG91ciBpbXBsZW1lbnRhdGlvbiBnZW5lcmF0ZXMgYSAxNyBieXRlIGFycmF5IGluc3RlYWQuXHJcbiAgICAgICAgY29uc3QgZmlkQnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMTcpO1xyXG4gICAgICAgIGNvbnN0IGNyeXB0byA9IHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG87XHJcbiAgICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhmaWRCeXRlQXJyYXkpO1xyXG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGZpcnN0IDQgcmFuZG9tIGJpdHMgd2l0aCB0aGUgY29uc3RhbnQgRklEIGhlYWRlciBvZiAwYjAxMTEuXHJcbiAgICAgICAgZmlkQnl0ZUFycmF5WzBdID0gMGIwMTExMDAwMCArIChmaWRCeXRlQXJyYXlbMF0gJSAwYjAwMDEwMDAwKTtcclxuICAgICAgICBjb25zdCBmaWQgPSBlbmNvZGUoZmlkQnl0ZUFycmF5KTtcclxuICAgICAgICByZXR1cm4gVkFMSURfRklEX1BBVFRFUk4udGVzdChmaWQpID8gZmlkIDogSU5WQUxJRF9GSUQ7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAvLyBGSUQgZ2VuZXJhdGlvbiBlcnJvcmVkXHJcbiAgICAgICAgcmV0dXJuIElOVkFMSURfRklEO1xyXG4gICAgfVxyXG59XHJcbi8qKiBDb252ZXJ0cyBhIEZJRCBVaW50OEFycmF5IHRvIGEgYmFzZTY0IHN0cmluZyByZXByZXNlbnRhdGlvbi4gKi9cclxuZnVuY3Rpb24gZW5jb2RlKGZpZEJ5dGVBcnJheSkge1xyXG4gICAgY29uc3QgYjY0U3RyaW5nID0gYnVmZmVyVG9CYXNlNjRVcmxTYWZlKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAvLyBSZW1vdmUgdGhlIDIzcmQgY2hhcmFjdGVyIHRoYXQgd2FzIGFkZGVkIGJlY2F1c2Ugb2YgdGhlIGV4dHJhIDQgYml0cyBhdCB0aGVcclxuICAgIC8vIGVuZCBvZiBvdXIgMTcgYnl0ZSBhcnJheSwgYW5kIHRoZSAnPScgcGFkZGluZy5cclxuICAgIHJldHVybiBiNjRTdHJpbmcuc3Vic3RyKDAsIDIyKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogUmV0dXJucyBhIHN0cmluZyBrZXkgdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSB0aGUgYXBwLiAqL1xyXG5mdW5jdGlvbiBnZXRLZXkoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gYCR7YXBwQ29uZmlnLmFwcE5hbWV9ISR7YXBwQ29uZmlnLmFwcElkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgZmlkQ2hhbmdlQ2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogQ2FsbHMgdGhlIG9uSWRDaGFuZ2UgY2FsbGJhY2tzIHdpdGggdGhlIG5ldyBGSUQgdmFsdWUsIGFuZCBicm9hZGNhc3RzIHRoZVxyXG4gKiBjaGFuZ2UgdG8gb3RoZXIgdGFicy5cclxuICovXHJcbmZ1bmN0aW9uIGZpZENoYW5nZWQoYXBwQ29uZmlnLCBmaWQpIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY2FsbEZpZENoYW5nZUNhbGxiYWNrcyhrZXksIGZpZCk7XHJcbiAgICBicm9hZGNhc3RGaWRDaGFuZ2Uoa2V5LCBmaWQpO1xyXG59XHJcbmZ1bmN0aW9uIGFkZENhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spIHtcclxuICAgIC8vIE9wZW4gdGhlIGJyb2FkY2FzdCBjaGFubmVsIGlmIGl0J3Mgbm90IGFscmVhZHkgb3BlbixcclxuICAgIC8vIHRvIGJlIGFibGUgdG8gbGlzdGVuIHRvIGNoYW5nZSBldmVudHMgZnJvbSBvdGhlciB0YWJzLlxyXG4gICAgZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBsZXQgY2FsbGJhY2tTZXQgPSBmaWRDaGFuZ2VDYWxsYmFja3MuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWNhbGxiYWNrU2V0KSB7XHJcbiAgICAgICAgY2FsbGJhY2tTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgZmlkQ2hhbmdlQ2FsbGJhY2tzLnNldChrZXksIGNhbGxiYWNrU2V0KTtcclxuICAgIH1cclxuICAgIGNhbGxiYWNrU2V0LmFkZChjYWxsYmFjayk7XHJcbn1cclxuZnVuY3Rpb24gcmVtb3ZlQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjaykge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBjYWxsYmFja1NldCA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcclxuICAgIGlmICghY2FsbGJhY2tTZXQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjYWxsYmFja1NldC5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgaWYgKGNhbGxiYWNrU2V0LnNpemUgPT09IDApIHtcclxuICAgICAgICBmaWRDaGFuZ2VDYWxsYmFja3MuZGVsZXRlKGtleSk7XHJcbiAgICB9XHJcbiAgICAvLyBDbG9zZSBicm9hZGNhc3QgY2hhbm5lbCBpZiB0aGVyZSBhcmUgbm8gbW9yZSBjYWxsYmFja3MuXHJcbiAgICBjbG9zZUJyb2FkY2FzdENoYW5uZWwoKTtcclxufVxyXG5mdW5jdGlvbiBjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzKGtleSwgZmlkKSB7XHJcbiAgICBjb25zdCBjYWxsYmFja3MgPSBmaWRDaGFuZ2VDYWxsYmFja3MuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZmlkKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBicm9hZGNhc3RGaWRDaGFuZ2Uoa2V5LCBmaWQpIHtcclxuICAgIGNvbnN0IGNoYW5uZWwgPSBnZXRCcm9hZGNhc3RDaGFubmVsKCk7XHJcbiAgICBpZiAoY2hhbm5lbCkge1xyXG4gICAgICAgIGNoYW5uZWwucG9zdE1lc3NhZ2UoeyBrZXksIGZpZCB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG59XHJcbmxldCBicm9hZGNhc3RDaGFubmVsID0gbnVsbDtcclxuLyoqIE9wZW5zIGFuZCByZXR1cm5zIGEgQnJvYWRjYXN0Q2hhbm5lbCBpZiBpdCBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuICovXHJcbmZ1bmN0aW9uIGdldEJyb2FkY2FzdENoYW5uZWwoKSB7XHJcbiAgICBpZiAoIWJyb2FkY2FzdENoYW5uZWwgJiYgJ0Jyb2FkY2FzdENoYW5uZWwnIGluIHNlbGYpIHtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoJ1tGaXJlYmFzZV0gRklEIENoYW5nZScpO1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwub25tZXNzYWdlID0gZSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3MoZS5kYXRhLmtleSwgZS5kYXRhLmZpZCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBicm9hZGNhc3RDaGFubmVsO1xyXG59XHJcbmZ1bmN0aW9uIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpIHtcclxuICAgIGlmIChmaWRDaGFuZ2VDYWxsYmFja3Muc2l6ZSA9PT0gMCAmJiBicm9hZGNhc3RDaGFubmVsKSB7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbC5jbG9zZSgpO1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwgPSBudWxsO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERBVEFCQVNFX05BTUUgPSAnZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1kYXRhYmFzZSc7XHJcbmNvbnN0IERBVEFCQVNFX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBPQkpFQ1RfU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERBVEFCQVNFX05BTUUsIERBVEFCQVNFX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuLyoqIEFzc2lnbnMgb3Igb3ZlcndyaXRlcyB0aGUgcmVjb3JkIGZvciB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlIGdpdmVuIHZhbHVlLiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXQoYXBwQ29uZmlnLCB2YWx1ZSkge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICBjb25zdCBvbGRWYWx1ZSA9IChhd2FpdCBvYmplY3RTdG9yZS5nZXQoa2V5KSk7XHJcbiAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQodmFsdWUsIGtleSk7XHJcbiAgICBhd2FpdCB0eC5kb25lO1xyXG4gICAgaWYgKCFvbGRWYWx1ZSB8fCBvbGRWYWx1ZS5maWQgIT09IHZhbHVlLmZpZCkge1xyXG4gICAgICAgIGZpZENoYW5nZWQoYXBwQ29uZmlnLCB2YWx1ZS5maWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbi8qKiBSZW1vdmVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZShhcHBDb25maWcpIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgIGF3YWl0IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKS5kZWxldGUoa2V5KTtcclxuICAgIGF3YWl0IHR4LmRvbmU7XHJcbn1cclxuLyoqXHJcbiAqIEF0b21pY2FsbHkgdXBkYXRlcyBhIHJlY29yZCB3aXRoIHRoZSByZXN1bHQgb2YgdXBkYXRlRm4sIHdoaWNoIGdldHNcclxuICogY2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgdmFsdWUuIElmIG5ld1ZhbHVlIGlzIHVuZGVmaW5lZCwgdGhlIHJlY29yZCBpc1xyXG4gKiBkZWxldGVkIGluc3RlYWQuXHJcbiAqIEByZXR1cm4gVXBkYXRlZCB2YWx1ZVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlKGFwcENvbmZpZywgdXBkYXRlRm4pIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgIGNvbnN0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSAoYXdhaXQgc3RvcmUuZ2V0KGtleSkpO1xyXG4gICAgY29uc3QgbmV3VmFsdWUgPSB1cGRhdGVGbihvbGRWYWx1ZSk7XHJcbiAgICBpZiAobmV3VmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGF3YWl0IHN0b3JlLmRlbGV0ZShrZXkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYXdhaXQgc3RvcmUucHV0KG5ld1ZhbHVlLCBrZXkpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdHguZG9uZTtcclxuICAgIGlmIChuZXdWYWx1ZSAmJiAoIW9sZFZhbHVlIHx8IG9sZFZhbHVlLmZpZCAhPT0gbmV3VmFsdWUuZmlkKSkge1xyXG4gICAgICAgIGZpZENoYW5nZWQoYXBwQ29uZmlnLCBuZXdWYWx1ZS5maWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVcGRhdGVzIGFuZCByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBmcm9tIHRoZSBkYXRhYmFzZS5cclxuICogQWxzbyB0cmlnZ2VycyBhIHJlZ2lzdHJhdGlvbiByZXF1ZXN0IGlmIGl0IGlzIG5lY2Vzc2FyeSBhbmQgcG9zc2libGUuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKSB7XHJcbiAgICBsZXQgcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbkVudHJ5ID0gYXdhaXQgdXBkYXRlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5zdGFsbGF0aW9uRW50cnkgPSB1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5KG9sZEVudHJ5KTtcclxuICAgICAgICBjb25zdCBlbnRyeVdpdGhQcm9taXNlID0gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlID0gZW50cnlXaXRoUHJvbWlzZS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIHJldHVybiBlbnRyeVdpdGhQcm9taXNlLmluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgfSk7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkuZmlkID09PSBJTlZBTElEX0ZJRCkge1xyXG4gICAgICAgIC8vIEZJRCBnZW5lcmF0aW9uIGZhaWxlZC4gV2FpdGluZyBmb3IgdGhlIEZJRCBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICAgICAgcmV0dXJuIHsgaW5zdGFsbGF0aW9uRW50cnk6IGF3YWl0IHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZVxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBJbnN0YWxsYXRpb24gRW50cnkgaWYgb25lIGRvZXMgbm90IGV4aXN0LlxyXG4gKiBBbHNvIGNsZWFycyB0aW1lZCBvdXQgcGVuZGluZyByZXF1ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkob2xkRW50cnkpIHtcclxuICAgIGNvbnN0IGVudHJ5ID0gb2xkRW50cnkgfHwge1xyXG4gICAgICAgIGZpZDogZ2VuZXJhdGVGaWQoKSxcclxuICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqL1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSk7XHJcbn1cclxuLyoqXHJcbiAqIElmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQgeWV0LCB0aGlzIHdpbGwgdHJpZ2dlciB0aGVcclxuICogcmVnaXN0cmF0aW9uIGFuZCByZXR1cm4gYW4gSW5Qcm9ncmVzc0luc3RhbGxhdGlvbkVudHJ5LlxyXG4gKlxyXG4gKiBJZiByZWdpc3RyYXRpb25Qcm9taXNlIGRvZXMgbm90IGV4aXN0LCB0aGUgaW5zdGFsbGF0aW9uRW50cnkgaXMgZ3VhcmFudGVlZFxyXG4gKiB0byBiZSByZWdpc3RlcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHJlcXVpcmVkIGJ1dCBhcHAgaXMgb2ZmbGluZS5cclxuICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvciA9IFByb21pc2UucmVqZWN0KEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBFcnJvckNvZGUuQVBQX09GRkxJTkUgKi8pKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUcnkgcmVnaXN0ZXJpbmcuIENoYW5nZSBzdGF0dXMgdG8gSU5fUFJPR1JFU1MuXHJcbiAgICAgICAgY29uc3QgaW5Qcm9ncmVzc0VudHJ5ID0ge1xyXG4gICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAxIC8qIFJlcXVlc3RTdGF0dXMuSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvblByb21pc2UgPSByZWdpc3Rlckluc3RhbGxhdGlvbihpbnN0YWxsYXRpb25zLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpblByb2dyZXNzRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTICovKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeSB9O1xyXG4gICAgfVxyXG59XHJcbi8qKiBUaGlzIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBvbmNlIGZvciBlYWNoIG5ldyBGaXJlYmFzZSBJbnN0YWxsYXRpb24uICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFsbGF0aW9uKGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IGF3YWl0IGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJldHVybiBzZXQoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc1NlcnZlckVycm9yKGUpICYmIGUuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDkpIHtcclxuICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgY2FuIG5vdCBiZSB1c2VkXCIgZXJyb3IuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiBmYWlsZWQuIFNldCBGSUQgYXMgbm90IHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgIGF3YWl0IHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywge1xyXG4gICAgICAgICAgICAgICAgZmlkOiBpbnN0YWxsYXRpb25FbnRyeS5maWQsXHJcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG4vKiogQ2FsbCBpZiBGSUQgcmVnaXN0cmF0aW9uIGlzIHBlbmRpbmcgaW4gYW5vdGhlciByZXF1ZXN0LiAqL1xyXG5hc3luYyBmdW5jdGlvbiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUgaXMgbm8gd2F5IG9mIHJlbGlhYmx5IG9ic2VydmluZyB3aGVuIGEgdmFsdWUgaW5cclxuICAgIC8vIEluZGV4ZWREQiBjaGFuZ2VzICh5ZXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9pbmRleGVkLWRiLW9ic2VydmVycyksXHJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHBvbGwuXHJcbiAgICBsZXQgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIHdoaWxlIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciBmYWlsZWQgaW4gYSBkaWZmZXJlbnQgY2FsbC4gVHJ5IGFnYWluLlxyXG4gICAgICAgIGNvbnN0IHsgaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfSA9IGF3YWl0IGdldEluc3RhbGxhdGlvbkVudHJ5KGluc3RhbGxhdGlvbnMpO1xyXG4gICAgICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gcmVnaXN0cmF0aW9uUHJvbWlzZSwgZW50cnkgaXMgcmVnaXN0ZXJlZC5cclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBlbnRyeTtcclxufVxyXG4vKipcclxuICogQ2FsbGVkIG9ubHkgaWYgdGhlcmUgaXMgYSBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIENyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpIHtcclxuICAgIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKCFvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImluc3RhbGxhdGlvbi1ub3QtZm91bmRcIiAvKiBFcnJvckNvZGUuSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChvbGRFbnRyeSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSkge1xyXG4gICAgaWYgKGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChlbnRyeSkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWQ6IGVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgKi9cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG59XHJcbmZ1bmN0aW9uIGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLyAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBpbnN0YWxsYXRpb246IHtcclxuICAgICAgICAgICAgc2RrVmVyc2lvbjogUEFDS0FHRV9WRVJTSU9OLFxyXG4gICAgICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZEF1dGhUb2tlbiA9IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUpO1xyXG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRBdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnR2VuZXJhdGUgQXV0aCBUb2tlbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgeyBmaWQgfSkge1xyXG4gICAgcmV0dXJuIGAke2dldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpfS8ke2ZpZH0vYXV0aFRva2VuczpnZW5lcmF0ZWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbiBmb3IgdGhlIGluc3RhbGxhdGlvbi4gR2VuZXJhdGVzIGEgbmV3XHJcbiAqIHRva2VuIGlmIG9uZSBkb2Vzbid0IGV4aXN0LCBpcyBleHBpcmVkIG9yIGFib3V0IHRvIGV4cGlyZS5cclxuICpcclxuICogU2hvdWxkIG9ubHkgYmUgY2FsbGVkIGlmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgcmVnaXN0ZXJlZC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGxldCB0b2tlblByb21pc2U7XHJcbiAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHVwZGF0ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgb2xkRW50cnkgPT4ge1xyXG4gICAgICAgIGlmICghaXNFbnRyeVJlZ2lzdGVyZWQob2xkRW50cnkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIiAvKiBFcnJvckNvZGUuTk9UX1JFR0lTVEVSRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgaXNBdXRoVG9rZW5WYWxpZChvbGRBdXRoVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIGEgdmFsaWQgdG9rZW4gaW4gdGhlIERCLlxyXG4gICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9sZEF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIFJlcXVlc3RTdGF0dXMuSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgYWxyZWFkeSBpcyBhIHRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTm8gdG9rZW4gb3IgdG9rZW4gZXhwaXJlZC5cclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogRXJyb3JDb2RlLkFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBpblByb2dyZXNzRW50cnkgPSBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShvbGRFbnRyeSk7XHJcbiAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IGZldGNoQXV0aFRva2VuRnJvbVNlcnZlcihpbnN0YWxsYXRpb25zLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5Qcm9ncmVzc0VudHJ5O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgYXV0aFRva2VuID0gdG9rZW5Qcm9taXNlXHJcbiAgICAgICAgPyBhd2FpdCB0b2tlblByb21pc2VcclxuICAgICAgICA6IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgIHJldHVybiBhdXRoVG9rZW47XHJcbn1cclxuLyoqXHJcbiAqIENhbGwgb25seSBpZiBGSUQgaXMgcmVnaXN0ZXJlZCBhbmQgQXV0aCBUb2tlbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLlxyXG4gKlxyXG4gKiBXYWl0cyB1bnRpbCB0aGUgY3VycmVudCBwZW5kaW5nIHJlcXVlc3QgZmluaXNoZXMuIElmIHRoZSByZXF1ZXN0IHRpbWVzIG91dCxcclxuICogdHJpZXMgb25jZSBpbiB0aGlzIHRocmVhZCBhcyB3ZWxsLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gd2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpIHtcclxuICAgIC8vIFVuZm9ydHVuYXRlbHksIHRoZXJlIGlzIG5vIHdheSBvZiByZWxpYWJseSBvYnNlcnZpbmcgd2hlbiBhIHZhbHVlIGluXHJcbiAgICAvLyBJbmRleGVkREIgY2hhbmdlcyAoeWV0LCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvaW5kZXhlZC1kYi1vYnNlcnZlcnMpLFxyXG4gICAgLy8gc28gd2UgbmVlZCB0byBwb2xsLlxyXG4gICAgbGV0IGVudHJ5ID0gYXdhaXQgdXBkYXRlQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XHJcbiAgICB3aGlsZSAoZW50cnkuYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGdlbmVyYXRlQXV0aFRva2VuIHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhUb2tlbiA9IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgIGlmIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMCAvKiBSZXF1ZXN0U3RhdHVzLk5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgLy8gVGhlIHJlcXVlc3QgdGltZWQgb3V0IG9yIGZhaWxlZCBpbiBhIGRpZmZlcmVudCBjYWxsLiBUcnkgYWdhaW4uXHJcbiAgICAgICAgcmV0dXJuIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgR2VuZXJhdGVBdXRoVG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBpZiAoIWlzRW50cnlSZWdpc3RlcmVkKG9sZEVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIgLyogRXJyb3JDb2RlLk5PVF9SRUdJU1RFUkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgIGlmIChoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IDAgLyogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICBjb25zdCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc3RhbGxhdGlvbkVudHJ5KSwgeyBhdXRoVG9rZW4gfSk7XHJcbiAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc1NlcnZlckVycm9yKGUpICYmXHJcbiAgICAgICAgICAgIChlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDAxIHx8IGUuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDQpKSB7XHJcbiAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIG5vdCBmb3VuZFwiIG9yIGEgXCJJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXCIgZXJyb3IuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFsbGF0aW9uRW50cnkpLCB7IGF1dGhUb2tlbjogeyByZXF1ZXN0U3RhdHVzOiAwIC8qIFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgKi8gfSB9KTtcclxuICAgICAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW50cnlSZWdpc3RlcmVkKGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogUmVxdWVzdFN0YXR1cy5DT01QTEVURUQgKi8pO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXV0aFRva2VuVmFsaWQoYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAyIC8qIFJlcXVlc3RTdGF0dXMuQ09NUExFVEVEICovICYmXHJcbiAgICAgICAgIWlzQXV0aFRva2VuRXhwaXJlZChhdXRoVG9rZW4pKTtcclxufVxyXG5mdW5jdGlvbiBpc0F1dGhUb2tlbkV4cGlyZWQoYXV0aFRva2VuKSB7XHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIChub3cgPCBhdXRoVG9rZW4uY3JlYXRpb25UaW1lIHx8XHJcbiAgICAgICAgYXV0aFRva2VuLmNyZWF0aW9uVGltZSArIGF1dGhUb2tlbi5leHBpcmVzSW4gPCBub3cgKyBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUik7XHJcbn1cclxuLyoqIFJldHVybnMgYW4gdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeSB3aXRoIGFuIEluUHJvZ3Jlc3NBdXRoVG9rZW4uICovXHJcbmZ1bmN0aW9uIG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICBjb25zdCBpblByb2dyZXNzQXV0aFRva2VuID0ge1xyXG4gICAgICAgIHJlcXVlc3RTdGF0dXM6IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLyxcclxuICAgICAgICByZXF1ZXN0VGltZTogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9sZEVudHJ5KSwgeyBhdXRoVG9rZW46IGluUHJvZ3Jlc3NBdXRoVG9rZW4gfSk7XHJcbn1cclxuZnVuY3Rpb24gaGFzQXV0aFRva2VuUmVxdWVzdFRpbWVkT3V0KGF1dGhUb2tlbikge1xyXG4gICAgcmV0dXJuIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTICovICYmXHJcbiAgICAgICAgYXV0aFRva2VuLnJlcXVlc3RUaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaWYgdGhlcmUgaXNuJ3Qgb25lIGZvciB0aGUgYXBwIGFuZFxyXG4gKiByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb24gSUQuXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SWQoaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgeyBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZSB9ID0gYXdhaXQgZ2V0SW5zdGFsbGF0aW9uRW50cnkoaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGluc3RhbGxhdGlvbiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHVwZGF0ZSB0aGUgYXV0aGVudGljYXRpb25cclxuICAgICAgICAvLyB0b2tlbiBpZiBuZWVkZWQuXHJcbiAgICAgICAgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCkuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uRW50cnkuZmlkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgRmlyZWJhc2UgSW5zdGFsbGF0aW9ucyBhdXRoIHRva2VuLCBpZGVudGlmeWluZyB0aGUgY3VycmVudFxyXG4gKiBGaXJlYmFzZSBJbnN0YWxsYXRpb24uXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYXdhaXQgY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBlaXRoZXIgaGF2ZSBhIFJlZ2lzdGVyZWQgSW5zdGFsbGF0aW9uIGluIHRoZSBEQiwgb3Igd2UndmVcclxuICAgIC8vIGFscmVhZHkgdGhyb3duIGFuIGVycm9yLlxyXG4gICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCwgZm9yY2VSZWZyZXNoKTtcclxuICAgIHJldHVybiBhdXRoVG9rZW4udG9rZW47XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgeyByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKTtcclxuICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgLy8gQSBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy4gV2FpdCB1bnRpbCBpdCBmaW5pc2hlcy5cclxuICAgICAgICBhd2FpdCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgaGVhZGVyc1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgdGhyb3cgYXdhaXQgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0RlbGV0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0RGVsZXRlRW5kcG9pbnQoYXBwQ29uZmlnLCB7IGZpZCB9KSB7XHJcbiAgICByZXR1cm4gYCR7Z2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyl9LyR7ZmlkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlbGV0ZXMgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBhbmQgYWxsIGFzc29jaWF0ZWQgZGF0YS5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVJbnN0YWxsYXRpb25zKGluc3RhbGxhdGlvbnMpIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgZW50cnkgPSBhd2FpdCB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKG9sZEVudHJ5ICYmIG9sZEVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBSZXF1ZXN0U3RhdHVzLk5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdW5yZWdpc3RlcmVkIGVudHJ5IHdpdGhvdXQgc2VuZGluZyBhIGRlbGV0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgICAgICAvLyBDYW4ndCBkZWxldGUgd2hpbGUgdHJ5aW5nIHRvIHJlZ2lzdGVyLlxyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImRlbGV0ZS1wZW5kaW5nLXJlZ2lzdHJhdGlvblwiIC8qIEVycm9yQ29kZS5ERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogUmVxdWVzdFN0YXR1cy5DT01QTEVURUQgKi8pIHtcclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogRXJyb3JDb2RlLkFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBlbnRyeSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZW1vdmUoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2V0cyBhIG5ldyBjYWxsYmFjayB0aGF0IHdpbGwgZ2V0IGNhbGxlZCB3aGVuIEluc3RhbGxhdGlvbiBJRCBjaGFuZ2VzLlxyXG4gKiBSZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgdGhlIGNhbGxiYWNrIHdoZW4gY2FsbGVkLlxyXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyAtIFRoZSBgSW5zdGFsbGF0aW9uc2AgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGludm9rZWQgd2hlbiBGSUQgY2hhbmdlcy5cclxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uSWRDaGFuZ2UoaW5zdGFsbGF0aW9ucywgY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYWRkQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjayk7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIHJlbW92ZUNhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spO1xyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgSW5zdGFsbGF0aW9uc30gYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlblxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW1wbCA9IF9nZXRQcm92aWRlcihhcHAsICdpbnN0YWxsYXRpb25zJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uc0ltcGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdEFwcENvbmZpZyhhcHApIHtcclxuICAgIGlmICghYXBwIHx8ICFhcHAub3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgQ29uZmlndXJhdGlvbicpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHAubmFtZSkge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgTmFtZScpO1xyXG4gICAgfVxyXG4gICAgLy8gUmVxdWlyZWQgYXBwIGNvbmZpZyBrZXlzXHJcbiAgICBjb25zdCBjb25maWdLZXlzID0gW1xyXG4gICAgICAgICdwcm9qZWN0SWQnLFxyXG4gICAgICAgICdhcGlLZXknLFxyXG4gICAgICAgICdhcHBJZCdcclxuICAgIF07XHJcbiAgICBmb3IgKGNvbnN0IGtleU5hbWUgb2YgY29uZmlnS2V5cykge1xyXG4gICAgICAgIGlmICghYXBwLm9wdGlvbnNba2V5TmFtZV0pIHtcclxuICAgICAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3Ioa2V5TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhcHBOYW1lOiBhcHAubmFtZSxcclxuICAgICAgICBwcm9qZWN0SWQ6IGFwcC5vcHRpb25zLnByb2plY3RJZCxcclxuICAgICAgICBhcGlLZXk6IGFwcC5vcHRpb25zLmFwaUtleSxcclxuICAgICAgICBhcHBJZDogYXBwLm9wdGlvbnMuYXBwSWRcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0TWlzc2luZ1ZhbHVlRXJyb3IodmFsdWVOYW1lKSB7XHJcbiAgICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogRXJyb3JDb2RlLk1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi8sIHtcclxuICAgICAgICB2YWx1ZU5hbWVcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElOU1RBTExBVElPTlNfTkFNRSA9ICdpbnN0YWxsYXRpb25zJztcclxuY29uc3QgSU5TVEFMTEFUSU9OU19OQU1FX0lOVEVSTkFMID0gJ2luc3RhbGxhdGlvbnMtaW50ZXJuYWwnO1xyXG5jb25zdCBwdWJsaWNGYWN0b3J5ID0gKGNvbnRhaW5lcikgPT4ge1xyXG4gICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgIC8vIFRocm93cyBpZiBhcHAgaXNuJ3QgY29uZmlndXJlZCBwcm9wZXJseS5cclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGV4dHJhY3RBcHBDb25maWcoYXBwKTtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdoZWFydGJlYXQnKTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbnNJbXBsID0ge1xyXG4gICAgICAgIGFwcCxcclxuICAgICAgICBhcHBDb25maWcsXHJcbiAgICAgICAgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLFxyXG4gICAgICAgIF9kZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbXBsO1xyXG59O1xyXG5jb25zdCBpbnRlcm5hbEZhY3RvcnkgPSAoY29udGFpbmVyKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgLy8gSW50ZXJuYWwgRklTIGluc3RhbmNlIHJlbGllcyBvbiBwdWJsaWMgRklTIGluc3RhbmNlLlxyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9ucyA9IF9nZXRQcm92aWRlcihhcHAsIElOU1RBTExBVElPTlNfTkFNRSkuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW50ZXJuYWwgPSB7XHJcbiAgICAgICAgZ2V0SWQ6ICgpID0+IGdldElkKGluc3RhbGxhdGlvbnMpLFxyXG4gICAgICAgIGdldFRva2VuOiAoZm9yY2VSZWZyZXNoKSA9PiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbnRlcm5hbDtcclxufTtcclxuZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb25zKCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoSU5TVEFMTEFUSU9OU19OQU1FLCBwdWJsaWNGYWN0b3J5LCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChJTlNUQUxMQVRJT05TX05BTUVfSU5URVJOQUwsIGludGVybmFsRmFjdG9yeSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbn1cblxuLyoqXHJcbiAqIFRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb25zIFdlYiBTREsuXHJcbiAqIFRoaXMgU0RLIGRvZXMgbm90IHdvcmsgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxyXG4gKlxyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVySW5zdGFsbGF0aW9ucygpO1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbi8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnZXNtMjAxNycpO1xuXG5leHBvcnQgeyBkZWxldGVJbnN0YWxsYXRpb25zLCBnZXRJZCwgZ2V0SW5zdGFsbGF0aW9ucywgZ2V0VG9rZW4sIG9uSWRDaGFuZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBGaXJlYmFzZUVycm9yLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgaXNCcm93c2VyRXh0ZW5zaW9uLCBhcmVDb29raWVzRW5hYmxlZCwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCAnQGZpcmViYXNlL2luc3RhbGxhdGlvbnMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVHlwZSBjb25zdGFudCBmb3IgRmlyZWJhc2UgQW5hbHl0aWNzLlxyXG4gKi9cclxuY29uc3QgQU5BTFlUSUNTX1RZUEUgPSAnYW5hbHl0aWNzJztcclxuLy8gS2V5IHRvIGF0dGFjaCBGSUQgdG8gaW4gZ3RhZyBwYXJhbXMuXHJcbmNvbnN0IEdBX0ZJRF9LRVkgPSAnZmlyZWJhc2VfaWQnO1xyXG5jb25zdCBPUklHSU5fS0VZID0gJ29yaWdpbic7XHJcbmNvbnN0IEZFVENIX1RJTUVPVVRfTUlMTElTID0gNjAgKiAxMDAwO1xyXG5jb25zdCBEWU5BTUlDX0NPTkZJR19VUkwgPSAnaHR0cHM6Ly9maXJlYmFzZS5nb29nbGVhcGlzLmNvbS92MWFscGhhL3Byb2plY3RzLy0vYXBwcy97YXBwLWlkfS93ZWJDb25maWcnO1xyXG5jb25zdCBHVEFHX1VSTCA9ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FuYWx5dGljcycpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJhbHJlYWR5LWV4aXN0c1wiIC8qIEFuYWx5dGljc0Vycm9yLkFMUkVBRFlfRVhJU1RTICovXTogJ0EgRmlyZWJhc2UgQW5hbHl0aWNzIGluc3RhbmNlIHdpdGggdGhlIGFwcElkIHskaWR9ICcgK1xyXG4gICAgICAgICcgYWxyZWFkeSBleGlzdHMuICcgK1xyXG4gICAgICAgICdPbmx5IG9uZSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2UgY2FuIGJlIGNyZWF0ZWQgZm9yIGVhY2ggYXBwSWQuJyxcclxuICAgIFtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBbmFseXRpY3NFcnJvci5BTFJFQURZX0lOSVRJQUxJWkVEICovXTogJ2luaXRpYWxpemVBbmFseXRpY3MoKSBjYW5ub3QgYmUgY2FsbGVkIGFnYWluIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgdGhhbiB0aG9zZSAnICtcclxuICAgICAgICAnaXQgd2FzIGluaXRpYWxseSBjYWxsZWQgd2l0aC4gSXQgY2FuIGJlIGNhbGxlZCBhZ2FpbiB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgdG8gJyArXHJcbiAgICAgICAgJ3JldHVybiB0aGUgZXhpc3RpbmcgaW5zdGFuY2UsIG9yIGdldEFuYWx5dGljcygpIGNhbiBiZSB1c2VkICcgK1xyXG4gICAgICAgICd0byBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGFscmVhZHktaW50aWFsaXplZCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiYWxyZWFkeS1pbml0aWFsaXplZC1zZXR0aW5nc1wiIC8qIEFuYWx5dGljc0Vycm9yLkFMUkVBRFlfSU5JVElBTElaRURfU0VUVElOR1MgKi9dOiAnRmlyZWJhc2UgQW5hbHl0aWNzIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuJyArXHJcbiAgICAgICAgJ3NldHRpbmdzKCkgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemluZyBhbnkgQW5hbHl0aWNzIGluc3RhbmNlJyArXHJcbiAgICAgICAgJ29yIGl0IHdpbGwgaGF2ZSBubyBlZmZlY3QuJyxcclxuICAgIFtcImludGVyb3AtY29tcG9uZW50LXJlZy1mYWlsZWRcIiAvKiBBbmFseXRpY3NFcnJvci5JTlRFUk9QX0NPTVBPTkVOVF9SRUdfRkFJTEVEICovXTogJ0ZpcmViYXNlIEFuYWx5dGljcyBJbnRlcm9wIENvbXBvbmVudCBmYWlsZWQgdG8gaW5zdGFudGlhdGU6IHskcmVhc29ufScsXHJcbiAgICBbXCJpbnZhbGlkLWFuYWx5dGljcy1jb250ZXh0XCIgLyogQW5hbHl0aWNzRXJyb3IuSU5WQUxJRF9BTkFMWVRJQ1NfQ09OVEVYVCAqL106ICdGaXJlYmFzZSBBbmFseXRpY3MgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiAnICtcclxuICAgICAgICAnV3JhcCBpbml0aWFsaXphdGlvbiBvZiBhbmFseXRpY3MgaW4gYW5hbHl0aWNzLmlzU3VwcG9ydGVkKCkgJyArXHJcbiAgICAgICAgJ3RvIHByZXZlbnQgaW5pdGlhbGl6YXRpb24gaW4gdW5zdXBwb3J0ZWQgZW52aXJvbm1lbnRzLiBEZXRhaWxzOiB7JGVycm9ySW5mb30nLFxyXG4gICAgW1wiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogQW5hbHl0aWNzRXJyb3IuSU5ERVhFRERCX1VOQVZBSUxBQkxFICovXTogJ0luZGV4ZWREQiB1bmF2YWlsYWJsZSBvciByZXN0cmljdGVkIGluIHRoaXMgZW52aXJvbm1lbnQuICcgK1xyXG4gICAgICAgICdXcmFwIGluaXRpYWxpemF0aW9uIG9mIGFuYWx5dGljcyBpbiBhbmFseXRpY3MuaXNTdXBwb3J0ZWQoKSAnICtcclxuICAgICAgICAndG8gcHJldmVudCBpbml0aWFsaXphdGlvbiBpbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudHMuIERldGFpbHM6IHskZXJyb3JJbmZvfScsXHJcbiAgICBbXCJmZXRjaC10aHJvdHRsZVwiIC8qIEFuYWx5dGljc0Vycm9yLkZFVENIX1RIUk9UVExFICovXTogJ1RoZSBjb25maWcgZmV0Y2ggcmVxdWVzdCB0aW1lZCBvdXQgd2hpbGUgaW4gYW4gZXhwb25lbnRpYWwgYmFja29mZiBzdGF0ZS4nICtcclxuICAgICAgICAnIFVuaXggdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kcyB3aGVuIGZldGNoIHJlcXVlc3QgdGhyb3R0bGluZyBlbmRzOiB7JHRocm90dGxlRW5kVGltZU1pbGxpc30uJyxcclxuICAgIFtcImNvbmZpZy1mZXRjaC1mYWlsZWRcIiAvKiBBbmFseXRpY3NFcnJvci5DT05GSUdfRkVUQ0hfRkFJTEVEICovXTogJ0R5bmFtaWMgY29uZmlnIGZldGNoIGZhaWxlZDogW3skaHR0cFN0YXR1c31dIHskcmVzcG9uc2VNZXNzYWdlfScsXHJcbiAgICBbXCJuby1hcGkta2V5XCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBJX0tFWSAqL106ICdUaGUgXCJhcGlLZXlcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBGaXJlYmFzZSBBbmFseXRpY3MgcmVxdWlyZXMgdGhpcyBmaWVsZCB0bycgK1xyXG4gICAgICAgICdjb250YWluIGEgdmFsaWQgQVBJIGtleS4nLFxyXG4gICAgW1wibm8tYXBwLWlkXCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBQX0lEICovXTogJ1RoZSBcImFwcElkXCIgZmllbGQgaXMgZW1wdHkgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gRmlyZWJhc2UgQW5hbHl0aWNzIHJlcXVpcmVzIHRoaXMgZmllbGQgdG8nICtcclxuICAgICAgICAnY29udGFpbiBhIHZhbGlkIGFwcCBJRC4nLFxyXG4gICAgW1wibm8tY2xpZW50LWlkXCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQ0xJRU5UX0lEICovXTogJ1RoZSBcImNsaWVudF9pZFwiIGZpZWxkIGlzIGVtcHR5LicsXHJcbiAgICBbXCJpbnZhbGlkLWd0YWctcmVzb3VyY2VcIiAvKiBBbmFseXRpY3NFcnJvci5JTlZBTElEX0dUQUdfUkVTT1VSQ0UgKi9dOiAnVHJ1c3RlZCBUeXBlcyBkZXRlY3RlZCBhbiBpbnZhbGlkIGd0YWcgcmVzb3VyY2U6IHskZ3RhZ1VSTH0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYW5hbHl0aWNzJywgJ0FuYWx5dGljcycsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBWZXJpZmllcyBhbmQgY3JlYXRlcyBhIFRydXN0ZWRTY3JpcHRVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVHdGFnVHJ1c3RlZFR5cGVzU2NyaXB0VVJMKHVybCkge1xyXG4gICAgaWYgKCF1cmwuc3RhcnRzV2l0aChHVEFHX1VSTCkpIHtcclxuICAgICAgICBjb25zdCBlcnIgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtZ3RhZy1yZXNvdXJjZVwiIC8qIEFuYWx5dGljc0Vycm9yLklOVkFMSURfR1RBR19SRVNPVVJDRSAqLywge1xyXG4gICAgICAgICAgICBndGFnVVJMOiB1cmxcclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2dnZXIud2FybihlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVybDtcclxufVxyXG4vKipcclxuICogTWFrZXNoaWZ0IHBvbHlmaWxsIGZvciBQcm9taXNlLmFsbFNldHRsZWQoKS4gUmVzb2x2ZXMgd2hlbiBhbGwgcHJvbWlzZXNcclxuICogaGF2ZSBlaXRoZXIgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyBBcnJheSBvZiBwcm9taXNlcyB0byB3YWl0IGZvci5cclxuICovXHJcbmZ1bmN0aW9uIHByb21pc2VBbGxTZXR0bGVkKHByb21pc2VzKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKHByb21pc2UgPT4gcHJvbWlzZS5jYXRjaChlID0+IGUpKSk7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBUcnVzdGVkVHlwZVBvbGljeSBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBydWxlcyBwYXNzZWQgYXMgcG9saWN5T3B0aW9ucy5cclxuICpcclxuICogQHBhcmFtIHBvbGljeU5hbWUgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgcG9saWN5XHJcbiAqIEBwYXJhbSBwb2xpY3lPcHRpb25zIE9iamVjdCBjb250YWluaW5nIGltcGxlbWVudGF0aW9ucyBvZiBpbnN0YW5jZSBtZXRob2RzIGZvciBUcnVzdGVkVHlwZXNQb2xpY3ksIHNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1RydXN0ZWRUeXBlUG9saWN5I2luc3RhbmNlX21ldGhvZHNcclxuICogfCB0aGUgVHJ1c3RlZFR5cGVQb2xpY3kgcmVmZXJlbmNlIGRvY3VtZW50YXRpb259LlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlVHJ1c3RlZFR5cGVzUG9saWN5KHBvbGljeU5hbWUsIHBvbGljeU9wdGlvbnMpIHtcclxuICAgIC8vIENyZWF0ZSBhIFRydXN0ZWRUeXBlcyBwb2xpY3kgdGhhdCB3ZSBjYW4gdXNlIGZvciB1cGRhdGluZyBzcmNcclxuICAgIC8vIHByb3BlcnRpZXNcclxuICAgIGxldCB0cnVzdGVkVHlwZXNQb2xpY3k7XHJcbiAgICBpZiAod2luZG93LnRydXN0ZWRUeXBlcykge1xyXG4gICAgICAgIHRydXN0ZWRUeXBlc1BvbGljeSA9IHdpbmRvdy50cnVzdGVkVHlwZXMuY3JlYXRlUG9saWN5KHBvbGljeU5hbWUsIHBvbGljeU9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydXN0ZWRUeXBlc1BvbGljeTtcclxufVxyXG4vKipcclxuICogSW5zZXJ0cyBndGFnIHNjcmlwdCB0YWcgaW50byB0aGUgcGFnZSB0byBhc3luY2hyb25vdXNseSBkb3dubG9hZCBndGFnLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGRhdGFsYXllciAobW9zdCBvZnRlbiB0aGUgZGVmYXVsdCwgXCJfZGF0YUxheWVyXCIpLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUsIG1lYXN1cmVtZW50SWQpIHtcclxuICAgIGNvbnN0IHRydXN0ZWRUeXBlc1BvbGljeSA9IGNyZWF0ZVRydXN0ZWRUeXBlc1BvbGljeSgnZmlyZWJhc2UtanMtc2RrLXBvbGljeScsIHtcclxuICAgICAgICBjcmVhdGVTY3JpcHRVUkw6IGNyZWF0ZUd0YWdUcnVzdGVkVHlwZXNTY3JpcHRVUkxcclxuICAgIH0pO1xyXG4gICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAvLyBXZSBhcmUgbm90IHByb3ZpZGluZyBhbiBhbmFseXRpY3NJZCBpbiB0aGUgVVJMIGJlY2F1c2UgaXQgd291bGQgdHJpZ2dlciBhIGBwYWdlX3ZpZXdgXHJcbiAgICAvLyB3aXRob3V0IGZpZC4gV2Ugd2lsbCBpbml0aWFsaXplIGdhLWlkIHVzaW5nIGd0YWcgKGNvbmZpZykgY29tbWFuZCB0b2dldGhlciB3aXRoIGZpZC5cclxuICAgIGNvbnN0IGd0YWdTY3JpcHRVUkwgPSBgJHtHVEFHX1VSTH0/bD0ke2RhdGFMYXllck5hbWV9JmlkPSR7bWVhc3VyZW1lbnRJZH1gO1xyXG4gICAgc2NyaXB0LnNyYyA9IHRydXN0ZWRUeXBlc1BvbGljeVxyXG4gICAgICAgID8gdHJ1c3RlZFR5cGVzUG9saWN5ID09PSBudWxsIHx8IHRydXN0ZWRUeXBlc1BvbGljeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdHJ1c3RlZFR5cGVzUG9saWN5LmNyZWF0ZVNjcmlwdFVSTChndGFnU2NyaXB0VVJMKVxyXG4gICAgICAgIDogZ3RhZ1NjcmlwdFVSTDtcclxuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XHJcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbn1cclxuLyoqXHJcbiAqIEdldCByZWZlcmVuY2UgdG8sIG9yIGNyZWF0ZSwgZ2xvYmFsIGRhdGFsYXllci5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBkYXRhbGF5ZXIgKG1vc3Qgb2Z0ZW4gdGhlIGRlZmF1bHQsIFwiX2RhdGFMYXllclwiKS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE9yQ3JlYXRlRGF0YUxheWVyKGRhdGFMYXllck5hbWUpIHtcclxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBkYXRhTGF5ZXIgYW5kIGNyZWF0ZSBpZiBuZWVkZWQuXHJcbiAgICBsZXQgZGF0YUxheWVyID0gW107XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh3aW5kb3dbZGF0YUxheWVyTmFtZV0pKSB7XHJcbiAgICAgICAgZGF0YUxheWVyID0gd2luZG93W2RhdGFMYXllck5hbWVdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93W2RhdGFMYXllck5hbWVdID0gZGF0YUxheWVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGFMYXllcjtcclxufVxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGxvZ2ljIHdoZW4gZ3RhZyBpcyBjYWxsZWQgd2l0aCAnY29uZmlnJyBjb21tYW5kLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgQmFzaWMgZ3RhZyBmdW5jdGlvbiB0aGF0IGp1c3QgYXBwZW5kcyB0byBkYXRhTGF5ZXIuXHJcbiAqIEBwYXJhbSBpbml0aWFsaXphdGlvblByb21pc2VzTWFwIE1hcCBvZiBhcHBJZHMgdG8gdGhlaXIgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IEFycmF5IG9mIGR5bmFtaWMgY29uZmlnIGZldGNoIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZFRvQXBwSWQgTWFwIG9mIEdBIG1lYXN1cmVtZW50SURzIHRvIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2UgYXBwSWQuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkIEdBIE1lYXN1cmVtZW50IElEIHRvIHNldCBjb25maWcgZm9yLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBHdGFnIGNvbmZpZyBwYXJhbXMgdG8gc2V0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ3RhZ09uQ29uZmlnKGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgbWVhc3VyZW1lbnRJZCwgZ3RhZ1BhcmFtcykge1xyXG4gICAgLy8gSWYgY29uZmlnIGlzIGFscmVhZHkgZmV0Y2hlZCwgd2Uga25vdyB0aGUgYXBwSWQgYW5kIGNhbiB1c2UgaXQgdG8gbG9vayB1cCB3aGF0IEZJRCBwcm9taXNlIHdlXHJcbiAgICAvLy8gYXJlIHdhaXRpbmcgZm9yLCBhbmQgd2FpdCBvbmx5IG9uIHRoYXQgb25lLlxyXG4gICAgY29uc3QgY29ycmVzcG9uZGluZ0FwcElkID0gbWVhc3VyZW1lbnRJZFRvQXBwSWRbbWVhc3VyZW1lbnRJZF07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChjb3JyZXNwb25kaW5nQXBwSWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFtjb3JyZXNwb25kaW5nQXBwSWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgY29uZmlnIGlzIG5vdCBmZXRjaGVkIHlldCwgd2FpdCBmb3IgYWxsIGNvbmZpZ3MgKHdlIGRvbid0IGtub3cgd2hpY2ggb25lIHdlIG5lZWQpIGFuZFxyXG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBhcHBJZCAoaWYgYW55KSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgbWVhc3VyZW1lbnRJZC4gSWYgdGhlcmUgaXMgb25lLCB3YWl0IG9uXHJcbiAgICAgICAgICAgIC8vIHRoYXQgYXBwSWQncyBpbml0aWFsaXphdGlvbiBwcm9taXNlLiBJZiB0aGVyZSBpcyBub25lLCBwcm9taXNlIHJlc29sdmVzIGFuZCBndGFnXHJcbiAgICAgICAgICAgIC8vIGNhbGwgZ29lcyB0aHJvdWdoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBjb25zdCBmb3VuZENvbmZpZyA9IGR5bmFtaWNDb25maWdSZXN1bHRzLmZpbmQoY29uZmlnID0+IGNvbmZpZy5tZWFzdXJlbWVudElkID09PSBtZWFzdXJlbWVudElkKTtcclxuICAgICAgICAgICAgaWYgKGZvdW5kQ29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2ZvdW5kQ29uZmlnLmFwcElkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gICAgZ3RhZ0NvcmUoXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMpO1xyXG59XHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgbG9naWMgd2hlbiBndGFnIGlzIGNhbGxlZCB3aXRoICdldmVudCcgY29tbWFuZC5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWQgR0EgTWVhc3VyZW1lbnQgSUQgdG8gbG9nIGV2ZW50IHRvLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBQYXJhbXMgdG8gbG9nIHdpdGggdGhpcyBldmVudC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGxldCBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yID0gW107XHJcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhICdzZW5kX3RvJyBwYXJhbSwgY2hlY2sgaWYgYW55IElEIHNwZWNpZmllZCBtYXRjaGVzXHJcbiAgICAgICAgLy8gYW4gaW5pdGlhbGl6ZUlkcygpIHByb21pc2Ugd2UgYXJlIHdhaXRpbmcgZm9yLlxyXG4gICAgICAgIGlmIChndGFnUGFyYW1zICYmIGd0YWdQYXJhbXNbJ3NlbmRfdG8nXSkge1xyXG4gICAgICAgICAgICBsZXQgZ2FTZW5kVG9MaXN0ID0gZ3RhZ1BhcmFtc1snc2VuZF90byddO1xyXG4gICAgICAgICAgICAvLyBNYWtlIGl0IGFuIGFycmF5IGlmIGlzIGlzbid0LCBzbyBpdCBjYW4gYmUgZGVhbHQgd2l0aCB0aGUgc2FtZSB3YXkuXHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShnYVNlbmRUb0xpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICBnYVNlbmRUb0xpc3QgPSBbZ2FTZW5kVG9MaXN0XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVja2luZyAnc2VuZF90bycgZmllbGRzIHJlcXVpcmVzIGhhdmluZyBhbGwgbWVhc3VyZW1lbnQgSUQgcmVzdWx0cyBiYWNrIGZyb21cclxuICAgICAgICAgICAgLy8gdGhlIGR5bmFtaWMgY29uZmlnIGZldGNoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlbmRUb0lkIG9mIGdhU2VuZFRvTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQW55IGZldGNoZWQgZHluYW1pYyBtZWFzdXJlbWVudCBJRCB0aGF0IG1hdGNoZXMgdGhpcyAnc2VuZF90bycgSURcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kQ29uZmlnID0gZHluYW1pY0NvbmZpZ1Jlc3VsdHMuZmluZChjb25maWcgPT4gY29uZmlnLm1lYXN1cmVtZW50SWQgPT09IHNlbmRUb0lkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxpemF0aW9uUHJvbWlzZSA9IGZvdW5kQ29uZmlnICYmIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbZm91bmRDb25maWcuYXBwSWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IucHVzaChpbml0aWFsaXphdGlvblByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgYW4gaXRlbSBpbiAnc2VuZF90bycgdGhhdCBpcyBub3QgYXNzb2NpYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5IHdpdGggYW4gRklELCBwb3NzaWJseSBhIGdyb3VwLiAgRW1wdHkgdGhpcyBhcnJheSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBleGl0IHRoZSBsb29wIGVhcmx5LCBhbmQgbGV0IGl0IGdldCBwb3B1bGF0ZWQgYmVsb3cuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSB1bnBvcHVsYXRlZCBpZiB0aGVyZSB3YXMgbm8gJ3NlbmRfdG8nIGZpZWxkICwgb3JcclxuICAgICAgICAvLyBpZiBub3QgYWxsIGVudHJpZXMgaW4gdGhlICdzZW5kX3RvJyBmaWVsZCBjb3VsZCBiZSBtYXBwZWQgdG9cclxuICAgICAgICAvLyBhIEZJRC4gSW4gdGhlc2UgY2FzZXMsIHdhaXQgb24gYWxsIHBlbmRpbmcgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBPYmplY3QudmFsdWVzKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSdW4gY29yZSBndGFnIGZ1bmN0aW9uIHdpdGggYXJncyBhZnRlciBhbGwgcmVsZXZhbnQgaW5pdGlhbGl6YXRpb25cclxuICAgICAgICAvLyBwcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQuXHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvcik7XHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cDovL2IvMTQxMzcwNDQ5IC0gdGhpcmQgYXJndW1lbnQgY2Fubm90IGJlIHVuZGVmaW5lZC5cclxuICAgICAgICBndGFnQ29yZShcImV2ZW50XCIgLyogR3RhZ0NvbW1hbmQuRVZFTlQgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMgfHwge30pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiB3aXRoIGV4dHJhIGNvZGUgdG8gd2FpdCBmb3IgY29tcGxldGlvbiBvZlxyXG4gKiByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBiZWZvcmUgc2VuZGluZyByZXF1ZXN0cy5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcCBvZiBHQSBtZWFzdXJlbWVudElEcyB0byBjb3JyZXNwb25kaW5nIEZpcmViYXNlIGFwcElkLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcEd0YWcoZ3RhZ0NvcmUsIFxyXG4vKipcclxuICogQWxsb3dzIHdyYXBwZWQgZ3RhZyBjYWxscyB0byB3YWl0IG9uIHdoaWNoZXZlciBpbnRpYWxpemF0aW9uIHByb21pc2VzIGFyZSByZXF1aXJlZCxcclxuICogZGVwZW5kaW5nIG9uIHRoZSBjb250ZW50cyBvZiB0aGUgZ3RhZyBwYXJhbXMnIGBzZW5kX3RvYCBmaWVsZCwgaWYgYW55LlxyXG4gKi9cclxuaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgXHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgY2FsbHMgc29tZXRpbWVzIHJlcXVpcmUgYWxsIGR5bmFtaWMgY29uZmlnIGZldGNoZXMgdG8gaGF2ZSByZXR1cm5lZFxyXG4gKiBiZWZvcmUgZGV0ZXJtaW5pbmcgd2hhdCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyAod2hpY2ggaW5jbHVkZSBGSURzKSB0byB3YWl0IGZvci5cclxuICovXHJcbmR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIFxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGNvbmZpZyBjYWxscyBjYW4gbmFycm93IGRvd24gd2hpY2ggaW5pdGlhbGl6YXRpb24gcHJvbWlzZSAod2l0aCBGSUQpXHJcbiAqIHRvIHdhaXQgZm9yIGlmIHRoZSBtZWFzdXJlbWVudElkIGlzIGFscmVhZHkgZmV0Y2hlZCwgYnkgZ2V0dGluZyB0aGUgY29ycmVzcG9uZGluZyBhcHBJZCxcclxuICogd2hpY2ggaXMgdGhlIGtleSBmb3IgdGhlIGluaXRpYWxpemF0aW9uIHByb21pc2VzIG1hcC5cclxuICovXHJcbm1lYXN1cmVtZW50SWRUb0FwcElkKSB7XHJcbiAgICAvKipcclxuICAgICAqIFdyYXBwZXIgYXJvdW5kIGd0YWcgdGhhdCBlbnN1cmVzIEZJRCBpcyBzZW50IHdpdGggZ3RhZyBjYWxscy5cclxuICAgICAqIEBwYXJhbSBjb21tYW5kIEd0YWcgY29tbWFuZCB0eXBlLlxyXG4gICAgICogQHBhcmFtIGlkT3JOYW1lT3JQYXJhbXMgTWVhc3VyZW1lbnQgSUQgaWYgY29tbWFuZCBpcyBFVkVOVC9DT05GSUcsIHBhcmFtcyBpZiBjb21tYW5kIGlzIFNFVC5cclxuICAgICAqIEBwYXJhbSBndGFnUGFyYW1zIFBhcmFtcyBpZiBldmVudCBpcyBFVkVOVC9DT05GSUcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGZ1bmN0aW9uIGd0YWdXcmFwcGVyKGNvbW1hbmQsIC4uLmFyZ3MpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBJZiBldmVudCwgY2hlY2sgdGhhdCByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZC5cclxuICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT09IFwiZXZlbnRcIiAvKiBHdGFnQ29tbWFuZC5FVkVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW21lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXNdID0gYXJncztcclxuICAgICAgICAgICAgICAgIC8vIElmIEVWRU5ULCBzZWNvbmQgYXJnIG11c3QgYmUgbWVhc3VyZW1lbnRJZC5cclxuICAgICAgICAgICAgICAgIGF3YWl0IGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBcImNvbmZpZ1wiIC8qIEd0YWdDb21tYW5kLkNPTkZJRyAqLykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW21lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXNdID0gYXJncztcclxuICAgICAgICAgICAgICAgIC8vIElmIENPTkZJRywgc2Vjb25kIGFyZyBtdXN0IGJlIG1lYXN1cmVtZW50SWQuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBndGFnT25Db25maWcoZ3RhZ0NvcmUsIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBcImNvbnNlbnRcIiAvKiBHdGFnQ29tbWFuZC5DT05TRU5UICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbZ3RhZ1BhcmFtc10gPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgZ3RhZ0NvcmUoXCJjb25zZW50XCIgLyogR3RhZ0NvbW1hbmQuQ09OU0VOVCAqLywgJ3VwZGF0ZScsIGd0YWdQYXJhbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwiZ2V0XCIgLyogR3RhZ0NvbW1hbmQuR0VUICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbbWVhc3VyZW1lbnRJZCwgZmllbGROYW1lLCBjYWxsYmFja10gPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgZ3RhZ0NvcmUoXCJnZXRcIiAvKiBHdGFnQ29tbWFuZC5HRVQgKi8sIG1lYXN1cmVtZW50SWQsIGZpZWxkTmFtZSwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwic2V0XCIgLyogR3RhZ0NvbW1hbmQuU0VUICovKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbY3VzdG9tUGFyYW1zXSA9IGFyZ3M7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBTRVQsIHNlY29uZCBhcmcgbXVzdCBiZSBwYXJhbXMuXHJcbiAgICAgICAgICAgICAgICBndGFnQ29yZShcInNldFwiIC8qIEd0YWdDb21tYW5kLlNFVCAqLywgY3VzdG9tUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGd0YWdDb3JlKGNvbW1hbmQsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ3RhZ1dyYXBwZXI7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gb3Igd3JhcHMgZXhpc3Rpbmcgb25lIGlmIGZvdW5kLlxyXG4gKiBUaGlzIHdyYXBwZWQgZnVuY3Rpb24gYXR0YWNoZXMgRmlyZWJhc2UgaW5zdGFuY2UgSUQgKEZJRCkgdG8gZ3RhZyAnY29uZmlnJyBhbmRcclxuICogJ2V2ZW50JyBjYWxscyB0aGF0IGJlbG9uZyB0byB0aGUgR0FJRCBhc3NvY2lhdGVkIHdpdGggdGhpcyBGaXJlYmFzZSBpbnN0YW5jZS5cclxuICpcclxuICogQHBhcmFtIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgTWFwIG9mIGFwcElkcyB0byB0aGVpciBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICogQHBhcmFtIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgQXJyYXkgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkVG9BcHBJZCBNYXAgb2YgR0EgbWVhc3VyZW1lbnRJRHMgdG8gY29ycmVzcG9uZGluZyBGaXJlYmFzZSBhcHBJZC5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBnbG9iYWwgR0EgZGF0YWxheWVyIGFycmF5LlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uTmFtZSBOYW1lIG9mIGdsb2JhbCBndGFnIGZ1bmN0aW9uIChcImd0YWdcIiBpZiBub3QgdXNlci1zcGVjaWZpZWQpLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcE9yQ3JlYXRlR3RhZyhpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgZGF0YUxheWVyTmFtZSwgZ3RhZ0Z1bmN0aW9uTmFtZSkge1xyXG4gICAgLy8gQ3JlYXRlIGEgYmFzaWMgY29yZSBndGFnIGZ1bmN0aW9uXHJcbiAgICBsZXQgZ3RhZ0NvcmUgPSBmdW5jdGlvbiAoLi4uX2FyZ3MpIHtcclxuICAgICAgICAvLyBNdXN0IHB1c2ggSUFyZ3VtZW50cyBvYmplY3QsIG5vdCBhbiBhcnJheS5cclxuICAgICAgICB3aW5kb3dbZGF0YUxheWVyTmFtZV0ucHVzaChhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuICAgIC8vIFJlcGxhY2UgaXQgd2l0aCBleGlzdGluZyBvbmUgaWYgZm91bmRcclxuICAgIGlmICh3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gJiZcclxuICAgICAgICB0eXBlb2Ygd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGd0YWdDb3JlID0gd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdO1xyXG4gICAgfVxyXG4gICAgd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdID0gd3JhcEd0YWcoZ3RhZ0NvcmUsIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ3RhZ0NvcmUsXHJcbiAgICAgICAgd3JhcHBlZEd0YWc6IHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXVxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0aGUgc2NyaXB0IHRhZyBpbiB0aGUgRE9NIG1hdGNoaW5nIGJvdGggdGhlIGd0YWcgdXJsIHBhdHRlcm5cclxuICogYW5kIHRoZSBwcm92aWRlZCBkYXRhIGxheWVyIG5hbWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaW5kR3RhZ1NjcmlwdE9uUGFnZShkYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICBjb25zdCBzY3JpcHRUYWdzID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcclxuICAgIGZvciAoY29uc3QgdGFnIG9mIE9iamVjdC52YWx1ZXMoc2NyaXB0VGFncykpIHtcclxuICAgICAgICBpZiAodGFnLnNyYyAmJlxyXG4gICAgICAgICAgICB0YWcuc3JjLmluY2x1ZGVzKEdUQUdfVVJMKSAmJlxyXG4gICAgICAgICAgICB0YWcuc3JjLmluY2x1ZGVzKGRhdGFMYXllck5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEJhY2tvZmYgZmFjdG9yIGZvciA1MDMgZXJyb3JzLCB3aGljaCB3ZSB3YW50IHRvIGJlIGNvbnNlcnZhdGl2ZSBhYm91dFxyXG4gKiB0byBhdm9pZCBvdmVybG9hZGluZyBzZXJ2ZXJzLiBFYWNoIHJldHJ5IGludGVydmFsIHdpbGwgYmVcclxuICogQkFTRV9JTlRFUlZBTF9NSUxMSVMgKiBMT05HX1JFVFJZX0ZBQ1RPUiBeIHJldHJ5Q291bnQsIHNvIHRoZSBzZWNvbmQgb25lXHJcbiAqIHdpbGwgYmUgfjMwIHNlY29uZHMgKHdpdGggZnV6emluZykuXHJcbiAqL1xyXG5jb25zdCBMT05HX1JFVFJZX0ZBQ1RPUiA9IDMwO1xyXG4vKipcclxuICogQmFzZSB3YWl0IGludGVydmFsIHRvIG11bHRpcGxpZWQgYnkgYmFja29mZkZhY3Rvcl5iYWNrb2ZmQ291bnQuXHJcbiAqL1xyXG5jb25zdCBCQVNFX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBTdHViYmFibGUgcmV0cnkgZGF0YSBzdG9yYWdlIGNsYXNzLlxyXG4gKi9cclxuY2xhc3MgUmV0cnlEYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKHRocm90dGxlTWV0YWRhdGEgPSB7fSwgaW50ZXJ2YWxNaWxsaXMgPSBCQVNFX0lOVEVSVkFMX01JTExJUykge1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGVNZXRhZGF0YSA9IHRocm90dGxlTWV0YWRhdGE7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbE1pbGxpcyA9IGludGVydmFsTWlsbGlzO1xyXG4gICAgfVxyXG4gICAgZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdO1xyXG4gICAgfVxyXG4gICAgc2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCwgbWV0YWRhdGEpIHtcclxuICAgICAgICB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdID0gbWV0YWRhdGE7XHJcbiAgICB9XHJcbiAgICBkZWxldGVUaHJvdHRsZU1ldGFkYXRhKGFwcElkKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGhyb3R0bGVNZXRhZGF0YVthcHBJZF07XHJcbiAgICB9XHJcbn1cclxuY29uc3QgZGVmYXVsdFJldHJ5RGF0YSA9IG5ldyBSZXRyeURhdGEoKTtcclxuLyoqXHJcbiAqIFNldCBHRVQgcmVxdWVzdCBoZWFkZXJzLlxyXG4gKiBAcGFyYW0gYXBpS2V5IEFwcCBBUEkga2V5LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SGVhZGVycyhhcGlLZXkpIHtcclxuICAgIHJldHVybiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3gtZ29vZy1hcGkta2V5JzogYXBpS2V5XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogRmV0Y2hlcyBkeW5hbWljIGNvbmZpZyBmcm9tIGJhY2tlbmQuXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwIHRvIGZldGNoIGNvbmZpZyBmb3IuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaER5bmFtaWNDb25maWcoYXBwRmllbGRzKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXkgfSA9IGFwcEZpZWxkcztcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzKGFwaUtleSlcclxuICAgIH07XHJcbiAgICBjb25zdCBhcHBVcmwgPSBEWU5BTUlDX0NPTkZJR19VUkwucmVwbGFjZSgne2FwcC1pZH0nLCBhcHBJZCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwcFVybCwgcmVxdWVzdCk7XHJcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzICE9PSAzMDQpIHtcclxuICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVHJ5IHRvIGdldCBhbnkgZXJyb3IgbWVzc2FnZSB0ZXh0IGZyb20gc2VydmVyIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICBjb25zdCBqc29uUmVzcG9uc2UgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcclxuICAgICAgICAgICAgaWYgKChfYSA9IGpzb25SZXNwb25zZS5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGpzb25SZXNwb25zZS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfaWdub3JlZCkgeyB9XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJjb25maWctZmV0Y2gtZmFpbGVkXCIgLyogQW5hbHl0aWNzRXJyb3IuQ09ORklHX0ZFVENIX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICBodHRwU3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZTogZXJyb3JNZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG59XHJcbi8qKlxyXG4gKiBGZXRjaGVzIGR5bmFtaWMgY29uZmlnIGZyb20gYmFja2VuZCwgcmV0cnlpbmcgaWYgZmFpbGVkLlxyXG4gKiBAcGFyYW0gYXBwIEZpcmViYXNlIGFwcCB0byBmZXRjaCBjb25maWcgZm9yLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KGFwcCwgXHJcbi8vIHJldHJ5RGF0YSBhbmQgdGltZW91dE1pbGxpcyBhcmUgcGFyYW1ldGVyaXplZCB0byBhbGxvdyBwYXNzaW5nIGEgZGlmZmVyZW50IHZhbHVlIGZvciB0ZXN0aW5nLlxyXG5yZXRyeURhdGEgPSBkZWZhdWx0UmV0cnlEYXRhLCB0aW1lb3V0TWlsbGlzKSB7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXksIG1lYXN1cmVtZW50SWQgfSA9IGFwcC5vcHRpb25zO1xyXG4gICAgaWYgKCFhcHBJZCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwLWlkXCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBQX0lEICovKTtcclxuICAgIH1cclxuICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgaWYgKG1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1lYXN1cmVtZW50SWQsXHJcbiAgICAgICAgICAgICAgICBhcHBJZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwaS1rZXlcIiAvKiBBbmFseXRpY3NFcnJvci5OT19BUElfS0VZICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSByZXRyeURhdGEuZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkgfHwge1xyXG4gICAgICAgIGJhY2tvZmZDb3VudDogMCxcclxuICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXM6IERhdGUubm93KClcclxuICAgIH07XHJcbiAgICBjb25zdCBzaWduYWwgPSBuZXcgQW5hbHl0aWNzQWJvcnRTaWduYWwoKTtcclxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIC8vIE5vdGUgYSB2ZXJ5IGxvdyBkZWxheSwgZWcgPCAxMG1zLCBjYW4gZWxhcHNlIGJlZm9yZSBsaXN0ZW5lcnMgYXJlIGluaXRpYWxpemVkLlxyXG4gICAgICAgIHNpZ25hbC5hYm9ydCgpO1xyXG4gICAgfSwgdGltZW91dE1pbGxpcyAhPT0gdW5kZWZpbmVkID8gdGltZW91dE1pbGxpcyA6IEZFVENIX1RJTUVPVVRfTUlMTElTKTtcclxuICAgIHJldHVybiBhdHRlbXB0RmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KHsgYXBwSWQsIGFwaUtleSwgbWVhc3VyZW1lbnRJZCB9LCB0aHJvdHRsZU1ldGFkYXRhLCBzaWduYWwsIHJldHJ5RGF0YSk7XHJcbn1cclxuLyoqXHJcbiAqIFJ1bnMgb25lIHJldHJ5IGF0dGVtcHQuXHJcbiAqIEBwYXJhbSBhcHBGaWVsZHMgTmVjZXNzYXJ5IGFwcCBjb25maWcgZmllbGRzLlxyXG4gKiBAcGFyYW0gdGhyb3R0bGVNZXRhZGF0YSBPbmdvaW5nIG1ldGFkYXRhIHRvIGRldGVybWluZSB0aHJvdHRsaW5nIHRpbWVzLlxyXG4gKiBAcGFyYW0gc2lnbmFsIEFib3J0IHNpZ25hbC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwRmllbGRzLCB7IHRocm90dGxlRW5kVGltZU1pbGxpcywgYmFja29mZkNvdW50IH0sIHNpZ25hbCwgcmV0cnlEYXRhID0gZGVmYXVsdFJldHJ5RGF0YSAvLyBmb3IgdGVzdGluZ1xyXG4pIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHsgYXBwSWQsIG1lYXN1cmVtZW50SWQgfSA9IGFwcEZpZWxkcztcclxuICAgIC8vIFN0YXJ0cyB3aXRoIGEgKHBvdGVudGlhbGx5IHplcm8pIHRpbWVvdXQgdG8gc3VwcG9ydCByZXN1bXB0aW9uIGZyb20gc3RvcmVkIHN0YXRlLlxyXG4gICAgLy8gRW5zdXJlcyB0aGUgdGhyb3R0bGUgZW5kIHRpbWUgaXMgaG9ub3JlZCBpZiB0aGUgbGFzdCBhdHRlbXB0IHRpbWVkIG91dC5cclxuICAgIC8vIE5vdGUgdGhlIFNESyB3aWxsIG5ldmVyIG1ha2UgYSByZXF1ZXN0IGlmIHRoZSBmZXRjaCB0aW1lb3V0IGV4cGlyZXMgYXQgdGhpcyBwb2ludC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc2V0QWJvcnRhYmxlVGltZW91dChzaWduYWwsIHRocm90dGxlRW5kVGltZU1pbGxpcyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChtZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaW1lZCBvdXQgZmV0Y2hpbmcgdGhpcyBGaXJlYmFzZSBhcHAncyBtZWFzdXJlbWVudCBJRCBmcm9tIHRoZSBzZXJ2ZXIuYCArXHJcbiAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgYCBwcm92aWRlZCBpbiB0aGUgXCJtZWFzdXJlbWVudElkXCIgZmllbGQgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gWyR7ZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2V9XWApO1xyXG4gICAgICAgICAgICByZXR1cm4geyBhcHBJZCwgbWVhc3VyZW1lbnRJZCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoRHluYW1pY0NvbmZpZyhhcHBGaWVsZHMpO1xyXG4gICAgICAgIC8vIE5vdGUgdGhlIFNESyBvbmx5IGNsZWFycyB0aHJvdHRsZSBzdGF0ZSBpZiByZXNwb25zZSBpcyBzdWNjZXNzIG9yIG5vbi1yZXRyaWFibGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBlO1xyXG4gICAgICAgIGlmICghaXNSZXRyaWFibGVFcnJvcihlcnJvcikpIHtcclxuICAgICAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgICAgICBpZiAobWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBmZXRjaCB0aGlzIEZpcmViYXNlIGFwcCdzIG1lYXN1cmVtZW50IElEIGZyb20gdGhlIHNlcnZlci5gICtcclxuICAgICAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGAgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFske2Vycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5tZXNzYWdlfV1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGFwcElkLCBtZWFzdXJlbWVudElkIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJhY2tvZmZNaWxsaXMgPSBOdW1iZXIoKF9hID0gZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmN1c3RvbURhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5odHRwU3RhdHVzKSA9PT0gNTAzXHJcbiAgICAgICAgICAgID8gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcywgTE9OR19SRVRSWV9GQUNUT1IpXHJcbiAgICAgICAgICAgIDogY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcyk7XHJcbiAgICAgICAgLy8gSW5jcmVtZW50cyBiYWNrb2ZmIHN0YXRlLlxyXG4gICAgICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRocm90dGxlRW5kVGltZU1pbGxpczogRGF0ZS5ub3coKSArIGJhY2tvZmZNaWxsaXMsXHJcbiAgICAgICAgICAgIGJhY2tvZmZDb3VudDogYmFja29mZkNvdW50ICsgMVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gUGVyc2lzdHMgc3RhdGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLnNldFRocm90dGxlTWV0YWRhdGEoYXBwSWQsIHRocm90dGxlTWV0YWRhdGEpO1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2FsbGluZyBhdHRlbXB0RmV0Y2ggYWdhaW4gaW4gJHtiYWNrb2ZmTWlsbGlzfSBtaWxsaXNgKTtcclxuICAgICAgICByZXR1cm4gYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeShhcHBGaWVsZHMsIHRocm90dGxlTWV0YWRhdGEsIHNpZ25hbCwgcmV0cnlEYXRhKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU3VwcG9ydHMgd2FpdGluZyBvbiBhIGJhY2tvZmYgYnk6XHJcbiAqXHJcbiAqIDx1bD5cclxuICogICA8bGk+UHJvbWlzaWZ5aW5nIHNldFRpbWVvdXQsIHNvIHdlIGNhbiBzZXQgYSB0aW1lb3V0IGluIG91ciBQcm9taXNlIGNoYWluPC9saT5cclxuICogICA8bGk+TGlzdGVuaW5nIG9uIGEgc2lnbmFsIGJ1cyBmb3IgYWJvcnQgZXZlbnRzLCBqdXN0IGxpa2UgdGhlIEZldGNoIEFQSTwvbGk+XHJcbiAqICAgPGxpPkZhaWxpbmcgaW4gdGhlIHNhbWUgd2F5IHRoZSBGZXRjaCBBUEkgZmFpbHMsIHNvIHRpbWluZyBvdXQgYSBsaXZlIHJlcXVlc3QgYW5kIGEgdGhyb3R0bGVkXHJcbiAqICAgICAgIHJlcXVlc3QgYXBwZWFyIHRoZSBzYW1lLjwvbGk+XHJcbiAqIDwvdWw+XHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRBYm9ydGFibGVUaW1lb3V0KHNpZ25hbCwgdGhyb3R0bGVFbmRUaW1lTWlsbGlzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIC8vIERlcml2ZXMgYmFja29mZiBmcm9tIGdpdmVuIGVuZCB0aW1lLCBub3JtYWxpemluZyBuZWdhdGl2ZSBudW1iZXJzIHRvIHplcm8uXHJcbiAgICAgICAgY29uc3QgYmFja29mZk1pbGxpcyA9IE1hdGgubWF4KHRocm90dGxlRW5kVGltZU1pbGxpcyAtIERhdGUubm93KCksIDApO1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIGJhY2tvZmZNaWxsaXMpO1xyXG4gICAgICAgIC8vIEFkZHMgbGlzdGVuZXIsIHJhdGhlciB0aGFuIHNldHMgb25hYm9ydCwgYmVjYXVzZSBzaWduYWwgaXMgYSBzaGFyZWQgb2JqZWN0LlxyXG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBjb21wbGV0ZXMgYmVmb3JlIHRoaXMgdGltZW91dCwgdGhlIHJlamVjdGlvbiBoYXMgbm8gZWZmZWN0LlxyXG4gICAgICAgICAgICByZWplY3QoRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJmZXRjaC10aHJvdHRsZVwiIC8qIEFuYWx5dGljc0Vycm9yLkZFVENIX1RIUk9UVExFICovLCB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXNcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUge0BsaW5rIEVycm9yfSBpbmRpY2F0ZXMgYSBmZXRjaCByZXF1ZXN0IG1heSBzdWNjZWVkIGxhdGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZXRyaWFibGVFcnJvcihlKSB7XHJcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikgfHwgIWUuY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIFVzZXMgc3RyaW5nIGluZGV4IGRlZmluZWQgYnkgRXJyb3JEYXRhLCB3aGljaCBGaXJlYmFzZUVycm9yIGltcGxlbWVudHMuXHJcbiAgICBjb25zdCBodHRwU3RhdHVzID0gTnVtYmVyKGUuY3VzdG9tRGF0YVsnaHR0cFN0YXR1cyddKTtcclxuICAgIHJldHVybiAoaHR0cFN0YXR1cyA9PT0gNDI5IHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAwIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAzIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTA0KTtcclxufVxyXG4vKipcclxuICogU2hpbXMgYSBtaW5pbWFsIEFib3J0U2lnbmFsIChjb3BpZWQgZnJvbSBSZW1vdGUgQ29uZmlnKS5cclxuICpcclxuICogPHA+QWJvcnRDb250cm9sbGVyJ3MgQWJvcnRTaWduYWwgY29udmVuaWVudGx5IGRlY291cGxlcyBmZXRjaCB0aW1lb3V0IGxvZ2ljIGZyb20gb3RoZXIgYXNwZWN0c1xyXG4gKiBvZiBuZXR3b3JraW5nLCBzdWNoIGFzIHJldHJpZXMuIEZpcmViYXNlIGRvZXNuJ3QgdXNlIEFib3J0Q29udHJvbGxlciBlbm91Z2ggdG8ganVzdGlmeSBhXHJcbiAqIHBvbHlmaWxsIHJlY29tbWVuZGF0aW9uLCBsaWtlIHdlIGRvIHdpdGggdGhlIEZldGNoIEFQSSwgYnV0IHRoaXMgbWluaW1hbCBzaGltIGNhbiBlYXNpbHkgYmVcclxuICogc3dhcHBlZCBvdXQgaWYvd2hlbiB3ZSBkby5cclxuICovXHJcbmNsYXNzIEFuYWx5dGljc0Fib3J0U2lnbmFsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcbiAgICBhZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBhYm9ydCgpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKCkpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmVudCBwYXJhbWV0ZXJzIHRvIHNldCBvbiAnZ3RhZycgZHVyaW5nIGluaXRpYWxpemF0aW9uLlxyXG4gKi9cclxubGV0IGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0O1xyXG4vKipcclxuICogTG9ncyBhbiBhbmFseXRpY3MgZXZlbnQgdGhyb3VnaCB0aGUgRmlyZWJhc2UgU0RLLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBldmVudE5hbWUgR29vZ2xlIEFuYWx5dGljcyBldmVudCBuYW1lLCBjaG9vc2UgZnJvbSBzdGFuZGFyZCBsaXN0IG9yIHVzZSBhIGN1c3RvbSBzdHJpbmcuXHJcbiAqIEBwYXJhbSBldmVudFBhcmFtcyBBbmFseXRpY3MgZXZlbnQgcGFyYW1ldGVycy5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvZ0V2ZW50JDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBHdGFnQ29tbWFuZC5FVkVOVCAqLywgZXZlbnROYW1lLCBldmVudFBhcmFtcyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGV2ZW50UGFyYW1zKSwgeyAnc2VuZF90byc6IG1lYXN1cmVtZW50SWQgfSk7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBHdGFnQ29tbWFuZC5FVkVOVCAqLywgZXZlbnROYW1lLCBwYXJhbXMpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgc2NyZWVuX25hbWUgcGFyYW1ldGVyIGZvciB0aGlzIEdvb2dsZSBBbmFseXRpY3MgSUQuXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgbG9nRXZlbnR9IHdpdGggYGV2ZW50TmFtZWAgYXMgJ3NjcmVlbl92aWV3JyBhbmQgYWRkIHJlbGV2YW50IGBldmVudFBhcmFtc2AuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYW5hbHl0aWNzL3NjcmVlbnZpZXdzIHwgVHJhY2sgU2NyZWVudmlld3N9LlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBzY3JlZW5OYW1lIFNjcmVlbiBuYW1lIHN0cmluZyB0byBzZXQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuJDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogR3RhZ0NvbW1hbmQuU0VUICovLCB7ICdzY3JlZW5fbmFtZSc6IHNjcmVlbk5hbWUgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCB1c2VyX2lkIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBpZCBVc2VyIElEIHN0cmluZyB0byBzZXRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldFVzZXJJZCQxKGd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBpZCwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJzZXRcIiAvKiBHdGFnQ29tbWFuZC5TRVQgKi8sIHsgJ3VzZXJfaWQnOiBpZCB9KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBtZWFzdXJlbWVudElkID0gYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcImNvbmZpZ1wiIC8qIEd0YWdDb21tYW5kLkNPTkZJRyAqLywgbWVhc3VyZW1lbnRJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICd1c2VyX2lkJzogaWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IGFsbCBvdGhlciB1c2VyIHByb3BlcnRpZXMgb3RoZXIgdGhhbiB1c2VyX2lkIGFuZCBzY3JlZW5fbmFtZS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gcHJvcGVydGllcyBNYXAgb2YgdXNlciBwcm9wZXJ0aWVzIHRvIHNldFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0VXNlclByb3BlcnRpZXMkMShndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSwgcHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBjb25zdCBmbGF0UHJvcGVydGllcyA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHByb3BlcnRpZXMpKSB7XHJcbiAgICAgICAgICAgIC8vIHVzZSBkb3Qgbm90YXRpb24gZm9yIG1lcmdlIGJlaGF2aW9yIGluIGd0YWcuanNcclxuICAgICAgICAgICAgZmxhdFByb3BlcnRpZXNbYHVzZXJfcHJvcGVydGllcy4ke2tleX1gXSA9IHByb3BlcnRpZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogR3RhZ0NvbW1hbmQuU0VUICovLCBmbGF0UHJvcGVydGllcyk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndXNlcl9wcm9wZXJ0aWVzJzogcHJvcGVydGllc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB1bmlxdWUgR29vZ2xlIEFuYWx5dGljcyBpZGVudGlmaWVyIGZvciB0aGUgd2ViIGNsaWVudC5cclxuICogU2VlIHtAbGluayBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2E0L3JlZmVyZW5jZS9jb25maWcjY2xpZW50X2lkIHwgY2xpZW50X2lkfS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gaW50ZXJuYWxHZXRHb29nbGVBbmFseXRpY3NDbGllbnRJZChndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xyXG4gICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZ2V0XCIgLyogR3RhZ0NvbW1hbmQuR0VUICovLCBtZWFzdXJlbWVudElkLCAnY2xpZW50X2lkJywgKGNsaWVudElkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2xpZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWNsaWVudC1pZFwiIC8qIEFuYWx5dGljc0Vycm9yLk5PX0NMSUVOVF9JRCAqLykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc29sdmUoY2xpZW50SWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldCB3aGV0aGVyIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBJRC5cclxuICpcclxuICogQHBhcmFtIGVuYWJsZWQgSWYgdHJ1ZSwgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIElELlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQkMShpbml0aWFsaXphdGlvblByb21pc2UsIGVuYWJsZWQpIHtcclxuICAgIGNvbnN0IG1lYXN1cmVtZW50SWQgPSBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICB3aW5kb3dbYGdhLWRpc2FibGUtJHttZWFzdXJlbWVudElkfWBdID0gIWVuYWJsZWQ7XHJcbn1cclxuLyoqXHJcbiAqIENvbnNlbnQgcGFyYW1ldGVycyB0byBkZWZhdWx0IHRvIGR1cmluZyAnZ3RhZycgaW5pdGlhbGl6YXRpb24uXHJcbiAqL1xyXG5sZXQgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQ7XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSB2YXJpYWJsZSB7QGxpbmsgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXR9IGZvciB1c2UgaW4gdGhlIGluaXRpYWxpemF0aW9uIG9mXHJcbiAqIGFuYWx5dGljcy5cclxuICpcclxuICogQHBhcmFtIGNvbnNlbnRTZXR0aW5ncyBNYXBzIHRoZSBhcHBsaWNhYmxlIGVuZCB1c2VyIGNvbnNlbnQgc3RhdGUgZm9yIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0Q29uc2VudERlZmF1bHRGb3JJbml0KGNvbnNlbnRTZXR0aW5ncykge1xyXG4gICAgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQgPSBjb25zZW50U2V0dGluZ3M7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgdGhlIHZhcmlhYmxlIGBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdGAgZm9yIHVzZSBpbiB0aGUgaW5pdGlhbGl6YXRpb24gb2ZcclxuICogYW5hbHl0aWNzLlxyXG4gKlxyXG4gKiBAcGFyYW0gY3VzdG9tUGFyYW1zIEFueSBjdXN0b20gcGFyYW1zIHRoZSB1c2VyIG1heSBwYXNzIHRvIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQoY3VzdG9tUGFyYW1zKSB7XHJcbiAgICBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCA9IGN1c3RvbVBhcmFtcztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQigpIHtcclxuICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogQW5hbHl0aWNzRXJyb3IuSU5ERVhFRERCX1VOQVZBSUxBQkxFICovLCB7XHJcbiAgICAgICAgICAgIGVycm9ySW5mbzogJ0luZGV4ZWREQiBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQuJ1xyXG4gICAgICAgIH0pLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbmRleGVkZGItdW5hdmFpbGFibGVcIiAvKiBBbmFseXRpY3NFcnJvci5JTkRFWEVEREJfVU5BVkFJTEFCTEUgKi8sIHtcclxuICAgICAgICAgICAgICAgIGVycm9ySW5mbzogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgfSkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogSW5pdGlhbGl6ZSB0aGUgYW5hbHl0aWNzIGluc3RhbmNlIGluIGd0YWcuanMgYnkgY2FsbGluZyBjb25maWcgY29tbWFuZCB3aXRoIGZpZC5cclxuICpcclxuICogTk9URTogV2UgY29tYmluZSBhbmFseXRpY3MgaW5pdGlhbGl6YXRpb24gYW5kIHNldHRpbmcgZmlkIHRvZ2V0aGVyIGJlY2F1c2Ugd2Ugd2FudCBmaWQgdG8gYmVcclxuICogcGFydCBvZiB0aGUgYHBhZ2Vfdmlld2AgZXZlbnQgdGhhdCdzIHNlbnQgZHVyaW5nIHRoZSBpbml0aWFsaXphdGlvblxyXG4gKiBAcGFyYW0gYXBwIEZpcmViYXNlIGFwcFxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgVGhlIGd0YWcgZnVuY3Rpb24gdGhhdCdzIG5vdCB3cmFwcGVkLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBhbGwgZHluYW1pYyBjb25maWcgcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkVG9BcHBJZCBNYXBzIG1lYXN1cmVtZW50SUQgdG8gYXBwSUQuXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIF9GaXJlYmFzZUluc3RhbGxhdGlvbnNJbnRlcm5hbCBpbnN0YW5jZS5cclxuICpcclxuICogQHJldHVybnMgTWVhc3VyZW1lbnQgSUQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBpbnN0YWxsYXRpb25zLCBndGFnQ29yZSwgZGF0YUxheWVyTmFtZSwgb3B0aW9ucykge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZHluYW1pY0NvbmZpZ1Byb21pc2UgPSBmZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwKTtcclxuICAgIC8vIE9uY2UgZmV0Y2hlZCwgbWFwIG1lYXN1cmVtZW50SWRzIHRvIGFwcElkLCBmb3IgZWFzZSBvZiBsb29rdXAgaW4gd3JhcHBlZCBndGFnIGZ1bmN0aW9uLlxyXG4gICAgZHluYW1pY0NvbmZpZ1Byb21pc2VcclxuICAgICAgICAudGhlbihjb25maWcgPT4ge1xyXG4gICAgICAgIG1lYXN1cmVtZW50SWRUb0FwcElkW2NvbmZpZy5tZWFzdXJlbWVudElkXSA9IGNvbmZpZy5hcHBJZDtcclxuICAgICAgICBpZiAoYXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZCAmJlxyXG4gICAgICAgICAgICBjb25maWcubWVhc3VyZW1lbnRJZCAhPT0gYXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgVGhlIG1lYXN1cmVtZW50IElEIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcgKCR7YXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZH0pYCArXHJcbiAgICAgICAgICAgICAgICBgIGRvZXMgbm90IG1hdGNoIHRoZSBtZWFzdXJlbWVudCBJRCBmZXRjaGVkIGZyb20gdGhlIHNlcnZlciAoJHtjb25maWcubWVhc3VyZW1lbnRJZH0pLmAgK1xyXG4gICAgICAgICAgICAgICAgYCBUbyBlbnN1cmUgYW5hbHl0aWNzIGV2ZW50cyBhcmUgYWx3YXlzIHNlbnQgdG8gdGhlIGNvcnJlY3QgQW5hbHl0aWNzIHByb3BlcnR5LGAgK1xyXG4gICAgICAgICAgICAgICAgYCB1cGRhdGUgdGhlYCArXHJcbiAgICAgICAgICAgICAgICBgIG1lYXN1cmVtZW50IElEIGZpZWxkIGluIHRoZSBsb2NhbCBjb25maWcgb3IgcmVtb3ZlIGl0IGZyb20gdGhlIGxvY2FsIGNvbmZpZy5gKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbiAgICAvLyBBZGQgdG8gbGlzdCB0byB0cmFjayBzdGF0ZSBvZiBhbGwgZHluYW1pYyBjb25maWcgcHJvbWlzZXMuXHJcbiAgICBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LnB1c2goZHluYW1pY0NvbmZpZ1Byb21pc2UpO1xyXG4gICAgY29uc3QgZmlkUHJvbWlzZSA9IHZhbGlkYXRlSW5kZXhlZERCKCkudGhlbihlbnZJc1ZhbGlkID0+IHtcclxuICAgICAgICBpZiAoZW52SXNWYWxpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFsbGF0aW9ucy5nZXRJZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IFtkeW5hbWljQ29uZmlnLCBmaWRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIGR5bmFtaWNDb25maWdQcm9taXNlLFxyXG4gICAgICAgIGZpZFByb21pc2VcclxuICAgIF0pO1xyXG4gICAgLy8gRGV0ZWN0IGlmIHVzZXIgaGFzIGFscmVhZHkgcHV0IHRoZSBndGFnIDxzY3JpcHQ+IHRhZyBvbiB0aGlzIHBhZ2Ugd2l0aCB0aGUgcGFzc2VkIGluXHJcbiAgICAvLyBkYXRhIGxheWVyIG5hbWUuXHJcbiAgICBpZiAoIWZpbmRHdGFnU2NyaXB0T25QYWdlKGRhdGFMYXllck5hbWUpKSB7XHJcbiAgICAgICAgaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUsIGR5bmFtaWNDb25maWcubWVhc3VyZW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgICAvLyBEZXRlY3RzIGlmIHRoZXJlIGFyZSBjb25zZW50IHNldHRpbmdzIHRoYXQgbmVlZCB0byBiZSBjb25maWd1cmVkLlxyXG4gICAgaWYgKGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0KSB7XHJcbiAgICAgICAgZ3RhZ0NvcmUoXCJjb25zZW50XCIgLyogR3RhZ0NvbW1hbmQuQ09OU0VOVCAqLywgJ2RlZmF1bHQnLCBkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCk7XHJcbiAgICAgICAgX3NldENvbnNlbnREZWZhdWx0Rm9ySW5pdCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgLy8gVGhpcyBjb21tYW5kIGluaXRpYWxpemVzIGd0YWcuanMgYW5kIG9ubHkgbmVlZHMgdG8gYmUgY2FsbGVkIG9uY2UgZm9yIHRoZSBlbnRpcmUgd2ViIGFwcCxcclxuICAgIC8vIGJ1dCBzaW5jZSBpdCBpcyBpZGVtcG90ZW50LCB3ZSBjYW4gY2FsbCBpdCBtdWx0aXBsZSB0aW1lcy5cclxuICAgIC8vIFdlIGtlZXAgaXQgdG9nZXRoZXIgd2l0aCBvdGhlciBpbml0aWFsaXphdGlvbiBsb2dpYyBmb3IgYmV0dGVyIGNvZGUgc3RydWN0dXJlLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIGd0YWdDb3JlKCdqcycsIG5ldyBEYXRlKCkpO1xyXG4gICAgLy8gVXNlciBjb25maWcgYWRkZWQgZmlyc3QuIFdlIGRvbid0IHdhbnQgdXNlcnMgdG8gYWNjaWRlbnRhbGx5IG92ZXJ3cml0ZVxyXG4gICAgLy8gYmFzZSBGaXJlYmFzZSBjb25maWcgcHJvcGVydGllcy5cclxuICAgIGNvbnN0IGNvbmZpZ1Byb3BlcnRpZXMgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuY29uZmlnKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcclxuICAgIC8vIGd1YXJkIGFnYWluc3QgZGV2ZWxvcGVycyBhY2NpZGVudGFsbHkgc2V0dGluZyBwcm9wZXJ0aWVzIHdpdGggcHJlZml4IGBmaXJlYmFzZV9gXHJcbiAgICBjb25maWdQcm9wZXJ0aWVzW09SSUdJTl9LRVldID0gJ2ZpcmViYXNlJztcclxuICAgIGNvbmZpZ1Byb3BlcnRpZXMudXBkYXRlID0gdHJ1ZTtcclxuICAgIGlmIChmaWQgIT0gbnVsbCkge1xyXG4gICAgICAgIGNvbmZpZ1Byb3BlcnRpZXNbR0FfRklEX0tFWV0gPSBmaWQ7XHJcbiAgICB9XHJcbiAgICAvLyBJdCBzaG91bGQgYmUgdGhlIGZpcnN0IGNvbmZpZyBjb21tYW5kIGNhbGxlZCBvbiB0aGlzIEdBLUlEXHJcbiAgICAvLyBJbml0aWFsaXplIHRoaXMgR0EtSUQgYW5kIHNldCBGSUQgb24gaXQgdXNpbmcgdGhlIGd0YWcgY29uZmlnIEFQSS5cclxuICAgIC8vIE5vdGU6IFRoaXMgd2lsbCB0cmlnZ2VyIGEgcGFnZV92aWV3IGV2ZW50IHVubGVzcyAnc2VuZF9wYWdlX3ZpZXcnIGlzIHNldCB0byBmYWxzZSBpblxyXG4gICAgLy8gYGNvbmZpZ1Byb3BlcnRpZXNgLlxyXG4gICAgZ3RhZ0NvcmUoXCJjb25maWdcIiAvKiBHdGFnQ29tbWFuZC5DT05GSUcgKi8sIGR5bmFtaWNDb25maWcubWVhc3VyZW1lbnRJZCwgY29uZmlnUHJvcGVydGllcyk7XHJcbiAgICAvLyBEZXRlY3RzIGlmIHRoZXJlIGlzIGRhdGEgdGhhdCB3aWxsIGJlIHNldCBvbiBldmVyeSBldmVudCBsb2dnZWQgZnJvbSB0aGUgU0RLLlxyXG4gICAgaWYgKGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KSB7XHJcbiAgICAgICAgZ3RhZ0NvcmUoXCJzZXRcIiAvKiBHdGFnQ29tbWFuZC5TRVQgKi8sIGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KTtcclxuICAgICAgICBfc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQodW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkeW5hbWljQ29uZmlnLm1lYXN1cmVtZW50SWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuYWx5dGljcyBTZXJ2aWNlIGNsYXNzLlxyXG4gKi9cclxuY2xhc3MgQW5hbHl0aWNzU2VydmljZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgIH1cclxuICAgIF9kZWxldGUoKSB7XHJcbiAgICAgICAgZGVsZXRlIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbdGhpcy5hcHAub3B0aW9ucy5hcHBJZF07XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBNYXBzIGFwcElkIHRvIGZ1bGwgaW5pdGlhbGl6YXRpb24gcHJvbWlzZS4gV3JhcHBlZCBndGFnIGNhbGxzIG11c3Qgd2FpdCBvblxyXG4gKiBhbGwgb3Igc29tZSBvZiB0aGVzZSwgZGVwZW5kaW5nIG9uIHRoZSBjYWxsJ3MgYHNlbmRfdG9gIHBhcmFtIGFuZCB0aGUgc3RhdHVzXHJcbiAqIG9mIHRoZSBkeW5hbWljIGNvbmZpZyBmZXRjaGVzIChzZWUgYmVsb3cpLlxyXG4gKi9cclxubGV0IGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgPSB7fTtcclxuLyoqXHJcbiAqIExpc3Qgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuIEluIGNlcnRhaW4gY2FzZXMsIHdyYXBwZWQgZ3RhZyBjYWxsc1xyXG4gKiB3YWl0IG9uIGFsbCB0aGVzZSB0byBiZSBjb21wbGV0ZSBpbiBvcmRlciB0byBkZXRlcm1pbmUgaWYgaXQgY2FuIHNlbGVjdGl2ZWx5XHJcbiAqIHdhaXQgZm9yIG9ubHkgY2VydGFpbiBpbml0aWFsaXphdGlvbiAoRklEKSBwcm9taXNlcyBvciBpZiBpdCBtdXN0IHdhaXQgZm9yIGFsbC5cclxuICovXHJcbmxldCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0ID0gW107XHJcbi8qKlxyXG4gKiBNYXBzIGZldGNoZWQgbWVhc3VyZW1lbnRJZHMgdG8gYXBwSWQuIFBvcHVsYXRlZCB3aGVuIHRoZSBhcHAncyBkeW5hbWljIGNvbmZpZ1xyXG4gKiBmZXRjaCBjb21wbGV0ZXMuIElmIGFscmVhZHkgcG9wdWxhdGVkLCBndGFnIGNvbmZpZyBjYWxscyBjYW4gdXNlIHRoaXMgdG9cclxuICogc2VsZWN0aXZlbHkgd2FpdCBmb3Igb25seSB0aGlzIGFwcCdzIGluaXRpYWxpemF0aW9uIHByb21pc2UgKEZJRCkgaW5zdGVhZCBvZiBhbGxcclxuICogaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqL1xyXG5jb25zdCBtZWFzdXJlbWVudElkVG9BcHBJZCA9IHt9O1xyXG4vKipcclxuICogTmFtZSBmb3Igd2luZG93IGdsb2JhbCBkYXRhIGxheWVyIGFycmF5IHVzZWQgYnkgR0E6IGRlZmF1bHRzIHRvICdkYXRhTGF5ZXInLlxyXG4gKi9cclxubGV0IGRhdGFMYXllck5hbWUgPSAnZGF0YUxheWVyJztcclxuLyoqXHJcbiAqIE5hbWUgZm9yIHdpbmRvdyBnbG9iYWwgZ3RhZyBmdW5jdGlvbiB1c2VkIGJ5IEdBOiBkZWZhdWx0cyB0byAnZ3RhZycuXHJcbiAqL1xyXG5sZXQgZ3RhZ05hbWUgPSAnZ3RhZyc7XHJcbi8qKlxyXG4gKiBSZXByb2R1Y3Rpb24gb2Ygc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiBvciByZWZlcmVuY2UgdG8gZXhpc3RpbmdcclxuICogZ3RhZyBmdW5jdGlvbiBvbiB3aW5kb3cgb2JqZWN0LlxyXG4gKi9cclxubGV0IGd0YWdDb3JlRnVuY3Rpb247XHJcbi8qKlxyXG4gKiBXcmFwcGVyIGFyb3VuZCBndGFnIGZ1bmN0aW9uIHRoYXQgZW5zdXJlcyBGSUQgaXMgc2VudCB3aXRoIGFsbFxyXG4gKiByZWxldmFudCBldmVudCBhbmQgY29uZmlnIGNhbGxzLlxyXG4gKi9cclxubGV0IHdyYXBwZWRHdGFnRnVuY3Rpb247XHJcbi8qKlxyXG4gKiBGbGFnIHRvIGVuc3VyZSBwYWdlIGluaXRpYWxpemF0aW9uIHN0ZXBzIChjcmVhdGlvbiBvciB3cmFwcGluZyBvZlxyXG4gKiBkYXRhTGF5ZXIgYW5kIGd0YWcgc2NyaXB0KSBhcmUgb25seSBydW4gb25jZSBwZXIgcGFnZSBsb2FkLlxyXG4gKi9cclxubGV0IGdsb2JhbEluaXREb25lID0gZmFsc2U7XHJcbi8qKlxyXG4gKiBDb25maWd1cmVzIEZpcmViYXNlIEFuYWx5dGljcyB0byB1c2UgY3VzdG9tIGBndGFnYCBvciBgZGF0YUxheWVyYCBuYW1lcy5cclxuICogSW50ZW5kZWQgdG8gYmUgdXNlZCBpZiBgZ3RhZy5qc2Agc2NyaXB0IGhhcyBiZWVuIGluc3RhbGxlZCBvblxyXG4gKiB0aGlzIHBhZ2UgaW5kZXBlbmRlbnRseSBvZiBGaXJlYmFzZSBBbmFseXRpY3MsIGFuZCBpcyB1c2luZyBub24tZGVmYXVsdFxyXG4gKiBuYW1lcyBmb3IgZWl0aGVyIHRoZSBgZ3RhZ2AgZnVuY3Rpb24gb3IgZm9yIGBkYXRhTGF5ZXJgLlxyXG4gKiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgZ2V0QW5hbHl0aWNzKClgIG9yIGl0IHdvbid0XHJcbiAqIGhhdmUgYW55IGVmZmVjdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEN1c3RvbSBndGFnIGFuZCBkYXRhTGF5ZXIgbmFtZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXR0aW5ncyhvcHRpb25zKSB7XHJcbiAgICBpZiAoZ2xvYmFsSW5pdERvbmUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBbmFseXRpY3NFcnJvci5BTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmRhdGFMYXllck5hbWUpIHtcclxuICAgICAgICBkYXRhTGF5ZXJOYW1lID0gb3B0aW9ucy5kYXRhTGF5ZXJOYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuZ3RhZ05hbWUpIHtcclxuICAgICAgICBndGFnTmFtZSA9IG9wdGlvbnMuZ3RhZ05hbWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiBubyBlbnZpcm9ubWVudCBtaXNtYXRjaCBpcyBmb3VuZC5cclxuICogSWYgZW52aXJvbm1lbnQgbWlzbWF0Y2hlcyBhcmUgZm91bmQsIHRocm93cyBhbiBJTlZBTElEX0FOQUxZVElDU19DT05URVhUXHJcbiAqIGVycm9yIHRoYXQgYWxzbyBsaXN0cyBkZXRhaWxzIGZvciBlYWNoIG1pc21hdGNoIGZvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gd2Fybk9uQnJvd3NlckNvbnRleHRNaXNtYXRjaCgpIHtcclxuICAgIGNvbnN0IG1pc21hdGNoZWRFbnZNZXNzYWdlcyA9IFtdO1xyXG4gICAgaWYgKGlzQnJvd3NlckV4dGVuc2lvbigpKSB7XHJcbiAgICAgICAgbWlzbWF0Y2hlZEVudk1lc3NhZ2VzLnB1c2goJ1RoaXMgaXMgYSBicm93c2VyIGV4dGVuc2lvbiBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxuICAgIGlmICghYXJlQ29va2llc0VuYWJsZWQoKSkge1xyXG4gICAgICAgIG1pc21hdGNoZWRFbnZNZXNzYWdlcy5wdXNoKCdDb29raWVzIGFyZSBub3QgYXZhaWxhYmxlLicpO1xyXG4gICAgfVxyXG4gICAgaWYgKG1pc21hdGNoZWRFbnZNZXNzYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZGV0YWlscyA9IG1pc21hdGNoZWRFbnZNZXNzYWdlc1xyXG4gICAgICAgICAgICAubWFwKChtZXNzYWdlLCBpbmRleCkgPT4gYCgke2luZGV4ICsgMX0pICR7bWVzc2FnZX1gKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgIGNvbnN0IGVyciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1hbmFseXRpY3MtY29udGV4dFwiIC8qIEFuYWx5dGljc0Vycm9yLklOVkFMSURfQU5BTFlUSUNTX0NPTlRFWFQgKi8sIHtcclxuICAgICAgICAgICAgZXJyb3JJbmZvOiBkZXRhaWxzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oZXJyLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbmFseXRpY3MgaW5zdGFuY2UgZmFjdG9yeS5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBmYWN0b3J5KGFwcCwgaW5zdGFsbGF0aW9ucywgb3B0aW9ucykge1xyXG4gICAgd2Fybk9uQnJvd3NlckNvbnRleHRNaXNtYXRjaCgpO1xyXG4gICAgY29uc3QgYXBwSWQgPSBhcHAub3B0aW9ucy5hcHBJZDtcclxuICAgIGlmICghYXBwSWQpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcC1pZFwiIC8qIEFuYWx5dGljc0Vycm9yLk5PX0FQUF9JRCAqLyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFwcC5vcHRpb25zLmFwaUtleSkge1xyXG4gICAgICAgIGlmIChhcHAub3B0aW9ucy5tZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaGUgXCJhcGlLZXlcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBUaGlzIGlzIG5lZWRlZCB0byBmZXRjaCB0aGUgbGF0ZXN0YCArXHJcbiAgICAgICAgICAgICAgICBgIG1lYXN1cmVtZW50IElEIGZvciB0aGlzIEZpcmViYXNlIGFwcC4gRmFsbGluZyBiYWNrIHRvIHRoZSBtZWFzdXJlbWVudCBJRCAke2FwcC5vcHRpb25zLm1lYXN1cmVtZW50SWR9YCArXHJcbiAgICAgICAgICAgICAgICBgIHByb3ZpZGVkIGluIHRoZSBcIm1lYXN1cmVtZW50SWRcIiBmaWVsZCBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcGkta2V5XCIgLyogQW5hbHl0aWNzRXJyb3IuTk9fQVBJX0tFWSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYXBwSWRdICE9IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktZXhpc3RzXCIgLyogQW5hbHl0aWNzRXJyb3IuQUxSRUFEWV9FWElTVFMgKi8sIHtcclxuICAgICAgICAgICAgaWQ6IGFwcElkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWdsb2JhbEluaXREb25lKSB7XHJcbiAgICAgICAgLy8gU3RlcHMgaGVyZSBzaG91bGQgb25seSBiZSBkb25lIG9uY2UgcGVyIHBhZ2U6IGNyZWF0aW9uIG9yIHdyYXBwaW5nXHJcbiAgICAgICAgLy8gb2YgZGF0YUxheWVyIGFuZCBnbG9iYWwgZ3RhZyBmdW5jdGlvbi5cclxuICAgICAgICBnZXRPckNyZWF0ZURhdGFMYXllcihkYXRhTGF5ZXJOYW1lKTtcclxuICAgICAgICBjb25zdCB7IHdyYXBwZWRHdGFnLCBndGFnQ29yZSB9ID0gd3JhcE9yQ3JlYXRlR3RhZyhpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgZGF0YUxheWVyTmFtZSwgZ3RhZ05hbWUpO1xyXG4gICAgICAgIHdyYXBwZWRHdGFnRnVuY3Rpb24gPSB3cmFwcGVkR3RhZztcclxuICAgICAgICBndGFnQ29yZUZ1bmN0aW9uID0gZ3RhZ0NvcmU7XHJcbiAgICAgICAgZ2xvYmFsSW5pdERvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gQXN5bmMgYnV0IG5vbi1ibG9ja2luZy5cclxuICAgIC8vIFRoaXMgbWFwIHJlZmxlY3RzIHRoZSBjb21wbGV0aW9uIHN0YXRlIG9mIGFsbCBwcm9taXNlcyBmb3IgZWFjaCBhcHBJZC5cclxuICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYXBwSWRdID0gX2luaXRpYWxpemVBbmFseXRpY3MoYXBwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgaW5zdGFsbGF0aW9ucywgZ3RhZ0NvcmVGdW5jdGlvbiwgZGF0YUxheWVyTmFtZSwgb3B0aW9ucyk7XHJcbiAgICBjb25zdCBhbmFseXRpY3NJbnN0YW5jZSA9IG5ldyBBbmFseXRpY3NTZXJ2aWNlKGFwcCk7XHJcbiAgICByZXR1cm4gYW5hbHl0aWNzSW5zdGFuY2U7XHJcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xyXG4vKipcclxuICogUmV0dXJucyBhbiB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZSBmb3IgdGhlIGdpdmVuIGFwcC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB0byB1c2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBbmFseXRpY3MoYXBwID0gZ2V0QXBwKCkpIHtcclxuICAgIGFwcCA9IGdldE1vZHVsYXJJbnN0YW5jZShhcHApO1xyXG4gICAgLy8gRGVwZW5kZW5jaWVzXHJcbiAgICBjb25zdCBhbmFseXRpY3NQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsIEFOQUxZVElDU19UWVBFKTtcclxuICAgIGlmIChhbmFseXRpY3NQcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICByZXR1cm4gYW5hbHl0aWNzUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHApO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gYXBwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IHRvIHVzZS5cclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBbmFseXRpY3MoYXBwLCBvcHRpb25zID0ge30pIHtcclxuICAgIC8vIERlcGVuZGVuY2llc1xyXG4gICAgY29uc3QgYW5hbHl0aWNzUHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCBBTkFMWVRJQ1NfVFlQRSk7XHJcbiAgICBpZiAoYW5hbHl0aWNzUHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IGFuYWx5dGljc1Byb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgYW5hbHl0aWNzUHJvdmlkZXIuZ2V0T3B0aW9ucygpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFuYWx5dGljc0Vycm9yLkFMUkVBRFlfSU5JVElBTElaRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGFuYWx5dGljc0luc3RhbmNlID0gYW5hbHl0aWNzUHJvdmlkZXIuaW5pdGlhbGl6ZSh7IG9wdGlvbnMgfSk7XHJcbiAgICByZXR1cm4gYW5hbHl0aWNzSW5zdGFuY2U7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgaXMgYSBwdWJsaWMgc3RhdGljIG1ldGhvZCBwcm92aWRlZCB0byB1c2VycyB0aGF0IHdyYXBzIGZvdXIgZGlmZmVyZW50IGNoZWNrczpcclxuICpcclxuICogMS4gQ2hlY2sgaWYgaXQncyBub3QgYSBicm93c2VyIGV4dGVuc2lvbiBlbnZpcm9ubWVudC5cclxuICogMi4gQ2hlY2sgaWYgY29va2llcyBhcmUgZW5hYmxlZCBpbiBjdXJyZW50IGJyb3dzZXIuXHJcbiAqIDMuIENoZWNrIGlmIEluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgZW52aXJvbm1lbnQuXHJcbiAqIDQuIENoZWNrIGlmIHRoZSBjdXJyZW50IGJyb3dzZXIgY29udGV4dCBpcyB2YWxpZCBmb3IgdXNpbmcgYEluZGV4ZWREQi5vcGVuKClgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcclxuICAgIGlmIChpc0Jyb3dzZXJFeHRlbnNpb24oKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICghYXJlQ29va2llc0VuYWJsZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgaXNEQk9wZW5hYmxlID0gYXdhaXQgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBpc0RCT3BlbmFibGU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVzZSBndGFnIGBjb25maWdgIGNvbW1hbmQgdG8gc2V0IGBzY3JlZW5fbmFtZWAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBsb2dFdmVudH0gd2l0aCBgZXZlbnROYW1lYCBhcyAnc2NyZWVuX3ZpZXcnIGFuZCBhZGQgcmVsZXZhbnQgYGV2ZW50UGFyYW1zYC5cclxuICogU2VlIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9hbmFseXRpY3Mvc2NyZWVudmlld3MgfCBUcmFjayBTY3JlZW52aWV3c30uXHJcbiAqXHJcbiAqIEBwYXJhbSBhbmFseXRpY3NJbnN0YW5jZSAtIFRoZSB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHNjcmVlbk5hbWUgLSBTY3JlZW4gbmFtZSB0byBzZXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuKGFuYWx5dGljc0luc3RhbmNlLCBzY3JlZW5OYW1lLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRDdXJyZW50U2NyZWVuJDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIHNjcmVlbk5hbWUsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEgdW5pcXVlIEdvb2dsZSBBbmFseXRpY3MgaWRlbnRpZmllciBmb3IgdGhlIHdlYiBjbGllbnQuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYW5hbHl0aWNzL2Rldmd1aWRlcy9jb2xsZWN0aW9uL2dhNC9yZWZlcmVuY2UvY29uZmlnI2NsaWVudF9pZCB8IGNsaWVudF9pZH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gdG8gdXNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0R29vZ2xlQW5hbHl0aWNzQ2xpZW50SWQoYW5hbHl0aWNzSW5zdGFuY2UpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHJldHVybiBpbnRlcm5hbEdldEdvb2dsZUFuYWx5dGljc0NsaWVudElkKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdKTtcclxufVxyXG4vKipcclxuICogVXNlIGd0YWcgYGNvbmZpZ2AgY29tbWFuZCB0byBzZXQgYHVzZXJfaWRgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhbmFseXRpY3NJbnN0YW5jZSAtIFRoZSB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGlkIC0gVXNlciBJRCB0byBzZXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRVc2VySWQoYW5hbHl0aWNzSW5zdGFuY2UsIGlkLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRVc2VySWQkMSh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgaWQsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogVXNlIGd0YWcgYGNvbmZpZ2AgY29tbWFuZCB0byBzZXQgYWxsIHBhcmFtcyBzcGVjaWZpZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldFVzZXJQcm9wZXJ0aWVzKGFuYWx5dGljc0luc3RhbmNlLCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRVc2VyUHJvcGVydGllcyQxKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBwcm9wZXJ0aWVzLCBvcHRpb25zKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgd2hldGhlciBHb29nbGUgQW5hbHl0aWNzIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBhcHAgb24gdGhpcyBkZXZpY2UuXHJcbiAqIFNldHMgZ2xvYmFsIGB3aW5kb3dbJ2dhLWRpc2FibGUtYW5hbHl0aWNzSWQnXSA9IHRydWU7YFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhbmFseXRpY3NJbnN0YW5jZSAtIFRoZSB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVuYWJsZWQgLSBJZiB0cnVlLCBlbmFibGVzIGNvbGxlY3Rpb24sIGlmIGZhbHNlLCBkaXNhYmxlcyBpdC5cclxuICovXHJcbmZ1bmN0aW9uIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkKGFuYWx5dGljc0luc3RhbmNlLCBlbmFibGVkKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCQxKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBlbmFibGVkKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgZGF0YSB0aGF0IHdpbGwgYmUgc2V0IG9uIGV2ZXJ5IGV2ZW50IGxvZ2dlZCBmcm9tIHRoZSBTREssIGluY2x1ZGluZyBhdXRvbWF0aWMgb25lcy5cclxuICogV2l0aCBndGFnJ3MgXCJzZXRcIiBjb21tYW5kLCB0aGUgdmFsdWVzIHBhc3NlZCBwZXJzaXN0IG9uIHRoZSBjdXJyZW50IHBhZ2UgYW5kIGFyZSBwYXNzZWQgd2l0aFxyXG4gKiBhbGwgc3Vic2VxdWVudCBldmVudHMuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIGN1c3RvbVBhcmFtcyAtIEFueSBjdXN0b20gcGFyYW1zIHRoZSB1c2VyIG1heSBwYXNzIHRvIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzKGN1c3RvbVBhcmFtcykge1xyXG4gICAgLy8gQ2hlY2sgaWYgcmVmZXJlbmNlIHRvIGV4aXN0aW5nIGd0YWcgZnVuY3Rpb24gb24gd2luZG93IG9iamVjdCBleGlzdHNcclxuICAgIGlmICh3cmFwcGVkR3RhZ0Z1bmN0aW9uKSB7XHJcbiAgICAgICAgd3JhcHBlZEd0YWdGdW5jdGlvbihcInNldFwiIC8qIEd0YWdDb21tYW5kLlNFVCAqLywgY3VzdG9tUGFyYW1zKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIF9zZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdChjdXN0b21QYXJhbXMpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZW5kcyBhIEdvb2dsZSBBbmFseXRpY3MgZXZlbnQgd2l0aCBnaXZlbiBgZXZlbnRQYXJhbXNgLiBUaGlzIG1ldGhvZFxyXG4gKiBhdXRvbWF0aWNhbGx5IGFzc29jaWF0ZXMgdGhpcyBsb2dnZWQgZXZlbnQgd2l0aCB0aGlzIEZpcmViYXNlIHdlYlxyXG4gKiBhcHAgaW5zdGFuY2Ugb24gdGhpcyBkZXZpY2UuXHJcbiAqIExpc3Qgb2Ygb2ZmaWNpYWwgZXZlbnQgcGFyYW1ldGVycyBjYW4gYmUgZm91bmQgaW4gdGhlIGd0YWcuanNcclxuICogcmVmZXJlbmNlIGRvY3VtZW50YXRpb246XHJcbiAqIHtAbGluayBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9ndGFnanMvcmVmZXJlbmNlL2dhNC1ldmVudHNcclxuICogfCB0aGUgR0E0IHJlZmVyZW5jZSBkb2N1bWVudGF0aW9ufS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbG9nRXZlbnQoYW5hbHl0aWNzSW5zdGFuY2UsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIGxvZ0V2ZW50JDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogU2V0cyB0aGUgYXBwbGljYWJsZSBlbmQgdXNlciBjb25zZW50IHN0YXRlIGZvciB0aGlzIHdlYiBhcHAgYWNyb3NzIGFsbCBndGFnIHJlZmVyZW5jZXMgb25jZVxyXG4gKiBGaXJlYmFzZSBBbmFseXRpY3MgaXMgaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIFVzZSB0aGUge0BsaW5rIENvbnNlbnRTZXR0aW5nc30gdG8gc3BlY2lmeSBpbmRpdmlkdWFsIGNvbnNlbnQgdHlwZSB2YWx1ZXMuIEJ5IGRlZmF1bHQgY29uc2VudFxyXG4gKiB0eXBlcyBhcmUgc2V0IHRvIFwiZ3JhbnRlZFwiLlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSBjb25zZW50U2V0dGluZ3MgLSBNYXBzIHRoZSBhcHBsaWNhYmxlIGVuZCB1c2VyIGNvbnNlbnQgc3RhdGUgZm9yIGd0YWcuanMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDb25zZW50KGNvbnNlbnRTZXR0aW5ncykge1xyXG4gICAgLy8gQ2hlY2sgaWYgcmVmZXJlbmNlIHRvIGV4aXN0aW5nIGd0YWcgZnVuY3Rpb24gb24gd2luZG93IG9iamVjdCBleGlzdHNcclxuICAgIGlmICh3cmFwcGVkR3RhZ0Z1bmN0aW9uKSB7XHJcbiAgICAgICAgd3JhcHBlZEd0YWdGdW5jdGlvbihcImNvbnNlbnRcIiAvKiBHdGFnQ29tbWFuZC5DT05TRU5UICovLCAndXBkYXRlJywgY29uc2VudFNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIF9zZXRDb25zZW50RGVmYXVsdEZvckluaXQoY29uc2VudFNldHRpbmdzKTtcclxuICAgIH1cclxufVxuXG5jb25zdCBuYW1lID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjEwLjFcIjtcblxuLyoqXHJcbiAqIFRoZSBGaXJlYmFzZSBBbmFseXRpY3MgV2ViIFNESy5cclxuICogVGhpcyBTREsgZG9lcyBub3Qgd29yayBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQuXHJcbiAqXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJBbmFseXRpY3MoKSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChBTkFMWVRJQ1NfVFlQRSwgKGNvbnRhaW5lciwgeyBvcHRpb25zOiBhbmFseXRpY3NPcHRpb25zIH0pID0+IHtcclxuICAgICAgICAvLyBnZXRJbW1lZGlhdGUgZm9yIEZpcmViYXNlQXBwIHdpbGwgYWx3YXlzIHN1Y2NlZWRcclxuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbGxhdGlvbnMgPSBjb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVyKCdpbnN0YWxsYXRpb25zLWludGVybmFsJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBmYWN0b3J5KGFwcCwgaW5zdGFsbGF0aW9ucywgYW5hbHl0aWNzT3B0aW9ucyk7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnYW5hbHl0aWNzLWludGVybmFsJywgaW50ZXJuYWxGYWN0b3J5LCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2VzbTIwMTcnKTtcclxuICAgIGZ1bmN0aW9uIGludGVybmFsRmFjdG9yeShjb250YWluZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhbmFseXRpY3MgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoQU5BTFlUSUNTX1RZUEUpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbG9nRXZlbnQ6IChldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSA9PiBsb2dFdmVudChhbmFseXRpY3MsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIEFuYWx5dGljc0Vycm9yLklOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxucmVnaXN0ZXJBbmFseXRpY3MoKTtcblxuZXhwb3J0IHsgZ2V0QW5hbHl0aWNzLCBnZXRHb29nbGVBbmFseXRpY3NDbGllbnRJZCwgaW5pdGlhbGl6ZUFuYWx5dGljcywgaXNTdXBwb3J0ZWQsIGxvZ0V2ZW50LCBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCwgc2V0Q29uc2VudCwgc2V0Q3VycmVudFNjcmVlbiwgc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycywgc2V0VXNlcklkLCBzZXRVc2VyUHJvcGVydGllcywgc2V0dGluZ3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJleHBvcnQgY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcbiAgYXBpS2V5OiBcIkFJemFTeUI4YzJsQlZpMjZ1N1lSTDlzeE9QOTdVYXEzeU44aFRsNFwiLFxyXG4gIGF1dGhEb21haW46IFwiZnRtLWI5ZDk5LmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vZnRtLWI5ZDk5LmZpcmViYXNlaW8uY29tXCIsXHJcbiAgcHJvamVjdElkOiBcImZ0bS1iOWQ5OVwiLFxyXG4gIHN0b3JhZ2VCdWNrZXQ6IFwiZnRtLWI5ZDk5LmFwcHNwb3QuY29tXCIsXHJcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNjAyNDAyMzg3OTQxXCIsXHJcbiAgYXBwSWQ6IFwiMTo2MDI0MDIzODc5NDE6d2ViOjNiZGQ1MDJiMGU3Y2U2Nzg5ZGUxMGNcIixcclxuICBtZWFzdXJlbWVudElkOiBcIkctWE5FN1kyNDM5VlwiLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBpbml0aWFsaXplQXBwLCBGaXJlYmFzZUFwcCB9IGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcclxuaW1wb3J0IHsgZ2V0QW5hbHl0aWNzLCBsb2dFdmVudCwgQW5hbHl0aWNzIH0gZnJvbSBcImZpcmViYXNlL2FuYWx5dGljc1wiO1xyXG5pbXBvcnQgeyBmaXJlYmFzZUNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpcmViYXNlQW5hbHl0aWNzTWFuYWdlciB7XHJcbiAgcHVibGljIHN0YXRpYyBpbnN0YW5jZTogRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyO1xyXG4gIHB1YmxpYyBmaXJlYmFzZUFwcDogRmlyZWJhc2VBcHA7XHJcbiAgcHVibGljIGZpcmViYXNlQW5hbHl0aWNzOiBBbmFseXRpY3M7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuZmlyZWJhc2VBcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuICAgICAgdGhpcy5maXJlYmFzZUFuYWx5dGljcyA9IGdldEFuYWx5dGljcyh0aGlzLmZpcmViYXNlQXBwKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBpbml0aWFsaXppbmcgRmlyZWJhc2U6XCIsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyIHtcclxuICAgIGlmICghRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyLmluc3RhbmNlKSB7XHJcbiAgICAgIEZpcmViYXNlQW5hbHl0aWNzTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBGaXJlYmFzZUFuYWx5dGljc01hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBGaXJlYmFzZUFuYWx5dGljc01hbmFnZXIuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbG9nRXZlbnRzKGV2ZW50TmFtZTogc3RyaW5nLCBldmVudDogb2JqZWN0KTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhgU2VuZGluZyBjdXN0b20gZXZlbnQgJHtldmVudE5hbWV9IHdpdGggZGF0YTpgLCBldmVudCk7XHJcbiAgICAgIGxvZ0V2ZW50KHRoaXMuZmlyZWJhc2VBbmFseXRpY3MsIGV2ZW50TmFtZSwgZXZlbnQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHdoaWxlIGxvZ2dpbmcgY3VzdG9tIGV2ZW50OlwiLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8vIE1haW4gRW50cnkgZm9yIHRoZSBDdXJpb3VzIFJlYWRlciBXZWIgUGxheWVyIEFwcFxyXG5pbXBvcnQgeyBDb250ZW50UGFyc2VyIH0gZnJvbSBcIi4vUGFyc2VyL0NvbnRlbnRQYXJzZXJcIjtcclxuaW1wb3J0IHsgUGxheUJhY2tFbmdpbmUgfSBmcm9tIFwiLi9QbGF5QmFja0VuZ2luZS9QbGF5QmFja0VuZ2luZVwiO1xyXG5pbXBvcnQgeyBXb3JrYm94LCBXb3JrYm94RXZlbnRNYXAgfSBmcm9tIFwid29ya2JveC13aW5kb3dcIjtcclxuaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL01vZGVscy9Nb2RlbHNcIjtcclxuaW1wb3J0IHsgRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyIH0gZnJvbSBcIi4vQW5hbHl0aWNzL0ZpcmViYXNlL0ZpcmViYXNlTWFuYWdlclwiO1xyXG5cclxubGV0IGFwcFZlcnNpb246IHN0cmluZyA9IFwidjAuMy4wXCI7XHJcblxyXG5jb25zdCBjaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoXCJteS1jaGFubmVsXCIpO1xyXG5cclxubGV0IGxvYWRpbmdTY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdTY3JlZW5cIik7XHJcblxyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuXHJcbiAgICBwdWJsaWMgYm9va05hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyBjb250ZW50UGFyc2VyOiBDb250ZW50UGFyc2VyO1xyXG4gICAgcHVibGljIHBsYXlCYWNrRW5naW5lOiBQbGF5QmFja0VuZ2luZTtcclxuICAgIHB1YmxpYyBjb250ZW50RmlsZVBhdGg6IHN0cmluZztcclxuICAgIHB1YmxpYyBpbWFnZXNQYXRoOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgYXVkaW9QYXRoOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgYnJvYWRjYXN0Q2hhbm5lbDogQnJvYWRjYXN0Q2hhbm5lbDtcclxuICAgIHB1YmxpYyBsYW5nOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgZmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyOiBGaXJlYmFzZUFuYWx5dGljc01hbmFnZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYm9va05hbWU6IHN0cmluZywgY29udGVudEZpbGVQYXRoOiBzdHJpbmcsIGltYWdlc1BhdGg6IHN0cmluZywgYXVkaW9QYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkN1cmlvdXMgUmVhZGVyIEFwcCBcIiArIGFwcFZlcnNpb24gKyBcIiBpbml0aWFsaXppbmchXCIpO1xyXG4gICAgICAgIHRoaXMuYm9va05hbWUgPSBib29rTmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRGaWxlUGF0aCA9IGNvbnRlbnRGaWxlUGF0aDtcclxuICAgICAgICB0aGlzLmltYWdlc1BhdGggPSBpbWFnZXNQYXRoO1xyXG4gICAgICAgIHRoaXMuYXVkaW9QYXRoID0gYXVkaW9QYXRoO1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyID0gRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50UGFyc2VyID0gbmV3IENvbnRlbnRQYXJzZXIoY29udGVudEZpbGVQYXRoKTtcclxuICAgICAgICB0aGlzLnBsYXlCYWNrRW5naW5lID0gbmV3IFBsYXlCYWNrRW5naW5lKGltYWdlc1BhdGgsIGF1ZGlvUGF0aCk7XHJcbiAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoXCJjci1tZXNzYWdlLWNoYW5uZWxcIik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBMb2FkIGFuZCBwYXJzZSB0aGUgYm9vayBkYXRhXHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCB0aGlzLmNvbnRlbnRQYXJzZXIucGFyc2VCb29rKCk7XHJcbiAgICAgICAgICAgIGJvb2suYm9va05hbWUgPSB0aGlzLmJvb2tOYW1lO1xyXG5cclxuICAgICAgICAgICAgLy8gTG9nIGJvb2sgaW5mb3JtYXRpb24gZm9yIGRlYnVnZ2luZ1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcCBpbml0aWFsaXplZCB3aXRoIGJvb2s6XCIsIGJvb2spO1xyXG5cclxuICAgICAgICAgICAgLy8gRW5mb3JjZSBsYW5kc2NhcGUgbW9kZSAoaWYgc3VwcG9ydGVkKVxyXG4gICAgICAgICAgICB0aGlzLmVuZm9yY2VMYW5kc2NhcGVNb2RlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZWdpc3RlciBhIHNlcnZpY2Ugd29ya2VyIGZvciBjYWNoaW5nXHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdGVyU2VydmljZVdvcmtlcihib29rKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHBsYXliYWNrIGVuZ2luZSB3aXRoIHRoZSBwYXJzZWQgYm9vayBkYXRhXHJcbiAgICAgICAgICAgIHRoaXMucGxheUJhY2tFbmdpbmUuaW5pdGlhbGl6ZUJvb2soYm9vayk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemF0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBhbnkgZXJyb3JzIHRoYXQgbWF5IG9jY3VyIGR1cmluZyBpbml0aWFsaXphdGlvblxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW5pdGlhbGl6YXRpb24gZXJyb3I6XCIsIGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGVuZm9yY2VMYW5kc2NhcGVNb2RlKCkge1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gZW5mb3JjZSBsYW5kc2NhcGUgbW9kZSB0aHJvdWdoIEFuZHJvaWQgYnJpZGdlIGNhbGxcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKHdpbmRvdy5BbmRyb2lkICYmIHR5cGVvZiB3aW5kb3cuQW5kcm9pZC5zZXRDb250YWluZXJBcHBPcmllbnRhdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgd2luZG93LkFuZHJvaWQuc2V0Q29udGFpbmVyQXBwT3JpZW50YXRpb24oXCJsYW5kc2NhcGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlZ2lzdGVyU2VydmljZVdvcmtlcihib29rOiBCb29rKSB7XHJcbiAgICAgICAgaWYgKFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvcikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdiID0gbmV3IFdvcmtib3goXCIvc3cuanNcIiwge30pO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgd2IucmVnaXN0ZXIoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5O1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGJvb2suYm9va05hbWUpID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nU2NyZWVuIS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJDYWNoZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5nOiB0aGlzLmxhbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29rRGF0YTogYm9vayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRGaWxlOiB0aGlzLmNvbnRlbnRGaWxlUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nU2NyZWVuIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ1JhcHA6IE1lc3NhZ2UgUmVjZWl2ZWQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmRhdGEuY29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuY29tbWFuZCA9PSBcIkFjdGl2YXRlZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0Q2hhbm5lbC5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBcIkNhY2hlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZzogdGhpcy5sYW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tEYXRhOiBib29rLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRGaWxlOiB0aGlzLmNvbnRlbnRGaWxlUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRsZVNlcnZpY2VXb3JrZXJNZXNzYWdlKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgUmVnaXN0ZXJpbmcgU2VydmljZSBXb3JrZXJcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UoZXZlbnQpOiB2b2lkIHtcclxuICAgIGlmIChldmVudC5kYXRhLm1zZyA9PSBcIkxvYWRpbmdcIikge1xyXG4gICAgICAgIGxldCBwcm9ncmVzc1ZhbHVlID0gcGFyc2VJbnQoZXZlbnQuZGF0YS5kYXRhLnByb2dyZXNzKTtcclxuICAgICAgICBoYW5kbGVMb2FkaW5nTWVzc2FnZShldmVudCwgcHJvZ3Jlc3NWYWx1ZSk7XHJcblxyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LmRhdGEubXNnID09IFwiVXBkYXRlRm91bmRcIikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiPj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4uLHVwZGF0ZSBGb3VuZFwiKTtcclxuICAgICAgICBoYW5kbGVVcGRhdGVGb3VuZE1lc3NhZ2UoKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTG9hZGluZ01lc3NhZ2UoZXZlbnQsIHByb2dyZXNzVmFsdWUpOiB2b2lkIHtcclxuICAgIGxldCBwcm9ncmVzc0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZ3Jlc3NCYXJcIik7XHJcbiAgICBpZiAocHJvZ3Jlc3NWYWx1ZSA8IDEwMCkge1xyXG4gICAgICAgIHByb2dyZXNzQmFyIS5zdHlsZS53aWR0aCA9IHByb2dyZXNzVmFsdWUgKyBcIiVcIjtcclxuICAgIH0gZWxzZSBpZiAocHJvZ3Jlc3NWYWx1ZSA+PSAxMDApIHtcclxuICAgICAgICBsb2FkaW5nU2NyZWVuIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgcmVhZExhbmd1YWdlRGF0YUZyb21DYWNoZUFuZE5vdGlmeUFuZHJvaWRBcHAoZXZlbnQuZGF0YS5kYXRhLmJvb2tOYW1lKTtcclxuICAgICAgICAvLyBhZGQgYm9vayB3aXRoIGEgbmFtZSB0byBsb2NhbCBzdG9yYWdlIGFzIGNhY2hlZFxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGV2ZW50LmRhdGEuZGF0YS5ib29rTmFtZSwgXCJ0cnVlXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkTGFuZ3VhZ2VEYXRhRnJvbUNhY2hlQW5kTm90aWZ5QW5kcm9pZEFwcChib29rTmFtZTogc3RyaW5nKSB7XHJcbiAgICAvL0B0cy1pZ25vcmVcclxuICAgIGlmICh3aW5kb3cuQW5kcm9pZCkge1xyXG4gICAgICAgIGxldCBpc0NvbnRlbnRDYWNoZWQ6IGJvb2xlYW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShib29rTmFtZSkgIT09IG51bGw7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgd2luZG93LkFuZHJvaWQuY2FjaGVkU3RhdHVzKGlzQ29udGVudENhY2hlZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVVwZGF0ZUZvdW5kTWVzc2FnZSgpOiB2b2lkIHtcclxuICAgIGxldCB0ZXh0ID0gXCJVcGRhdGUgRm91bmQuXFxuUGxlYXNlIGFjY2VwdCB0aGUgdXBkYXRlIGJ5IHByZXNzaW5nIE9rLlwiO1xyXG4gICAgaWYgKGNvbmZpcm0odGV4dCkgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGV4dCA9IFwiVXBkYXRlIHdpbGwgaGFwcGVuIG9uIHRoZSBuZXh0IGxhdW5jaC5cIjtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgcXVlcnlTdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xyXG5jb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5U3RyaW5nKTtcclxubGV0IGJvb2tOYW1lID0gdXJsUGFyYW1zLmdldChcImJvb2tcIik7XHJcblxyXG5jb25zdCBkZWZhdWx0Qm9va05hbWU6IHN0cmluZyA9IFwiTGV0c0ZseUxldmVsMkVuXCI7XHJcblxyXG5pZiAoYm9va05hbWUgPT0gbnVsbCkge1xyXG4gICAgYm9va05hbWUgPSBkZWZhdWx0Qm9va05hbWU7XHJcbn1cclxuXHJcbmNvbnNvbGUubG9nKFwiQm9vayBOYW1lOiBcIiArIGJvb2tOYW1lKTsgIFxyXG5cclxubGV0IGFwcDogQXBwID0gbmV3IEFwcChib29rTmFtZSwgYC9Cb29rQ29udGVudC8ke2Jvb2tOYW1lfS9jb250ZW50L2NvbnRlbnQuanNvbmAsXHJcbiAgICBgL0Jvb2tDb250ZW50LyR7Ym9va05hbWV9L2NvbnRlbnQvaW1hZ2VzL2AsXHJcbiAgICBgL0Jvb2tDb250ZW50LyR7Ym9va05hbWV9L2NvbnRlbnQvYXVkaW9zL2ApO1xyXG5cclxuYXBwLmluaXRpYWxpemUoKSJdLCJuYW1lcyI6WyJCb29rVHlwZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJDb250ZW50UGFyc2VyIiwiY29uc3RydWN0b3IiLCJjb250ZW50RmlsZVBhdGgiLCJlbXB0eUdsb3dJbWFnZVRhZyIsImFzeW5jIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwYXJzZUNvbnRlbnRKU09ORmlsZSIsInRoZW4iLCJjb250ZW50SlNPTiIsImNvbnNvbGUiLCJsb2ciLCJib29rIiwiYm9va05hbWUiLCJwYWdlcyIsImJvb2tUeXBlIiwiZGV0ZXJtaW5lQm9va1R5cGUiLCJwYXJzZVBhZ2VzIiwiY2F0Y2giLCJlcnJvciIsInVuZGVmaW5lZCIsIkN1cmlvdXNSZWFkZXIiLCJHREwiLCJVbmtub3duIiwicGFnZXNKU09OIiwiZ2xvYmFsRmlsbENvbG9yIiwiaSIsImxlbmd0aCIsInBhZ2VKU09OIiwicGFnZSIsInZpc3VhbEVsZW1lbnRzIiwiYmFja2dyb3VuZENvbG9yIiwicGFyc2VQYWdlQ1IiLCJwdXNoIiwicGFyc2VQYWdlR0RMIiwiZWxlbWVudHNKU09OIiwibGlicmFyeVN0cmluZyIsImluY2x1ZGVzIiwidGV4dEVsZW1lbnQiLCJwYXJzZVRleHRFbGVtZW50Q1IiLCJpbWFnZUVsZW1lbnQiLCJwYXJzZUltYWdlRWxlbWVudENSIiwiYXVkaW9FbGVtZW50IiwicGFyc2VBdWRpb0VsZW1lbnRDUiIsImVsZW1lbnRzSlNPTkFycmF5IiwicGFyc2VUZXh0RWxlbWVudEdETCIsInBhcnNlSW1hZ2VFbGVtZW50R0RMIiwiZWxlbWVudEpTT04iLCJ0eXBlIiwicG9zaXRpb25YIiwicG9zaXRpb25ZIiwid2lkdGgiLCJoZWlnaHQiLCJ0ZXh0Q29udGVudEFzSFRNTCIsIk5hTiIsInBhdGgiLCJkb21JRCIsImltYWdlU291cmNlIiwiYXVkaW9UaW1lc3RhbXBzIiwidGltZXN0YW1wcyIsInRpbWVzdGFtcHNKU09OQXJyYXkiLCJ0aW1lc3RhbXBJbmRleCIsInRpbWVzdGFtcEpTT04iLCJ0aW1lc3RhbXAiLCJ0b1N0cmluZyIsIndvcmQiLCJzdGFydFRpbWVzdGFtcCIsImVuZFRpbWVzdGFtcCIsImF1ZGlvU3JjIiwiZ2xvd0NvbG9yIiwic3R5bGVzIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwicmVzcG9uc2VUeXBlIiwib25sb2FkIiwic3RhdHVzIiwicmVzcG9uc2UiLCJzZW5kIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsIk1FRElBX1BSRUZFUlNfUkVEVUNFRF9NT1RJT04iLCJlbXB0eSIsImFycmF5Iiwic2xpY2UiLCJhcnJheUxpa2UiLCJzdGFydCIsImVuZCIsIkFycmF5IiwicHJvdG90eXBlIiwiY2FsbCIsImFwcGx5IiwiZnVuYyIsImJpbmQiLCJjb25jYXQiLCJhcmd1bWVudHMiLCJuZXh0VGljayIsInNldFRpbWVvdXQiLCJub29wIiwicmFmIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidHlwZU9mIiwic3ViamVjdCIsImlzT2JqZWN0IiwiaXNOdWxsIiwiaXNBcnJheSIsImlzRnVuY3Rpb24iLCJpc1N0cmluZyIsImlzVW5kZWZpbmVkIiwiaXNIVE1MRWxlbWVudCIsIm93bmVyRG9jdW1lbnQiLCJkZWZhdWx0VmlldyIsIkhUTUxFbGVtZW50IiwidG9BcnJheSIsInZhbHVlIiwiZm9yRWFjaCIsInZhbHVlcyIsIml0ZXJhdGVlIiwiaW5kZXhPZiIsIml0ZW1zIiwidG9nZ2xlQ2xhc3MiLCJlbG0iLCJjbGFzc2VzIiwiYWRkIiwibmFtZSIsImNsYXNzTGlzdCIsImFkZENsYXNzIiwic3BsaXQiLCJhcHBlbmQiLCJwYXJlbnQiLCJjaGlsZHJlbiIsImFwcGVuZENoaWxkIiwiYmVmb3JlIiwibm9kZXMiLCJyZWYiLCJub2RlIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIm1hdGNoZXMiLCJzZWxlY3RvciIsImNoaWxkcmVuMiIsImZpbHRlciIsImNoaWxkIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJvd25LZXlzIiwia2V5cyIsImZvck93biIsIm9iamVjdCIsInJpZ2h0IiwicmV2ZXJzZSIsInNvdXJjZSIsIm1lcmdlIiwib21pdCIsInJlbW92ZUF0dHJpYnV0ZSIsImVsbXMiLCJhdHRycyIsImF0dHIiLCJzZXRBdHRyaWJ1dGUiLCJ2YWx1ZTIiLCJTdHJpbmciLCJjcmVhdGUiLCJ0YWciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInByb3AiLCJnZXRDb21wdXRlZFN0eWxlIiwiZGlzcGxheSIsImRpc3BsYXkyIiwiZm9jdXMiLCJwcmV2ZW50U2Nyb2xsIiwiZ2V0QXR0cmlidXRlIiwiaGFzQ2xhc3MiLCJjbGFzc05hbWUiLCJjb250YWlucyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJyZW1vdmUiLCJyZW1vdmVDaGlsZCIsInBhcnNlSHRtbCIsImh0bWwiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJib2R5IiwicHJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0Iiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwicXVlcnkiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlQ2xhc3MiLCJ0aW1lT2YiLCJ0aW1lU3RhbXAiLCJ1bml0IiwiUFJPSkVDVF9DT0RFIiwiYXNzZXJ0IiwiY29uZGl0aW9uIiwibWVzc2FnZSIsIkVycm9yIiwibWluIiwiTWF0aCIsIm1heCIsImZsb29yIiwiY2VpbCIsImFicyIsImFwcHJveGltYXRlbHlFcXVhbCIsIngiLCJ5IiwiZXBzaWxvbiIsImJldHdlZW4iLCJudW1iZXIiLCJleGNsdXNpdmUiLCJtaW5pbXVtIiwibWF4aW11bSIsImNsYW1wIiwic2lnbiIsImZvcm1hdCIsInN0cmluZyIsInJlcGxhY2VtZW50cyIsInJlcGxhY2VtZW50IiwicmVwbGFjZSIsInBhZCIsImlkcyIsIkV2ZW50QmluZGVyIiwibGlzdGVuZXJzIiwiZm9yRWFjaEV2ZW50IiwidGFyZ2V0cyIsImV2ZW50cyIsImV2ZW50czIiLCJldmVudE5TIiwiZnJhZ21lbnQiLCJjYWxsYmFjayIsIm9wdGlvbnMiLCJldmVudCIsIm5hbWVzcGFjZSIsImlzRXZlbnRUYXJnZXQiLCJyZW1vdmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1bmJpbmQiLCJsaXN0ZW5lciIsImRpc3BhdGNoIiwiZGV0YWlsIiwiQ3VzdG9tRXZlbnQiLCJidWJibGVzIiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiZGVzdHJveSIsImRhdGEiLCJFVkVOVF9NT1VOVEVEIiwiRVZFTlRfUkVBRFkiLCJFVkVOVF9NT1ZFIiwiRVZFTlRfTU9WRUQiLCJFVkVOVF9DTElDSyIsIkVWRU5UX1JFRlJFU0giLCJFVkVOVF9VUERBVEVEIiwiRVZFTlRfUkVTSVpFIiwiRVZFTlRfUkVTSVpFRCIsIkVWRU5UX1NDUk9MTCIsIkVWRU5UX1NDUk9MTEVEIiwiRVZFTlRfREVTVFJPWSIsIkVWRU5UX05BVklHQVRJT05fTU9VTlRFRCIsIkVWRU5UX0FVVE9QTEFZX1BMQVkiLCJFVkVOVF9BVVRPUExBWV9QQVVTRSIsIkVWRU5UX0xBWllMT0FEX0xPQURFRCIsIkVWRU5UX0VORF9JTkRFWF9DSEFOR0VEIiwiRXZlbnRJbnRlcmZhY2UiLCJTcGxpZGUyIiwiYnVzIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImJpbmRlciIsIm9uIiwiam9pbiIsIm9mZiIsImVtaXQiLCJSZXF1ZXN0SW50ZXJ2YWwiLCJpbnRlcnZhbCIsIm9uSW50ZXJ2YWwiLCJvblVwZGF0ZSIsImxpbWl0Iiwic3RhcnRUaW1lIiwiaWQiLCJub3ciLCJEYXRlIiwicmF0ZSIsInBhdXNlZCIsImNvdW50IiwidXBkYXRlIiwicGF1c2UiLCJjYW5jZWwiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInJlc3VtZSIsInJld2luZCIsInNldCIsInRpbWUiLCJpc1BhdXNlZCIsIkFSUk9XX0xFRlQiLCJBUlJPVyIsIkFSUk9XX1JJR0hUIiwiQVJST1dfVVAiLCJBUlJPV19ET1dOIiwiVFRCIiwiT1JJRU5UQVRJT05fTUFQIiwibGVmdCIsIlgiLCJZIiwiQXJyb3dMZWZ0IiwiQXJyb3dSaWdodCIsIlJPTEUiLCJUQUJfSU5ERVgiLCJBUklBX0NPTlRST0xTIiwiQVJJQV9QUkVGSVgiLCJBUklBX0NVUlJFTlQiLCJBUklBX1NFTEVDVEVEIiwiQVJJQV9MQUJFTCIsIkFSSUFfTEFCRUxMRURCWSIsIkFSSUFfSElEREVOIiwiQVJJQV9PUklFTlRBVElPTiIsIkFSSUFfUk9MRURFU0NSSVBUSU9OIiwiQVJJQV9MSVZFIiwiQVJJQV9CVVNZIiwiQVJJQV9BVE9NSUMiLCJBTExfQVRUUklCVVRFUyIsIkNMQVNTX1JPT1QiLCJDTEFTU19UUkFDSyIsIkNMQVNTX1BSRUZJWCIsIkNMQVNTX1NMSURFIiwiQ0xBU1NfQ0xPTkUiLCJDTEFTU19BUlJPV1MiLCJDTEFTU19BUlJPVyIsIkNMQVNTX0FSUk9XX1BSRVYiLCJDTEFTU19BUlJPV19ORVhUIiwiQ0xBU1NfUEFHSU5BVElPTiIsIkNMQVNTX0FDVElWRSIsIlNUQVRVU19DTEFTU19QUkVGSVgiLCJDTEFTU19QUkVWIiwiQ0xBU1NfTkVYVCIsIkNMQVNTX1ZJU0lCTEUiLCJDTEFTU19MT0FESU5HIiwiQ0xBU1NfRk9DVVNfSU4iLCJDTEFTU19PVkVSRkxPVyIsIlNUQVRVU19DTEFTU0VTIiwiQ0xBU1NFUyIsInNsaWRlIiwiY2xvbmUiLCJhcnJvd3MiLCJhcnJvdyIsInByZXYiLCJuZXh0IiwicGFnaW5hdGlvbiIsInNwaW5uZXIiLCJQT0lOVEVSX01PVkVfRVZFTlRTIiwiUE9JTlRFUl9VUF9FVkVOVFMiLCJTTElERSIsIkxPT1AiLCJGQURFIiwiU0NST0xMX0xJU1RFTkVSX09QVElPTlMiLCJwYXNzaXZlIiwiY2FwdHVyZSIsIk5PUk1BTElaQVRJT05fTUFQIiwiU3BhY2ViYXIiLCJSaWdodCIsIkxlZnQiLCJVcCIsIkRvd24iLCJub3JtYWxpemVLZXkiLCJLRVlCT0FSRF9FVkVOVCIsIlNSQ19EQVRBX0FUVFJJQlVURSIsIkRBVEFfQVRUUklCVVRFIiwiU1JDU0VUX0RBVEFfQVRUUklCVVRFIiwiVFJJR0dFUl9LRVlTIiwiQ29tcG9uZW50Q29uc3RydWN0b3JzIiwiZnJlZXplIiwiX19wcm90b19fIiwiTWVkaWEiLCJDb21wb25lbnRzMiIsInN0YXRlIiwiYnJlYWtwb2ludHMiLCJyZWR1Y2VkTW90aW9uIiwicXVlcmllcyIsImNvbXBsZXRlbHkiLCJyZWdpc3RlciIsIm9wdGlvbnMyIiwicXVlcnlMaXN0IiwibWF0Y2hNZWRpYSIsImRlc3Ryb3llZCIsImlzIiwiZGlyZWN0aW9uIiwibWVyZ2VkIiwicmVkdWNlIiwibWVyZ2VkMiIsImVudHJ5IiwibW91bnQiLCJyZWZyZXNoIiwib3B0cyIsImJhc2UiLCJub3RpZnkiLCJnZXRQcm90b3R5cGVPZiIsInNldHVwIiwiaXNNaW4iLCJtZWRpYVF1ZXJ5Iiwic29ydCIsIm4iLCJtIiwiZW5hYmxlIiwiRGlyZWN0aW9uIiwiYXhpc09ubHkiLCJpbmRleCIsIm1hdGNoIiwib2Zmc2V0IiwidG9Mb3dlckNhc2UiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsIm9yaWVudCIsIkVsZW1lbnRzIiwidHJhY2siLCJsaXN0IiwiaXNVc2luZ0tleSIsIl9FdmVudEludGVyZmFjZSIsInJvb3QiLCJpMThuIiwiZWxlbWVudHMiLCJzbGlkZXMiLCJyb290Q2xhc3NlcyIsInRyYWNrQ2xhc3NlcyIsInByZWZpeCIsInJvbGUiLCJmaW5kIiwiYmFyIiwiQ0xBU1NfUFJPR1JFU1MiLCJ0b2dnbGUiLCJ0YWdOYW1lIiwiY2Fyb3VzZWwiLCJnZXRDbGFzc2VzIiwibGFiZWwiLCJsYWJlbGxlZGJ5IiwiZnJvbSIsImNsb3Nlc3QiLCJub2RlVHlwZSIsInBhcmVudEVsZW1lbnQiLCJkcmFnIiwiaXNOYXZpZ2F0aW9uIiwiUE9JTlRFUl9ET1dOX0VWRU5UUyIsIlNsaWRlcyIsIl9FdmVudEludGVyZmFjZTIiLCJfQ29tcG9uZW50czIkRWxlbWVudHMiLCJTbGlkZXMyIiwiaW5pdCIsImZvckVhY2gkMSIsIlNsaWRlMiIsInNsaWRlSW5kZXgiLCJDb21wb25lbnRzIiwidXBkYXRlT25Nb3ZlIiwic2xpZGVGb2N1cyIsImlzQ2xvbmUiLCJjb250YWluZXIiLCJpbml0TmF2aWdhdGlvbiIsImNvbnRyb2xzIiwic3BsaWRlcyIsIm1hcCIsInNwbGlkZSIsImdldEF0Iiwic2xpZGVYIiwib25Nb3ZlIiwiY3VyciIsImFjdGl2ZSIsImlzQWN0aXZlIiwic2VsZiIsInZpc2libGUiLCJ0cmFja1JlY3QiLCJzbGlkZVJlY3QiLCJpc1Zpc2libGUiLCJoaWRkZW4iLCJmb2N1c2FibGVOb2RlcyIsImFjdGl2ZUVsZW1lbnQiLCJ1cGRhdGVWaXNpYmlsaXR5IiwiY2xvbmVTdGF0dXMiLCJzbGlkZUxhYmVsIiwidXNlQ29udGFpbmVyIiwiaXNXaXRoaW4iLCJkaXN0YW5jZSIsImRpZmYiLCJTbGlkZSQxIiwiU2xpZGUxIiwiZ2V0IiwiZXhjbHVkZUNsb25lcyIsIm1hdGNoZXIiLCJnZXRJbiIsIkNvbnRyb2xsZXIiLCJ0b0luZGV4IiwiaGFzRm9jdXMiLCJwZXJQYWdlIiwiaW1hZ2VzIiwiaW1nIiwiZ2V0TGVuZ3RoIiwiaXNFbm91Z2giLCJMYXlvdXQiLCJ2ZXJ0aWNhbCIsInJvb3RSZWN0Iiwib3ZlcmZsb3ciLCJfRXZlbnRJbnRlcmZhY2UzIiwiX0NvbXBvbmVudHMyJEVsZW1lbnRzMiIsInN0eWxlU2xpZGVzIiwiY3NzUGFkZGluZyIsInJlc2l6ZSIsImZvcmNlIiwibmV3UmVjdCIsImNzc0hlaWdodCIsImdhcCIsImF1dG9XaWR0aCIsImZpeGVkV2lkdGgiLCJjc3NTbGlkZVNpemUiLCJmaXhlZEhlaWdodCIsImF1dG9IZWlnaHQiLCJpc092ZXJmbG93IiwicGFkZGluZyIsImhlaWdodFJhdGlvIiwibGlzdFNpemUiLCJzbGlkZVNpemUiLCJ3aXRob3V0R2FwIiwiU2xpZGUiLCJnZXRHYXAiLCJ0b3RhbFNpemUiLCJzbGlkZXJTaXplIiwicGFyc2VGbG9hdCIsImdldFBhZGRpbmciLCJDbG9uZXMiLCJjbG9uZUNvdW50IiwiY2xvbmVzIiwicmVtb3VudCIsIm9ic2VydmUiLCJjb21wdXRlQ2xvbmVDb3VudCIsImlzSGVhZCIsImNsb25lTm9kZSIsImNsb25lRGVlcCIsImdlbmVyYXRlIiwiY2xvbmVzMiIsImZpeGVkU2l6ZSIsIk1vdmUiLCJUcmFuc2l0aW9uIiwiX0V2ZW50SW50ZXJmYWNlNCIsIl9Db21wb25lbnRzMiRMYXlvdXQiLCJfQ29tcG9uZW50czIkRGlyZWN0aW8iLCJfQ29tcG9uZW50czIkRWxlbWVudHMzIiwicmVwb3NpdGlvbiIsImlzQnVzeSIsIlNjcm9sbCIsImp1bXAiLCJ0cmFuc2xhdGUiLCJ0b1Bvc2l0aW9uIiwicG9zaXRpb24iLCJwcmV2ZW50TG9vcCIsImRlc3RpbmF0aW9uIiwiZXhjZWVkZWRNYXgiLCJnZXRFbmQiLCJzaGlmdCIsImxvb3AiLCJiYWNrd2FyZHMiLCJleGNlc3MiLCJnZXRMaW1pdCIsInNpemUiLCJnZXRQb3NpdGlvbiIsIm1pbkRpc3RhbmNlIiwiSW5maW5pdHkiLCJ0cmltbWluZyIsInRyaW1TcGFjZSIsInRyaW0iLCJtb3ZlIiwiZGVzdCIsInNoaWZ0ZWQiLCJleGNlZWRlZExpbWl0IiwiZXhjZWVkZWRNaW4iLCJlbmRJbmRleCIsInNsaWRlQ291bnQiLCJwZXJNb3ZlIiwiX0V2ZW50SW50ZXJmYWNlNSIsIl9Db21wb25lbnRzMiRTbGlkZXMiLCJvbWl0RW5kIiwiaXNMb29wIiwiaXNTbGlkZSIsImdldE5leHQiLCJnZXRBZGphY2VudCIsImdldFByZXYiLCJjdXJySW5kZXgiLCJwcmV2SW5kZXgiLCJvblJlc2l6ZWQiLCJjb21wdXRlRGVzdEluZGV4Iiwic25hcFBhZ2UiLCJjb21wdXRlTW92YWJsZURlc3RJbmRleCIsInRvUGFnZSIsInNldEluZGV4Iiwid2FpdEZvclRyYW5zaXRpb24iLCJnbyIsImNvbnRyb2wiLCJhbGxvd1NhbWVJbmRleCIsIl9yZWYiLCJpbmRpY2F0b3IiLCJwYXJzZSIsInNjcm9sbCIsImR1cmF0aW9uIiwic25hcCIsImdldEluZGV4IiwidG9EZXN0IiwiQXJyb3dzIiwiY3JlYXRlZCIsIndyYXBwZXJDbGFzc2VzIiwicGxhY2Vob2xkZXIiLCJ3cmFwcGVyIiwiZW5hYmxlZCIsImNyZWF0ZUFycm93IiwicHJldjIiLCJhcnJvd1BhdGgiLCJuZXh0SW5kZXgiLCJwcmV2TGFiZWwiLCJsYXN0IiwibmV4dExhYmVsIiwiZmlyc3QiLCJkaXNhYmxlZCIsIkF1dG9wbGF5IiwiaG92ZXJlZCIsImZvY3VzZWQiLCJfRXZlbnRJbnRlcmZhY2U2IiwiX0NvbXBvbmVudHMyJEVsZW1lbnRzNCIsImF1dG9wbGF5Iiwic3RvcHBlZCIsInBsYXkiLCJyZXNldFByb2dyZXNzIiwic3RvcCIsImF1dG9Ub2dnbGUiLCJwYXVzZU9uSG92ZXIiLCJwYXVzZU9uRm9jdXMiLCJDb3ZlciIsImNvdmVyIiwiY292ZXIyIiwic3JjIiwiX0V2ZW50SW50ZXJmYWNlOCIsImZyaWN0aW9uIiwib25TY3JvbGxlZCIsIm5vQ29uc3RyYWluIiwiY2xlYXIiLCJub0Rpc3RhbmNlIiwib25FbmQiLCJ0byIsInQiLCJlYXNpbmdGdW5jIiwicG93IiwiZWFzaW5nIiwiRHJhZyIsImJhc2VQb3NpdGlvbiIsImJhc2VFdmVudCIsInByZXZCYXNlRXZlbnQiLCJpc0ZyZWUiLCJkcmFnZ2luZyIsImNsaWNrUHJldmVudGVkIiwiX0V2ZW50SW50ZXJmYWNlOSIsIl9Db21wb25lbnRzMiREaXJlY3RpbzIiLCJleGNlZWRlZCIsImRpc2FibGUiLCJvblBvaW50ZXJEb3duIiwiaXNUb3VjaCIsImlzVG91Y2hFdmVudCIsInRhcmdldDIiLCJub0RyYWciLCJidXR0b24iLCJvblBvaW50ZXJNb3ZlIiwib25Qb2ludGVyVXAiLCJzYXZlIiwiY2FuY2VsYWJsZSIsImRpZmZDb29yZCIsImV4cGlyZWQiLCJkaWZmVGltZSIsImhhc0V4Y2VlZGVkIiwiaXNTbGlkZXJEaXJlY3Rpb24iLCJ0aHJlc2hvbGRzIiwiZHJhZ01pblRocmVzaG9sZCIsImlzT2JqIiwibW91c2UiLCJ0b3VjaCIsInNob3VsZFN0YXJ0IiwidmVsb2NpdHkiLCJjb21wdXRlVmVsb2NpdHkiLCJmbGlja1Bvd2VyIiwiZmxpY2tNYXhQYWdlcyIsImNvbXB1dGVEZXN0aW5hdGlvbiIsInJld2luZEJ5RHJhZyIsIm9uQ2xpY2siLCJvcnRob2dvbmFsIiwiY29vcmRPZiIsImdldEJhc2VFdmVudCIsImNoYW5nZWRUb3VjaGVzIiwiVG91Y2hFdmVudCIsImlzRHJhZ2dpbmciLCJLZXlib2FyZCIsIl9FdmVudEludGVyZmFjZTEwIiwia2V5Ym9hcmQiLCJvbktleWRvd24iLCJfZGlzYWJsZWQiLCJMYXp5TG9hZCIsIl9FdmVudEludGVyZmFjZTExIiwiaXNTZXF1ZW50aWFsIiwibGF6eUxvYWQiLCJlbnRyaWVzIiwic3Jjc2V0IiwibG9hZE5leHQiLCJjaGVjayIsInByZWxvYWRQYWdlcyIsImxvYWQiLCJvbkxvYWQiLCJQYWdpbmF0aW9uIiwicGFnaW5hdGlvbkNsYXNzZXMiLCJkaXIiLCJnZXREaXJlY3Rpb24iLCJuZXh0UGFnZSIsIml0ZW0iLCJwYWdpbmF0aW9uRGlyZWN0aW9uIiwiX2J1dHRvbiIsInNlbGVjdCIsImxpIiwiY2xhc3MiLCJ0ZXh0IiwicGFnZVgiLCJwYWdpbmF0aW9uS2V5Ym9hcmQiLCJjcmVhdGVQYWdpbmF0aW9uIiwiU3luYyIsImlzUGFyZW50Iiwic3luYyIsIldoZWVsIiwibGFzdFRpbWUiLCJvbldoZWVsIiwiZGVsdGFZIiwiX21pbiIsIndoZWVsTWluVGhyZXNob2xkIiwic2xlZXAiLCJ3aGVlbFNsZWVwIiwicmVsZWFzZVdoZWVsIiwic2hvdWxkUHJldmVudCIsIndoZWVsIiwiTGl2ZSIsImxpdmUiLCJzciIsInRleHRDb250ZW50IiwiREVGQVVMVFMiLCJzcGVlZCIsInJld2luZFNwZWVkIiwiRmFkZSIsImRvbmUiLCJlbmRDYWxsYmFjayIsInRyYW5zaXRpb24iLCJnZXRTcGVlZCIsInVzZVNjcm9sbCIsIl9TcGxpZGUiLCJzdGF0ZXMiLCJfbyIsIl9FIiwiZGVmYXVsdHMiLCJKU09OIiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwiX3Byb3RvIiwiRXh0ZW5zaW9ucyIsIl90aGlzIiwiX0MiLCJfVCIsIkNvbXBvbmVudCIsImNvbXBvbmVudCIsIl90aGlzJGV2ZW50IiwiU3BsaWRlIiwiU1RBVEVTIiwiQ1JFQVRFRCIsIk1PVU5URUQiLCJJRExFIiwiTU9WSU5HIiwiU0NST0xMSU5HIiwiRFJBR0dJTkciLCJERVNUUk9ZRUQiLCJQbGF5QmFja0VuZ2luZSIsImltYWdlc1BhdGgiLCJhdWRpb1BhdGgiLCJjdXJyZW50bHlQbGF5aW5nQXVkaW9FbGVtZW50IiwiY3VycmVudGx5QWN0aXZlR2xvd0ltYWdlcyIsImN1cnJlbnRseUFjdGl2ZVdvcmQiLCJjdXJyZW50UGFnZSIsInNwbGlkZUhhbmRsZSIsImlubmVySGVpZ2h0IiwibmV3SW5kZXgiLCJvbGRJbmRleCIsImRlc3RJbmRleCIsInRyYW5zaXRpb25pbmdUb1BhZ2UiLCJzdG9wUGFnZUF1ZGlvIiwiY3VycmVudEluZGV4IiwicGxheVBhZ2VBdWRpbyIsImFkZFBhZ2VSZXNpemVMaXN0ZW5lciIsInZpc3VhbEVsZW1lbnQiLCJhdWRpb0VsZW1lbnREb20iLCJnZXRFbGVtZW50QnlJZCIsImN1cnJlbnRUaW1lIiwiY2xlYXJJbnRlcnZhbCIsImN1cnJlbnRQYWdlQXV0b1BsYXllckludGVydmFsIiwiaiIsInBhZ2VJbmRleCIsImxhc3RXb3JkSW5kZXgiLCJzZXRJbnRlcnZhbCIsIndvcmRFbGVtZW50IiwiY29sb3IiLCJlbmFibGVDb25uZWN0ZWRHcmFwaGljSGlnaGxpZ2h0aW5nIiwiaW5pdGlhbGl6ZUJvb2siLCJjdXJyZW50Qm9va1R5cGUiLCJudW1iZXJPZlBhZ2VzIiwiaW5pdGlhbGl6ZUN1cmlvdXNSZWFkZXJCb29rIiwiaW5pdGlhbGl6ZUdETEJvb2siLCJzbGlkZUxpIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwic2VudGVuY2VJbml0aWFsaXplZEJ5QXVkaW8iLCJjcmVhdGVJbWFnZUNvbnRhaW5lciIsImF1ZGlvQW5kVGV4dERpdnMiLCJjcmVhdGVBdWRpb0FuZFRleHRDb250YWluZXJzIiwiY3JlYXRlQXVkaW9Db250YWluZXIiLCJjcmVhdGVUZXh0Q29udGFpbmVyIiwidGV4dEVsZW1lbnREaXYiLCJ3ZWJraXRUZXh0U3Ryb2tlIiwidGV4dFNoYWRvdyIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFNpemUiLCJ0b3AiLCJpbm5lckhUTUwiLCJlbGVtZW50SW5kZXgiLCJpbWFnZUVsZW1lbnREaXYiLCJoYW5kbGVTdGFuZGFsb25lR2xvd0ltYWdlQ2xpY2siLCJoYW5kbGVHbG93SW1hZ2VDbGljayIsImltYWdlRWxlbWVudEltZyIsImF1ZGlvRWxlbWVudERpdiIsInBhZ2VBdWRpbyIsIndvcmRUaW1lc3RhbXBFbGVtZW50Iiwid29yZEF1ZGlvRWxlbWVudCIsImF1ZGlvQW5kVGV4dEFycmF5Iiwic2VudGVuY2VBcnJheVRyaW1tZWQiLCJhdWRpb0NvbnRlbnRET01JZCIsInNlbnRlbmNlUGFyYWdyYXBoIiwidGV4dEFsaWduIiwibWFyZ2luIiwiY2xpY2thYmxlV29yZEVsZW1lbnQiLCJtYXJnaW5MZWZ0IiwibWFyZ2luUmlnaHQiLCJpbm5lclRleHQiLCJldiIsImhhbmRsZUludGVyYWN0aXZlV29yZENsaWNrIiwiY2xlYXJUaW1lb3V0IiwiY3VycmVudFdvcmRQbGF5aW5nVGltZW91dCIsImN1cnJlbnRHbG93SW1hZ2VUaW1lb3V0IiwiYm94U2hhZG93IiwiZ2xvd0RpdiIsIndvcmRJbmRleCIsIndvcmRJbmRleE51bWJlciIsInBhcnNlSW50IiwiZ2xvd0ltYWdlT25seSIsImNvbm5lY3RlZEdsb3dJbWFnZUNsYXNzIiwiY29ubmVjdGVkR2xvd0ltYWdlcyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJmbGV4Q29udGFpbmVyIiwiZmxleERpcmVjdGlvbiIsImdvVG9OZXh0UGFnZSIsInRyYW5zaXRpb25Ub1BhZ2UiLCJnb1RvUHJldmlvdXNQYWdlIiwicGFnZU51bWJlciIsIl8iLCJyIiwiTWVzc2FnZUNoYW5uZWwiLCJwb3J0MSIsIm9ubWVzc2FnZSIsInBvc3RNZXNzYWdlIiwicG9ydDIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInRlc3QiLCJUeXBlRXJyb3IiLCJwcm9taXNlIiwibyIsImxvY2F0aW9uIiwiaHJlZiIsIlVSTCIsInUiLCJhc3NpZ24iLCJhIiwiYyIsImYiLCJzIiwidiIsIm5uIiwidG4iLCJybiIsImVuIiwidW4iLCJhbiIsIlNldCIsImNuIiwiZm4iLCJpbnN0YWxsaW5nIiwic2NyaXB0VVJMIiwic24iLCJwZXJmb3JtYW5jZSIsInZuIiwiaG4iLCJsbiIsInN3IiwiaXNFeHRlcm5hbCIsIm9yaWdpbmFsRXZlbnQiLCJtbiIsImlzVXBkYXRlIiwid24iLCJ3YWl0aW5nIiwiZG4iLCJuYXZpZ2F0b3IiLCJzZXJ2aWNlV29ya2VyIiwiY29udHJvbGxlciIsImduIiwicG9ydHMiLCJnZXRTVyIsImhhcyIsImwiLCJ3IiwiaW1tZWRpYXRlIiwicmVhZHlTdGF0ZSIsIkJvb2xlYW4iLCJ5biIsInBuIiwiYm4iLCJvbmNlIiwid2FzV2FpdGluZ0JlZm9yZVJlZ2lzdGVyIiwibWVzc2FnZVNXIiwibWVzc2FnZVNraXBXYWl0aW5nIiwiUG4iLCJNYXAiLCJTbiIsImRlbGV0ZSIsInN0cmluZ1RvQnl0ZUFycmF5JDEiLCJzdHIiLCJvdXQiLCJwIiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkVOQ09ERURfVkFMUyIsIkVOQ09ERURfVkFMU19XRUJTQUZFIiwiSEFTX05BVElWRV9TVVBQT1JUIiwiYXRvYiIsImVuY29kZUJ5dGVBcnJheSIsImlucHV0Iiwid2ViU2FmZSIsImluaXRfIiwiYnl0ZVRvQ2hhck1hcCIsIm91dHB1dCIsImJ5dGUxIiwiaGF2ZUJ5dGUyIiwiYnl0ZTIiLCJoYXZlQnl0ZTMiLCJieXRlMyIsIm91dEJ5dGUxIiwib3V0Qnl0ZTIiLCJvdXRCeXRlMyIsIm91dEJ5dGU0IiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJmcm9tQ2hhckNvZGUiLCJjMiIsImMzIiwiYnl0ZUFycmF5VG9TdHJpbmciLCJkZWNvZGVTdHJpbmdUb0J5dGVBcnJheSIsImNoYXJUb0J5dGVNYXAiLCJieXRlNCIsIkRlY29kZUJhc2U2NFN0cmluZ0Vycm9yIiwic3VwZXIiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsImdldERlZmF1bHRzIiwiZ2V0R2xvYmFsIiwiX19GSVJFQkFTRV9ERUZBVUxUU19fIiwicHJvY2VzcyIsImVudiIsImRlZmF1bHRzSnNvblN0cmluZyIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwiY29va2llIiwiZGVjb2RlZCIsImJhc2U2NERlY29kZSIsImdldERlZmF1bHRzRnJvbUNvb2tpZSIsImluZm8iLCJnZXREZWZhdWx0QXBwQ29uZmlnIiwiX2EiLCJjb25maWciLCJEZWZlcnJlZCIsIndyYXBDYWxsYmFjayIsImluZGV4ZWREQiIsInByZUV4aXN0IiwiREJfQ0hFQ0tfTkFNRSIsInJlcXVlc3QiLCJvbnN1Y2Nlc3MiLCJyZXN1bHQiLCJjbG9zZSIsImRlbGV0ZURhdGFiYXNlIiwib251cGdyYWRlbmVlZGVkIiwib25lcnJvciIsIkZpcmViYXNlRXJyb3IiLCJjb2RlIiwiY3VzdG9tRGF0YSIsInNldFByb3RvdHlwZU9mIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsInJlcGxhY2VUZW1wbGF0ZSIsImZ1bGxNZXNzYWdlIiwiZGVlcEVxdWFsIiwiYiIsImFLZXlzIiwiYktleXMiLCJrIiwiYVByb3AiLCJiUHJvcCIsInRoaW5nIiwiY2FsY3VsYXRlQmFja29mZk1pbGxpcyIsImJhY2tvZmZDb3VudCIsImludGVydmFsTWlsbGlzIiwiYmFja29mZkZhY3RvciIsImN1cnJCYXNlVmFsdWUiLCJyYW5kb21XYWl0Iiwicm91bmQiLCJyYW5kb20iLCJfZGVsZWdhdGUiLCJpbnN0YW5jZUZhY3RvcnkiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsIm1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJpbnN0YW5jZXMiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJkZWZlcnJlZCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImluc3RhbmNlIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsImdldEltbWVkaWF0ZSIsIm9wdGlvbmFsIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJjbGVhckluc3RhbmNlIiwic2VydmljZXMiLCJhbGwiLCJJTlRFUk5BTCIsIl9kZWxldGUiLCJpc0NvbXBvbmVudFNldCIsImdldE9wdGlvbnMiLCJpbml0aWFsaXplIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwidG9JU09TdHJpbmciLCJtZXRob2QiLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJ3YXJuIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwicmVjZWl2ZXIiLCJJREJUcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJvYmplY3RTdG9yZSIsInRyYW5zZm9ybUNhY2hhYmxlVmFsdWUiLCJJREJEYXRhYmFzZSIsInRyYW5zYWN0aW9uIiwiSURCQ3Vyc29yIiwiYWR2YW5jZSIsImNvbnRpbnVlIiwiY29udGludWVQcmltYXJ5S2V5IiwidW53cmFwIiwic3RvcmVOYW1lcyIsInR4IiwidW5saXN0ZW4iLCJjb21wbGV0ZSIsIkRPTUV4Y2VwdGlvbiIsImNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbiIsIklEQk9iamVjdFN0b3JlIiwiSURCSW5kZXgiLCJzb21lIiwiUHJveHkiLCJJREJSZXF1ZXN0Iiwic3VjY2VzcyIsInByb21pc2lmeVJlcXVlc3QiLCJuZXdWYWx1ZSIsIm9wZW5EQiIsInZlcnNpb24iLCJibG9ja2VkIiwidXBncmFkZSIsImJsb2NraW5nIiwidGVybWluYXRlZCIsIm9wZW5Qcm9taXNlIiwib2xkVmVyc2lvbiIsIm5ld1ZlcnNpb24iLCJkYiIsInJlYWRNZXRob2RzIiwid3JpdGVNZXRob2RzIiwiY2FjaGVkTWV0aG9kcyIsImdldE1ldGhvZCIsInRhcmdldEZ1bmNOYW1lIiwidXNlSW5kZXgiLCJpc1dyaXRlIiwic3RvcmVOYW1lIiwic3RvcmUiLCJvbGRUcmFwcyIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJsaWJyYXJ5IiwibG9nU3RyaW5nIiwibmFtZSRvIiwidmVyc2lvbiQxIiwibG9nZ2VyIiwiUExBVEZPUk1fTE9HX1NUUklORyIsIl9hcHBzIiwiX2NvbXBvbmVudHMiLCJfYWRkQ29tcG9uZW50IiwiYXBwIiwiX3JlZ2lzdGVyQ29tcG9uZW50IiwiY29tcG9uZW50TmFtZSIsImhlYXJ0YmVhdENvbnRyb2xsZXIiLCJ0cmlnZ2VySGVhcnRiZWF0IiwiRVJST1JfRkFDVE9SWSIsIkZpcmViYXNlQXBwSW1wbCIsIl9pc0RlbGV0ZWQiLCJfb3B0aW9ucyIsIl9jb25maWciLCJfbmFtZSIsIl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJfY29udGFpbmVyIiwiY2hlY2tEZXN0cm95ZWQiLCJpc0RlbGV0ZWQiLCJhcHBOYW1lIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwicmVnaXN0ZXJWZXJzaW9uIiwibGlicmFyeUtleU9yTmFtZSIsInZhcmlhbnQiLCJsaWJyYXJ5TWlzbWF0Y2giLCJ2ZXJzaW9uTWlzbWF0Y2giLCJ3YXJuaW5nIiwiU1RPUkVfTkFNRSIsImRiUHJvbWlzZSIsImdldERiUHJvbWlzZSIsImNyZWF0ZU9iamVjdFN0b3JlIiwib3JpZ2luYWxFcnJvck1lc3NhZ2UiLCJ3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQiIsImhlYXJ0YmVhdE9iamVjdCIsInB1dCIsImNvbXB1dGVLZXkiLCJpZGJHZXRFcnJvciIsImFwcElkIiwiSGVhcnRiZWF0U2VydmljZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlIiwiX3N0b3JhZ2UiLCJIZWFydGJlYXRTdG9yYWdlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlIiwicmVhZCIsIl9iIiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImhlYXJ0YmVhdHMiLCJsYXN0U2VudEhlYXJ0YmVhdERhdGUiLCJzaW5nbGVEYXRlSGVhcnRiZWF0IiwiaGJUaW1lc3RhbXAiLCJ2YWx1ZU9mIiwib3ZlcndyaXRlIiwiaGVhcnRiZWF0c1RvU2VuZCIsInVuc2VudEVudHJpZXMiLCJoZWFydGJlYXRzQ2FjaGUiLCJtYXhTaXplIiwiaGVhcnRiZWF0RW50cnkiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwic3RyaW5naWZ5Iiwic3Vic3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwiaWRiSGVhcnRiZWF0T2JqZWN0IiwicmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCIiwiaGVhcnRiZWF0c09iamVjdCIsImV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCIsIlBBQ0tBR0VfVkVSU0lPTiIsImlzU2VydmVyRXJyb3IiLCJnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQiLCJwcm9qZWN0SWQiLCJleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZSIsInRva2VuIiwicmVxdWVzdFN0YXR1cyIsImV4cGlyZXNJbiIsInJlc3BvbnNlRXhwaXJlc0luIiwiTnVtYmVyIiwiY3JlYXRpb25UaW1lIiwiZ2V0RXJyb3JGcm9tUmVzcG9uc2UiLCJyZXF1ZXN0TmFtZSIsImVycm9yRGF0YSIsImpzb24iLCJzZXJ2ZXJDb2RlIiwic2VydmVyTWVzc2FnZSIsInNlcnZlclN0YXR1cyIsImdldEhlYWRlcnMiLCJhcGlLZXkiLCJIZWFkZXJzIiwiQWNjZXB0IiwicmV0cnlJZlNlcnZlckVycm9yIiwibXMiLCJWQUxJRF9GSURfUEFUVEVSTiIsImdlbmVyYXRlRmlkIiwiZmlkQnl0ZUFycmF5IiwiVWludDhBcnJheSIsImNyeXB0byIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiZmlkIiwic3Vic3RyIiwiZW5jb2RlIiwiZ2V0S2V5IiwiYXBwQ29uZmlnIiwiZmlkQ2hhbmdlQ2FsbGJhY2tzIiwiZmlkQ2hhbmdlZCIsImNhbGxGaWRDaGFuZ2VDYWxsYmFja3MiLCJjaGFubmVsIiwiYnJvYWRjYXN0Q2hhbm5lbCIsIkJyb2FkY2FzdENoYW5uZWwiLCJicm9hZGNhc3RGaWRDaGFuZ2UiLCJPQkpFQ1RfU1RPUkVfTkFNRSIsIm9sZFZhbHVlIiwidXBkYXRlRm4iLCJnZXRJbnN0YWxsYXRpb25FbnRyeSIsImluc3RhbGxhdGlvbnMiLCJyZWdpc3RyYXRpb25Qcm9taXNlIiwiaW5zdGFsbGF0aW9uRW50cnkiLCJvbGRFbnRyeSIsImNsZWFyVGltZWRPdXRSZXF1ZXN0IiwicmVnaXN0cmF0aW9uU3RhdHVzIiwidXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeSIsImVudHJ5V2l0aFByb21pc2UiLCJvbkxpbmUiLCJpblByb2dyZXNzRW50cnkiLCJyZWdpc3RyYXRpb25UaW1lIiwicmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5IiwiaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyIiwiZW5kcG9pbnQiLCJoZWFkZXJzIiwiaGVhcnRiZWF0U2VydmljZSIsImhlYXJ0YmVhdHNIZWFkZXIiLCJnZXRIZWFydGJlYXRzSGVhZGVyIiwiYXV0aFZlcnNpb24iLCJzZGtWZXJzaW9uIiwiZmV0Y2giLCJvayIsInJlc3BvbnNlVmFsdWUiLCJyZWZyZXNoVG9rZW4iLCJhdXRoVG9rZW4iLCJjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0IiwicmVnaXN0ZXJJbnN0YWxsYXRpb24iLCJ3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24iLCJ0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkiLCJ1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0IiwiZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0IiwiZ2V0R2VuZXJhdGVBdXRoVG9rZW5FbmRwb2ludCIsImdldEF1dGhvcml6YXRpb25IZWFkZXIiLCJnZXRIZWFkZXJzV2l0aEF1dGgiLCJpbnN0YWxsYXRpb24iLCJyZWZyZXNoQXV0aFRva2VuIiwiZm9yY2VSZWZyZXNoIiwidG9rZW5Qcm9taXNlIiwiaXNFbnRyeVJlZ2lzdGVyZWQiLCJvbGRBdXRoVG9rZW4iLCJpc0F1dGhUb2tlbkV4cGlyZWQiLCJ1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0Iiwid2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdCIsImluUHJvZ3Jlc3NBdXRoVG9rZW4iLCJyZXF1ZXN0VGltZSIsIm1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5IiwidXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5IiwiZmV0Y2hBdXRoVG9rZW5Gcm9tU2VydmVyIiwiZ2V0TWlzc2luZ1ZhbHVlRXJyb3IiLCJ2YWx1ZU5hbWUiLCJJTlNUQUxMQVRJT05TX05BTUUiLCJjb25maWdLZXlzIiwia2V5TmFtZSIsImV4dHJhY3RBcHBDb25maWciLCJnZXRJZCIsImluc3RhbGxhdGlvbnNJbXBsIiwiZ2V0VG9rZW4iLCJjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbiIsIkFOQUxZVElDU19UWVBFIiwiR1RBR19VUkwiLCJjcmVhdGVHdGFnVHJ1c3RlZFR5cGVzU2NyaXB0VVJMIiwidXJsIiwic3RhcnRzV2l0aCIsImVyciIsImd0YWdVUkwiLCJwcm9taXNlQWxsU2V0dGxlZCIsInByb21pc2VzIiwiZGVmYXVsdFJldHJ5RGF0YSIsInRocm90dGxlTWV0YWRhdGEiLCJnZXRUaHJvdHRsZU1ldGFkYXRhIiwic2V0VGhyb3R0bGVNZXRhZGF0YSIsIm1ldGFkYXRhIiwiZGVsZXRlVGhyb3R0bGVNZXRhZGF0YSIsImZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeSIsInJldHJ5RGF0YSIsInRpbWVvdXRNaWxsaXMiLCJtZWFzdXJlbWVudElkIiwidGhyb3R0bGVFbmRUaW1lTWlsbGlzIiwic2lnbmFsIiwiQW5hbHl0aWNzQWJvcnRTaWduYWwiLCJhYm9ydCIsImF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkiLCJhcHBGaWVsZHMiLCJiYWNrb2ZmTWlsbGlzIiwidGltZW91dCIsInNldEFib3J0YWJsZVRpbWVvdXQiLCJhcHBVcmwiLCJlcnJvck1lc3NhZ2UiLCJqc29uUmVzcG9uc2UiLCJfaWdub3JlZCIsImh0dHBTdGF0dXMiLCJyZXNwb25zZU1lc3NhZ2UiLCJmZXRjaER5bmFtaWNDb25maWciLCJpc1JldHJpYWJsZUVycm9yIiwiZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQiLCJkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCIsIl9pbml0aWFsaXplQW5hbHl0aWNzIiwiZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCIsIm1lYXN1cmVtZW50SWRUb0FwcElkIiwiZ3RhZ0NvcmUiLCJkYXRhTGF5ZXJOYW1lIiwiZHluYW1pY0NvbmZpZ1Byb21pc2UiLCJmaWRQcm9taXNlIiwiZXJyb3JJbmZvIiwidmFsaWRhdGVJbmRleGVkREIiLCJlbnZJc1ZhbGlkIiwiZHluYW1pY0NvbmZpZyIsInNjcmlwdFRhZ3MiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImZpbmRHdGFnU2NyaXB0T25QYWdlIiwidHJ1c3RlZFR5cGVzUG9saWN5IiwicG9saWN5TmFtZSIsInBvbGljeU9wdGlvbnMiLCJ0cnVzdGVkVHlwZXMiLCJjcmVhdGVQb2xpY3kiLCJjcmVhdGVUcnVzdGVkVHlwZXNQb2xpY3kiLCJjcmVhdGVTY3JpcHRVUkwiLCJzY3JpcHQiLCJndGFnU2NyaXB0VVJMIiwiaGVhZCIsImluc2VydFNjcmlwdFRhZyIsImNvbmZpZ1Byb3BlcnRpZXMiLCJBbmFseXRpY3NTZXJ2aWNlIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCIsImd0YWdDb3JlRnVuY3Rpb24iLCJ3cmFwcGVkR3RhZ0Z1bmN0aW9uIiwiZ2xvYmFsSW5pdERvbmUiLCJmYWN0b3J5IiwibWlzbWF0Y2hlZEVudk1lc3NhZ2VzIiwicnVudGltZSIsImNocm9tZSIsImJyb3dzZXIiLCJjb29raWVFbmFibGVkIiwiZGV0YWlscyIsIndhcm5PbkJyb3dzZXJDb250ZXh0TWlzbWF0Y2giLCJkYXRhTGF5ZXIiLCJnZXRPckNyZWF0ZURhdGFMYXllciIsIndyYXBwZWRHdGFnIiwiZ3RhZ0Z1bmN0aW9uTmFtZSIsIl9hcmdzIiwiY29tbWFuZCIsImd0YWdQYXJhbXMiLCJpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yIiwiZ2FTZW5kVG9MaXN0IiwiZHluYW1pY0NvbmZpZ1Jlc3VsdHMiLCJzZW5kVG9JZCIsImZvdW5kQ29uZmlnIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiZ3RhZ09uRXZlbnQiLCJjb3JyZXNwb25kaW5nQXBwSWQiLCJndGFnT25Db25maWciLCJmaWVsZE5hbWUiLCJjdXN0b21QYXJhbXMiLCJ3cmFwR3RhZyIsIndyYXBPckNyZWF0ZUd0YWciLCJsb2dFdmVudCIsImFuYWx5dGljc0luc3RhbmNlIiwiZXZlbnROYW1lIiwiZXZlbnRQYXJhbXMiLCJndGFnRnVuY3Rpb24iLCJnbG9iYWwiLCJsb2dFdmVudCQxIiwiYW5hbHl0aWNzT3B0aW9ucyIsImFuYWx5dGljcyIsInJlYXNvbiIsImZpcmViYXNlQ29uZmlnIiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiRmlyZWJhc2VBbmFseXRpY3NNYW5hZ2VyIiwiZmlyZWJhc2VBcHAiLCJmaXJlYmFzZUFuYWx5dGljcyIsImFuYWx5dGljc1Byb3ZpZGVyIiwiaW5pdGlhbGl6ZUFuYWx5dGljcyIsImdldEFuYWx5dGljcyIsInN0YXRpYyIsImxvZ0V2ZW50cyIsImxvYWRpbmdTY3JlZW4iLCJoYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZSIsIm1zZyIsInByb2dyZXNzVmFsdWUiLCJwcm9ncmVzc0JhciIsIkFuZHJvaWQiLCJpc0NvbnRlbnRDYWNoZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY2FjaGVkU3RhdHVzIiwicmVhZExhbmd1YWdlRGF0YUZyb21DYWNoZUFuZE5vdGlmeUFuZHJvaWRBcHAiLCJzZXRJdGVtIiwiaGFuZGxlTG9hZGluZ01lc3NhZ2UiLCJwcm9ncmVzcyIsImNvbmZpcm0iLCJyZWxvYWQiLCJoYW5kbGVVcGRhdGVGb3VuZE1lc3NhZ2UiLCJxdWVyeVN0cmluZyIsInNlYXJjaCIsIlVSTFNlYXJjaFBhcmFtcyIsImZpcmViYXNlQW5hbHl0aWNzTWFuYWdlciIsImdldEluc3RhbmNlIiwiY29udGVudFBhcnNlciIsInBsYXlCYWNrRW5naW5lIiwicGFyc2VCb29rIiwiZW5mb3JjZUxhbmRzY2FwZU1vZGUiLCJyZWdpc3RlclNlcnZpY2VXb3JrZXIiLCJzZXRDb250YWluZXJBcHBPcmllbnRhdGlvbiIsIndiIiwicmVhZHkiLCJsYW5nIiwiYm9va0RhdGEiLCJjb250ZW50RmlsZSJdLCJzb3VyY2VSb290IjoiIn0=